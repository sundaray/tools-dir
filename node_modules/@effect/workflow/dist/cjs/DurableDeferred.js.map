{"version":3,"file":"DurableDeferred.js","names":["Context","_interopRequireWildcard","require","Effect","Encoding","Exit","_Function","Option","Schema","Workflow","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","Symbol","for","make","name","options","successSchema","success","Void","errorSchema","error","Never","exitSchema","failure","defect","Defect","EngineTag","GenericTag","InstanceTag","await_","await","fnUntraced","self","engine","instance","oexit","wrapActivityResult","deferredResult","isNone","suspended","interrupt","flatten","orDie","decodeUnknown","value","into","dual","effect","contextWithEffect","context","onExit","exit","encodedExit","encode","deferredDone","workflowName","workflow","executionId","deferred","raceAll","gen","isSome","effects","TokenTypeId","Token","String","pipe","brand","TokenParsed","Class","deferredName","asToken","encodeBase64Url","JSON","stringify","FromString","StringFromBase64Url","compose","parseJson","Tuple","transform","decode","parsed","fromString","decodeSync","encodeSync","token","tokenFromExecutionId","tokenFromPayload","map","payload","done","succeed","fail","failCause","cause"],"sources":["../../src/DurableDeferred.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}