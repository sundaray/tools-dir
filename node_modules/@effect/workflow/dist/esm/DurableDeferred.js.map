{"version":3,"file":"DurableDeferred.js","names":["Context","Effect","Encoding","Exit","dual","Option","Schema","Workflow","TypeId","Symbol","for","make","name","options","successSchema","success","Void","errorSchema","error","Never","exitSchema","failure","defect","Defect","EngineTag","GenericTag","InstanceTag","await_","fnUntraced","self","engine","instance","oexit","wrapActivityResult","deferredResult","isNone","suspended","interrupt","flatten","orDie","decodeUnknown","value","await","into","effect","contextWithEffect","context","get","onExit","exit","encodedExit","encode","deferredDone","workflowName","workflow","executionId","deferred","raceAll","gen","isSome","effects","TokenTypeId","Token","String","pipe","brand","TokenParsed","Class","deferredName","asToken","encodeBase64Url","JSON","stringify","FromString","StringFromBase64Url","compose","parseJson","Tuple","transform","decode","parsed","fromString","decodeSync","encodeSync","token","tokenFromExecutionId","tokenFromPayload","map","payload","done","succeed","fail","failCause","cause"],"sources":["../../src/DurableDeferred.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}