{"version":3,"file":"RequestResolver.js","names":["Arr","_interopRequireWildcard","require","Effect","Either","Fiber","_Function","Option","Request","RequestResolver","Runtime","Scope","Persistence","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","dataLoader","exports","dual","fnUntraced","self","options","maxSize","maxBatchSize","Infinity","scope","runtime","pipe","interruptible","runFork","batch","Set","process","items","withRequestCaching","forEach","request","resume","exit","map","batching","discard","delayedProcess","sleep","window","flatMap","currentBatch","fiber","undefined","addFinalizer","suspend","interrupt","void","fromEffect","async","item","add","size","parent","getOrThrow","getCurrentFiber","unsafeInterruptAsFork","id","sync","delete","persisted","gen","storage","ResultPersistence","make","storeId","timeToLive","partition","requests","getMany","partitionMap","_","match","onNone","left","onSome","right","orElseSucceed","result","ignoreLogged","makeBatched","remaining","results","completeCached","complete","completeUncached","zipRight"],"sources":["../../src/RequestResolver.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}