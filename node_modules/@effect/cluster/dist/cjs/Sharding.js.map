{"version":3,"file":"Sharding.js","names":["RpcClient","_interopRequireWildcard","require","_RpcMessage","Arr","Cause","Context","Deferred","Effect","Equal","Exit","Fiber","FiberHandle","FiberMap","FiberRef","_Function","HashMap","Iterable","Layer","MutableHashMap","MutableHashSet","MutableRef","Option","Predicate","PubSub","Schedule","Scope","Stream","_ClusterError","_ClusterSchema","_EntityAddress","_EntityId","Envelope","EntityManager","_entityReaper","_hash","_interruptors","_resourceMap","Message","MessageStorage","Reply","_Runners","_ShardId","_ShardingConfig","_ShardingRegistrationEvent","_ShardManager","_ShardStorage","_SingletonAddress","Snowflake","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Sharding","Tag","exports","make","gen","config","ShardingConfig","runners","Runners","shardManager","ShardManagerClient","snowflakeGen","Generator","shardingScope","scope","isShutdown","storage","storageEnabled","noop","shardStorage","ShardStorage","entityManagers","Map","shardAssignments","empty","selfShards","acquiredShards","activeShardsLatch","makeLatch","events","unbounded","getRegistrationEvents","fromPubSub","isLocalRunner","address","isSome","runnerAddress","equals","value","getShardId","entityId","group","id","Math","abs","hashString","shardsPerGroup","ShardId","disableValidation","isEntityOnLocalShards","shardId","selfAddress","addFinalizerExit","ignore","releaseAll","releasingShards","await","remove","add","unacquiredShards","size","forkIn","syncSingletons","releaseShards","close","acquired","acquire","resetShards","length","storageReadLatch","open","sleep","pipe","catchAllCause","cause","logWarning","repeat","spaced","entityMessagePollInterval","annotateLogs","package","module","fiber","runner","interruptible","suspend","refresh","flatMap","some","_","symbol","andThen","void","retry","times","schedule","logError","clearSelfShards","delay","forever","releaseShardsLock","unsafeMakeSemaphore","withPermits","forEach","values","state","manager","interruptShard","concurrency","discard","release","clear","singletons","singletonFibers","withSingletonLock","registerSingleton","fnUntraced","name","run","options","shardGroup","SingletonAddress","EntityId","map","dieMessage","context","wrappedRun","locally","currentLogAnnotations","never","scoped","provide","orDie","publish","SingletonRegistered","logDebug","running","unsafeHas","shouldBeRunning","internalInterruptors","fiberId","openStorageReadLatch","constant","storageReadLock","withStorageReadLock","storageAlreadyProcessed","_message","sentRequestIds","Set","sentRequestIdSets","addFinalizer","message","envelope","requestId","entityType","isProcessingFor","excludeReplies","unsafeClose","take","messages","unprocessedMessages","currentSentRequestIds","send","index","_tag","respond","ReplyWithContext","fromDefect","unsafeNext","defect","EntityNotManagedByRunner","isProcessing","resumptionState","entityResumptionState","unprocessed","interrupts","error","failureOption","isNone","saveReply","squash","resumeEntityFromStorage","whileLoop","while","step","body","oldest","unsafeHead","delete","ensuring","lastReceivedMessage","resumeEntityFromStorageImpl","getOrThrow","done","messageIds","push","unprocessedMessagesById","sendWithRetry","catchTags","fail","EntityNotAssignedToRunner","interrupt","MailboxFull","sendRetryInterval","AlreadyProcessingMessage","sync","effect","entity","sendLocal","simulateRemoteSerialization","notifyLocal","notify","envelopeId","isTransientError","or","RunnerUnavailable","is","sendOutgoing","retries","catchIf","maybeRunner","isPersisted","rpc","annotations","Persisted","runnerIsLocal","die","reset","clearReplies","matchCause","onSuccess","onFailure","shardManagerTimeoutFiber","extend","startShardManagerTimeout","shardManagerUnavailableTimeout","onlyIfMissing","stopShardManagerTimeout","machineId","register","shardGroups","setMachineId","mailbox","shardingEvents","startedLatch","eventsFiber","takeAll","event","shard","shards","intoDeferred","forkScoped","syncFiber","syncAssignments","refreshAssignmentsInterval","joinAll","zipRight","exponential","union","assignments","getAssignments","clientRequests","clients","ResourceMap","client","makeNoSerialization","protocol","spanPrefix","type","supportsAck","generateRequestId","RequestId","flatten","onFromClient","unsafeGet","ClientAddressTag","getCurrentFiber","requests","tag","entry","currentContext","makeClientRespond","write","clientRespondDiscard","OutgoingRequest","makeRequest","payload","headers","traceId","spanId","sampled","lastReceivedReply","none","OutgoingEnvelope","AckChunk","replyId","lastChunkId","Uninterruptible","isTransientInterrupt","interruptors","Interrupt","withFiberRuntime","EntityAddress","getShardGroup","clientFn","merge","proxyClient","Proxy","p","target","undefined","makeClient","_reply","reply","clientId","exit","reaper","EntityReaper","registerEntity","build","sharding","EntityRegistered","unregister","activeEntityCount","count","of","pollStorage","layer","layerGenerator","Default","GenericTag"],"sources":["../../src/Sharding.ts"],"sourcesContent":[null],"mappings":";;;;;;AAIA,IAAAA,SAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,GAAA,GAAAH,uBAAA,CAAAC,OAAA;AACA,IAAAG,KAAA,GAAAJ,uBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAL,uBAAA,CAAAC,OAAA;AACA,IAAAK,QAAA,GAAAN,uBAAA,CAAAC,OAAA;AAEA,IAAAM,MAAA,GAAAP,uBAAA,CAAAC,OAAA;AACA,IAAAO,KAAA,GAAAR,uBAAA,CAAAC,OAAA;AACA,IAAAQ,IAAA,GAAAT,uBAAA,CAAAC,OAAA;AACA,IAAAS,KAAA,GAAAV,uBAAA,CAAAC,OAAA;AACA,IAAAU,WAAA,GAAAX,uBAAA,CAAAC,OAAA;AACA,IAAAW,QAAA,GAAAZ,uBAAA,CAAAC,OAAA;AACA,IAAAY,QAAA,GAAAb,uBAAA,CAAAC,OAAA;AACA,IAAAa,SAAA,GAAAb,OAAA;AACA,IAAAc,OAAA,GAAAf,uBAAA,CAAAC,OAAA;AACA,IAAAe,QAAA,GAAAhB,uBAAA,CAAAC,OAAA;AACA,IAAAgB,KAAA,GAAAjB,uBAAA,CAAAC,OAAA;AACA,IAAAiB,cAAA,GAAAlB,uBAAA,CAAAC,OAAA;AACA,IAAAkB,cAAA,GAAAnB,uBAAA,CAAAC,OAAA;AACA,IAAAmB,UAAA,GAAApB,uBAAA,CAAAC,OAAA;AACA,IAAAoB,MAAA,GAAArB,uBAAA,CAAAC,OAAA;AACA,IAAAqB,SAAA,GAAAtB,uBAAA,CAAAC,OAAA;AACA,IAAAsB,MAAA,GAAAvB,uBAAA,CAAAC,OAAA;AACA,IAAAuB,QAAA,GAAAxB,uBAAA,CAAAC,OAAA;AACA,IAAAwB,KAAA,GAAAzB,uBAAA,CAAAC,OAAA;AACA,IAAAyB,MAAA,GAAA1B,uBAAA,CAAAC,OAAA;AAEA,IAAA0B,aAAA,GAAA1B,OAAA;AAMA,IAAA2B,cAAA,GAAA3B,OAAA;AAEA,IAAA4B,cAAA,GAAA5B,OAAA;AACA,IAAA6B,SAAA,GAAA7B,OAAA;AACA,IAAA8B,QAAA,GAAA/B,uBAAA,CAAAC,OAAA;AACA,IAAA+B,aAAA,GAAAhC,uBAAA,CAAAC,OAAA;AACA,IAAAgC,aAAA,GAAAhC,OAAA;AACA,IAAAiC,KAAA,GAAAjC,OAAA;AACA,IAAAkC,aAAA,GAAAlC,OAAA;AACA,IAAAmC,YAAA,GAAAnC,OAAA;AACA,IAAAoC,OAAA,GAAArC,uBAAA,CAAAC,OAAA;AACA,IAAAqC,cAAA,GAAAtC,uBAAA,CAAAC,OAAA;AACA,IAAAsC,KAAA,GAAAvC,uBAAA,CAAAC,OAAA;AAEA,IAAAuC,QAAA,GAAAvC,OAAA;AACA,IAAAwC,QAAA,GAAAxC,OAAA;AACA,IAAAyC,eAAA,GAAAzC,OAAA;AACA,IAAA0C,0BAAA,GAAA1C,OAAA;AACA,IAAA2C,aAAA,GAAA3C,OAAA;AACA,IAAA4C,aAAA,GAAA5C,OAAA;AACA,IAAA6C,iBAAA,GAAA7C,OAAA;AACA,IAAA8C,SAAA,GAAA/C,uBAAA,CAAAC,OAAA;AAA2C,SAAAD,wBAAAgD,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAlD,uBAAA,YAAAA,CAAAgD,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,gBAAAP,CAAA,IAAAD,CAAA,gBAAAC,CAAA,OAAAa,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAC,CAAA,OAAAM,CAAA,IAAAD,CAAA,GAAAU,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAC,CAAA,OAAAM,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAP,CAAA,EAAAM,CAAA,IAAAC,CAAA,CAAAP,CAAA,IAAAD,CAAA,CAAAC,CAAA,WAAAO,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAE3C;;;;AAIM,MAAOkB,QAAS,sBAAQ9D,OAAO,CAAC+D,GAAG,CAAC,0BAA0B,CAAC,EAyGjE;AAAAC,OAAA,CAAAF,QAAA,GAAAA,QAAA;AAYJ,MAAMG,IAAI,gBAAG/D,MAAM,CAACgE,GAAG,CAAC,aAAS;EAC/B,MAAMC,MAAM,GAAG,OAAOC,8BAAc;EAEpC,MAAMC,OAAO,GAAG,OAAOC,gBAAO;EAC9B,MAAMC,YAAY,GAAG,OAAOC,gCAAkB;EAC9C,MAAMC,YAAY,GAAG,OAAO/B,SAAS,CAACgC,SAAS;EAC/C,MAAMC,aAAa,GAAG,OAAOzE,MAAM,CAAC0E,KAAK;EACzC,MAAMC,UAAU,GAAG9D,UAAU,CAACkD,IAAI,CAAC,KAAK,CAAC;EAEzC,MAAMa,OAAO,GAAG,OAAO7C,cAAc,CAACA,cAAc;EACpD,MAAM8C,cAAc,GAAGD,OAAO,KAAK7C,cAAc,CAAC+C,IAAI;EACtD,MAAMC,YAAY,GAAG,OAAOC,0BAAY;EAExC,MAAMC,cAAc,GAAG,IAAIC,GAAG,EAA8B;EAE5D,MAAMC,gBAAgB,GAAGxE,cAAc,CAACyE,KAAK,EAA0B;EACvE,MAAMC,UAAU,GAAGzE,cAAc,CAACwE,KAAK,EAAW;EAElD;EACA,MAAME,cAAc,GAAG1E,cAAc,CAACwE,KAAK,EAAW;EACtD,MAAMG,iBAAiB,GAAG,OAAOvF,MAAM,CAACwF,SAAS,CAAC,KAAK,CAAC;EAExD,MAAMC,MAAM,GAAG,OAAOzE,MAAM,CAAC0E,SAAS,EAA6B;EACnE,MAAMC,qBAAqB,GAA6CxE,MAAM,CAACyE,UAAU,CAACH,MAAM,CAAC;EAEjG,MAAMI,aAAa,GAAIC,OAAsB,IAC3ChF,MAAM,CAACiF,MAAM,CAAC9B,MAAM,CAAC+B,aAAa,CAAC,IAAI/F,KAAK,CAACgG,MAAM,CAACH,OAAO,EAAE7B,MAAM,CAAC+B,aAAa,CAACE,KAAK,CAAC;EAE1F,SAASC,UAAUA,CAACC,QAAkB,EAAEC,KAAa;IACnD,MAAMC,EAAE,GAAGC,IAAI,CAACC,GAAG,CAAC,IAAAC,gBAAU,EAACL,QAAQ,CAAC,GAAGnC,MAAM,CAACyC,cAAc,CAAC,GAAG,CAAC;IACrE,OAAOC,gBAAO,CAAC5C,IAAI,CAAC;MAAEsC,KAAK;MAAEC;IAAE,CAAE,EAAE;MAAEM,iBAAiB,EAAE;IAAI,CAAE,CAAC;EACjE;EAEA,SAASC,qBAAqBA,CAACf,OAAsB;IACnD,OAAOlF,cAAc,CAACwC,GAAG,CAACkC,cAAc,EAAEQ,OAAO,CAACgB,OAAO,CAAC;EAC5D;EAEA;EAEA,IAAIhG,MAAM,CAACiF,MAAM,CAAC9B,MAAM,CAAC+B,aAAa,CAAC,EAAE;IACvC,MAAMe,WAAW,GAAG9C,MAAM,CAAC+B,aAAa,CAACE,KAAK;IAC9C,OAAOhF,KAAK,CAAC8F,gBAAgB,CAACvC,aAAa,EAAE,MAAK;MAChD;MACA,OAAOzE,MAAM,CAACiH,MAAM,CAAClC,YAAY,CAACmC,UAAU,CAACH,WAAW,CAAC,CAAC;IAC5D,CAAC,CAAC;IAEF,MAAMI,eAAe,GAAGvG,cAAc,CAACwE,KAAK,EAAW;IACvD,OAAOpF,MAAM,CAACgE,GAAG,CAAC,aAAS;MACzB,OAAO,IAAI,EAAE;QACX,OAAOuB,iBAAiB,CAAC6B,KAAK;QAE9B;QACA,KAAK,MAAMN,OAAO,IAAIxB,cAAc,EAAE;UACpC,IAAI1E,cAAc,CAACwC,GAAG,CAACiC,UAAU,EAAEyB,OAAO,CAAC,EAAE;UAC7ClG,cAAc,CAACyG,MAAM,CAAC/B,cAAc,EAAEwB,OAAO,CAAC;UAC9ClG,cAAc,CAAC0G,GAAG,CAACH,eAAe,EAAEL,OAAO,CAAC;QAC9C;QACA;QACA,MAAMS,gBAAgB,GAAG3G,cAAc,CAACwE,KAAK,EAAW;QACxD,KAAK,MAAM0B,OAAO,IAAIzB,UAAU,EAAE;UAChC,IAAIzE,cAAc,CAACwC,GAAG,CAACkC,cAAc,EAAEwB,OAAO,CAAC,IAAIlG,cAAc,CAACwC,GAAG,CAAC+D,eAAe,EAAEL,OAAO,CAAC,EAAE;UACjGlG,cAAc,CAAC0G,GAAG,CAACC,gBAAgB,EAAET,OAAO,CAAC;QAC/C;QAEA,IAAIlG,cAAc,CAAC4G,IAAI,CAACL,eAAe,CAAC,GAAG,CAAC,EAAE;UAC5C,OAAOnH,MAAM,CAACyH,MAAM,CAACC,cAAc,EAAEjD,aAAa,CAAC;UACnD,OAAOkD,aAAa;QACtB;QAEA,IAAI/G,cAAc,CAAC4G,IAAI,CAACD,gBAAgB,CAAC,KAAK,CAAC,EAAE;UAC/C,OAAOhC,iBAAiB,CAACqC,KAAK;UAC9B;QACF;QAEA,MAAMC,QAAQ,GAAG,OAAO9C,YAAY,CAAC+C,OAAO,CAACf,WAAW,EAAEQ,gBAAgB,CAAC;QAC3E,OAAOvH,MAAM,CAACiH,MAAM,CAACrC,OAAO,CAACmD,WAAW,CAACF,QAAQ,CAAC,CAAC;QACnD,KAAK,MAAMf,OAAO,IAAIe,QAAQ,EAAE;UAC9BjH,cAAc,CAAC0G,GAAG,CAAChC,cAAc,EAAEwB,OAAO,CAAC;QAC7C;QACA,IAAIe,QAAQ,CAACG,MAAM,GAAG,CAAC,EAAE;UACvB,OAAOC,gBAAgB,CAACC,IAAI;UAC5B,OAAOlI,MAAM,CAACyH,MAAM,CAACC,cAAc,EAAEjD,aAAa,CAAC;QACrD;QACA,OAAOzE,MAAM,CAACmI,KAAK,CAAC,IAAI,CAAC;MAC3B;IACF,CAAC,CAAC,CAACC,IAAI,CACLpI,MAAM,CAACqI,aAAa,CAAEC,KAAK,IAAKtI,MAAM,CAACuI,UAAU,CAAC,kCAAkC,EAAED,KAAK,CAAC,CAAC,EAC7FtI,MAAM,CAACwI,MAAM,CAACvH,QAAQ,CAACwH,MAAM,CAACxE,MAAM,CAACyE,yBAAyB,CAAC,CAAC,EAChE1I,MAAM,CAAC2I,YAAY,CAAC;MAClBC,OAAO,EAAE,iBAAiB;MAC1BC,MAAM,EAAE,UAAU;MAClBC,KAAK,EAAE,wBAAwB;MAC/BC,MAAM,EAAEhC;KACT,CAAC,EACF/G,MAAM,CAACgJ,aAAa,EACpBhJ,MAAM,CAACyH,MAAM,CAAChD,aAAa,CAAC,CAC7B;IAED;IACA,OAAOzE,MAAM,CAACiJ,OAAO,CAAC,MACpBlE,YAAY,CAACmE,OAAO,CAACnC,WAAW,EAAE,CAChC,GAAGzB,cAAc,EACjB,GAAG6B,eAAe,CACnB,CAAC,CACH,CAACiB,IAAI,CACJpI,MAAM,CAACmJ,OAAO,CAAEtB,QAAQ,IAAI;MAC1B,KAAK,MAAMf,OAAO,IAAIxB,cAAc,EAAE;QACpC,IAAI,CAACuC,QAAQ,CAACuB,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACpJ,KAAK,CAACqJ,MAAM,CAAC,CAACxC,OAAO,CAAC,CAAC,EAAE;UACnDlG,cAAc,CAACyG,MAAM,CAAC/B,cAAc,EAAEwB,OAAO,CAAC;UAC9ClG,cAAc,CAAC0G,GAAG,CAACH,eAAe,EAAEL,OAAO,CAAC;QAC9C;MACF;MACA,OAAOlG,cAAc,CAAC4G,IAAI,CAACL,eAAe,CAAC,GAAG,CAAC,GAC7CnH,MAAM,CAACuJ,OAAO,CACZvJ,MAAM,CAACyH,MAAM,CAACC,cAAc,EAAEjD,aAAa,CAAC,EAC5CkD,aAAa,CACd,GACD3H,MAAM,CAACwJ,IAAI;IACf,CAAC,CAAC,EACFxJ,MAAM,CAACyJ,KAAK,CAAC;MACXC,KAAK,EAAE,CAAC;MACRC,QAAQ,EAAE1I,QAAQ,CAACwH,MAAM,CAAC,EAAE;KAC7B,CAAC,EACFzI,MAAM,CAACqI,aAAa,CAAEC,KAAK,IACzBtI,MAAM,CAAC4J,QAAQ,CAAC,+BAA+B,EAAEtB,KAAK,CAAC,CAACF,IAAI,CAC1DpI,MAAM,CAACuJ,OAAO,CAACM,eAAe,CAAC,CAChC,CACF,EACD7J,MAAM,CAAC8J,KAAK,CAAC,WAAW,CAAC,EACzB9J,MAAM,CAAC+J,OAAO,EACd/J,MAAM,CAACgJ,aAAa,EACpBhJ,MAAM,CAACyH,MAAM,CAAChD,aAAa,CAAC,CAC7B;IAED,MAAMuF,iBAAiB,GAAGhK,MAAM,CAACiK,mBAAmB,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;IACtE,MAAMvC,aAAa,GAAGqC,iBAAiB,CACrChK,MAAM,CAACiJ,OAAO,CAAC,MACbjJ,MAAM,CAACmK,OAAO,CACZhD,eAAe,EACdL,OAAO,IACN9G,MAAM,CAACmK,OAAO,CACZlF,cAAc,CAACmF,MAAM,EAAE,EACtBC,KAAK,IAAKA,KAAK,CAACC,OAAO,CAACC,cAAc,CAACzD,OAAO,CAAC,EAChD;MAAE0D,WAAW,EAAE,WAAW;MAAEC,OAAO,EAAE;IAAI,CAAE,CAC5C,CAACrC,IAAI,CACJpI,MAAM,CAACuJ,OAAO,CAACxE,YAAY,CAAC2F,OAAO,CAAC3D,WAAW,EAAED,OAAO,CAAC,CAAC,EAC1D9G,MAAM,CAAC2I,YAAY,CAAC;MAClBI,MAAM,EAAEhC;KACT,CAAC,EACF/G,MAAM,CAACuJ,OAAO,CAAC,MAAK;MAClB3I,cAAc,CAACyG,MAAM,CAACF,eAAe,EAAEL,OAAO,CAAC;IACjD,CAAC,CAAC,CACH,EACH;MAAE0D,WAAW,EAAE,WAAW;MAAEC,OAAO,EAAE;IAAI,CAAE,CAC5C,CACF,CACF;EACH;EAEA,MAAMZ,eAAe,GAAG7J,MAAM,CAACiJ,OAAO,CAAC,MAAK;IAC1CrI,cAAc,CAAC+J,KAAK,CAACtF,UAAU,CAAC;IAChC,OAAOE,iBAAiB,CAAC2C,IAAI;EAC/B,CAAC,CAAC;EAEF;EAEA,MAAM0C,UAAU,GAAG,IAAI1F,GAAG,EAAiF;EAC3G,MAAM2F,eAAe,GAAG,OAAOxK,QAAQ,CAAC0D,IAAI,EAAoB;EAChE,MAAM+G,iBAAiB,GAAG9K,MAAM,CAACiK,mBAAmB,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;EAEtE,MAAMa,iBAAiB,GAA0C/K,MAAM,CAACgL,UAAU,CAChF,WAAUC,IAAI,EAAEC,GAAG,EAAEC,OAAO;IAC1B,MAAMC,UAAU,GAAGD,OAAO,EAAEC,UAAU,IAAI,SAAS;IACnD,MAAMtF,OAAO,GAAG,IAAIuF,kCAAgB,CAAC;MACnCvE,OAAO,EAAEX,UAAU,CAACmF,kBAAQ,CAACvH,IAAI,CAACkH,IAAI,CAAC,EAAEG,UAAU,CAAC;MACpDH;KACD,CAAC;IAEF,IAAIM,GAAG,GAAGX,UAAU,CAACvH,GAAG,CAACyC,OAAO,CAACgB,OAAO,CAAC;IACzC,IAAI,CAACyE,GAAG,EAAE;MACRA,GAAG,GAAG5K,cAAc,CAACyE,KAAK,EAAE;MAC5BwF,UAAU,CAACtH,GAAG,CAACwC,OAAO,CAACgB,OAAO,EAAEyE,GAAG,CAAC;IACtC;IACA,IAAI5K,cAAc,CAACyC,GAAG,CAACmI,GAAG,EAAEzF,OAAO,CAAC,EAAE;MACpC,OAAO,OAAO9F,MAAM,CAACwL,UAAU,CAAC,cAAcP,IAAI,yBAAyB,CAAC;IAC9E;IAEA,MAAMQ,OAAO,GAAG,OAAOzL,MAAM,CAACyL,OAAO,EAAS;IAC9C,MAAMC,UAAU,GAAGR,GAAG,CAAC9C,IAAI,CACzBpI,MAAM,CAAC2L,OAAO,CAACrL,QAAQ,CAACsL,qBAAqB,EAAEpL,OAAO,CAAC4E,KAAK,EAAE,CAAC,EAC/DpF,MAAM,CAACuJ,OAAO,CAACvJ,MAAM,CAAC6L,KAAK,CAAC,EAC5B7L,MAAM,CAAC8L,MAAM,EACb9L,MAAM,CAAC+L,OAAO,CAACN,OAAO,CAAC,EACvBzL,MAAM,CAACgM,KAAK,EACZhM,MAAM,CAACgJ,aAAa,CACG;IACzBrI,cAAc,CAAC2C,GAAG,CAACiI,GAAG,EAAEzF,OAAO,EAAE4F,UAAU,CAAC;IAE5C,OAAO1K,MAAM,CAACiL,OAAO,CAACxG,MAAM,EAAE,IAAAyG,8CAAmB,EAAC;MAAEpG;IAAO,CAAE,CAAC,CAAC;IAE/D;IACA,IAAIlF,cAAc,CAACwC,GAAG,CAACkC,cAAc,EAAEQ,OAAO,CAACgB,OAAO,CAAC,EAAE;MACvD,OAAO9G,MAAM,CAACmM,QAAQ,CAAC,oBAAoB,EAAErG,OAAO,CAAC;MACrD,OAAOzF,QAAQ,CAAC6K,GAAG,CAACL,eAAe,EAAE/E,OAAO,EAAE4F,UAAU,CAAC;IAC3D;EACF,CAAC,EACDZ,iBAAiB,CAClB;EAED,MAAMpD,cAAc,GAAGoD,iBAAiB,CAAC9K,MAAM,CAACgE,GAAG,CAAC,aAAS;IAC3D,KAAK,MAAM,CAAC8C,OAAO,EAAEyE,GAAG,CAAC,IAAIX,UAAU,EAAE;MACvC,KAAK,MAAM,CAAC9E,OAAO,EAAEoF,GAAG,CAAC,IAAIK,GAAG,EAAE;QAChC,MAAMa,OAAO,GAAG/L,QAAQ,CAACgM,SAAS,CAACxB,eAAe,EAAE/E,OAAO,CAAC;QAC5D,MAAMwG,eAAe,GAAG1L,cAAc,CAACwC,GAAG,CAACkC,cAAc,EAAEwB,OAAO,CAAC;QACnE,IAAIsF,OAAO,IAAI,CAACE,eAAe,EAAE;UAC/B,OAAOtM,MAAM,CAACmM,QAAQ,CAAC,oBAAoB,EAAErG,OAAO,CAAC;UACrDyG,kCAAoB,CAACjF,GAAG,CAAC,OAAOtH,MAAM,CAACwM,OAAO,CAAC;UAC/C,OAAOnM,QAAQ,CAACgH,MAAM,CAACwD,eAAe,EAAE/E,OAAO,CAAC;QAClD,CAAC,MAAM,IAAI,CAACsG,OAAO,IAAIE,eAAe,EAAE;UACtC,OAAOtM,MAAM,CAACmM,QAAQ,CAAC,oBAAoB,EAAErG,OAAO,CAAC;UACrD,OAAOzF,QAAQ,CAAC6K,GAAG,CAACL,eAAe,EAAE/E,OAAO,EAAEoF,GAAG,CAAC;QACpD;MACF;IACF;EACF,CAAC,CAAC,CAAC;EAEH;EAEA,MAAMjD,gBAAgB,GAAG,OAAOjI,MAAM,CAACwF,SAAS,CAAC,IAAI,CAAC;EACtD,MAAMiH,oBAAoB,GAAG,IAAAC,kBAAQ,EAACzE,gBAAgB,CAACC,IAAI,CAAC;EAE5D,MAAMyE,eAAe,GAAG3M,MAAM,CAACiK,mBAAmB,CAAC,CAAC,CAAC;EACrD,MAAM2C,mBAAmB,GAAGD,eAAe,CAACzC,WAAW,CAAC,CAAC,CAAC;EAE1D,IAAI2C,uBAAuB,GAAIC,QAAsC,IAAK,IAAI;EAE9E;EACA;EACA,MAAMC,cAAc,GAAG,IAAIC,GAAG,EAAuB;EACrD,MAAMC,iBAAiB,GAAG,IAAID,GAAG,EAA4B;EAE7D,IAAInI,cAAc,IAAI/D,MAAM,CAACiF,MAAM,CAAC9B,MAAM,CAAC+B,aAAa,CAAC,EAAE;IACzD,MAAMe,WAAW,GAAG9C,MAAM,CAAC+B,aAAa,CAACE,KAAK;IAE9C,OAAOlG,MAAM,CAACgE,GAAG,CAAC,aAAS;MACzB,OAAOhE,MAAM,CAACmM,QAAQ,CAAC,UAAU,CAAC;MAClC,OAAOnM,MAAM,CAACkN,YAAY,CAAC,MAAMlN,MAAM,CAACmM,QAAQ,CAAC,eAAe,CAAC,CAAC;MAElEY,cAAc,CAACpC,KAAK,EAAE;MACtBsC,iBAAiB,CAACtC,KAAK,EAAE;MAEzBkC,uBAAuB,GAAIM,OAAqC,IAAI;QAClE,IAAI,CAACJ,cAAc,CAAC3J,GAAG,CAAC+J,OAAO,CAACC,QAAQ,CAACC,SAAS,CAAC,EAAE;UACnD,OAAO,KAAK;QACd;QACA,MAAMhD,KAAK,GAAGpF,cAAc,CAAC5B,GAAG,CAAC8J,OAAO,CAACC,QAAQ,CAACtH,OAAO,CAACwH,UAAU,CAAC;QACrE,IAAI,CAACjD,KAAK,EAAE,OAAO,IAAI;QACvB,OAAO,CAACA,KAAK,CAACC,OAAO,CAACiD,eAAe,CAACJ,OAAO,EAAE;UAAEK,cAAc,EAAE;QAAI,CAAE,CAAC;MAC1E,CAAC;MAED,OAAO,IAAI,EAAE;QACX;QACA,OAAOvF,gBAAgB,CAACb,KAAK;QAE7B;QACA;QACAa,gBAAgB,CAACwF,WAAW,EAAE;QAE9B;QACA;QACA;QACA,OAAOd,eAAe,CAACe,IAAI,CAAC,CAAC,CAAC;QAE9B,MAAMC,QAAQ,GAAG,OAAO/I,OAAO,CAACgJ,mBAAmB,CAACtI,cAAc,CAAC;QACnE,MAAMuI,qBAAqB,GAAG,IAAIb,GAAG,EAAuB;QAC5DC,iBAAiB,CAAC3F,GAAG,CAACuG,qBAAqB,CAAC;QAE5C,MAAMC,IAAI,GAAG9N,MAAM,CAACqI,aAAa,CAC/BrI,MAAM,CAACiJ,OAAO,CAAC,MAAK;UAClB,MAAMkE,OAAO,GAAGQ,QAAQ,CAACI,KAAK,CAAC;UAC/B,IAAIZ,OAAO,CAACa,IAAI,KAAK,iBAAiB,EAAE;YACtC,IAAIjB,cAAc,CAAC3J,GAAG,CAAC+J,OAAO,CAACC,QAAQ,CAACC,SAAS,CAAC,EAAE;cAClD,OAAOrN,MAAM,CAACwJ,IAAI;YACpB;YACAuD,cAAc,CAACzF,GAAG,CAAC6F,OAAO,CAACC,QAAQ,CAACC,SAAS,CAAC;YAC9CQ,qBAAqB,CAACvG,GAAG,CAAC6F,OAAO,CAACC,QAAQ,CAACC,SAAS,CAAC;UACvD;UACA,MAAMvH,OAAO,GAAGqH,OAAO,CAACC,QAAQ,CAACtH,OAAO;UACxC,IAAI,CAAClF,cAAc,CAACwC,GAAG,CAACkC,cAAc,EAAEQ,OAAO,CAACgB,OAAO,CAAC,EAAE;YACxD,OAAO9G,MAAM,CAACwJ,IAAI;UACpB;UACA,MAAMa,KAAK,GAAGpF,cAAc,CAAC5B,GAAG,CAACyC,OAAO,CAACwH,UAAU,CAAC;UACpD,IAAI,CAACjD,KAAK,EAAE;YACV,IAAI8C,OAAO,CAACa,IAAI,KAAK,iBAAiB,EAAE;cACtC,OAAOhO,MAAM,CAACgM,KAAK,CAACmB,OAAO,CAACc,OAAO,CAACjM,KAAK,CAACkM,gBAAgB,CAACC,UAAU,CAAC;gBACpE7H,EAAE,EAAE/B,YAAY,CAAC6J,UAAU,EAAE;gBAC7Bf,SAAS,EAAEF,OAAO,CAACC,QAAQ,CAACC,SAAS;gBACrCgB,MAAM,EAAE,IAAIC,sCAAwB,CAAC;kBAAExI;gBAAO,CAAE;eACjD,CAAC,CAAC,CAAC;YACN;YACA,OAAO9F,MAAM,CAACwJ,IAAI;UACpB;UAEA,MAAM+E,YAAY,GAAGlE,KAAK,CAACC,OAAO,CAACiD,eAAe,CAACJ,OAAO,CAAC;UAE3D;UACA;UACA,IAAIA,OAAO,CAACa,IAAI,KAAK,kBAAkB,IAAIO,YAAY,EAAE;YACvD,OAAOlE,KAAK,CAACC,OAAO,CAACwD,IAAI,CAACX,OAAO,CAAC;UACpC,CAAC,MAAM,IAAIoB,YAAY,EAAE;YACvB,OAAOvO,MAAM,CAACwJ,IAAI;UACpB;UAEA;UACA;UACA,MAAMgF,eAAe,GAAG7N,cAAc,CAAC0C,GAAG,CAACoL,qBAAqB,EAAE3I,OAAO,CAAC;UAC1E,IAAIhF,MAAM,CAACiF,MAAM,CAACyI,eAAe,CAAC,EAAE;YAClCA,eAAe,CAACtI,KAAK,CAACwI,WAAW,CAACpH,GAAG,CAAC6F,OAAO,CAACC,QAAQ,CAACC,SAAS,CAAC;YACjE,IAAIF,OAAO,CAACC,QAAQ,CAACY,IAAI,KAAK,WAAW,EAAE;cACzCQ,eAAe,CAACtI,KAAK,CAACyI,UAAU,CAACrL,GAAG,CAAC6J,OAAO,CAACC,QAAQ,CAACC,SAAS,EAAEF,OAAmC,CAAC;YACvG;YACA,OAAOnN,MAAM,CAACwJ,IAAI;UACpB;UACA,OAAOa,KAAK,CAACC,OAAO,CAACwD,IAAI,CAACX,OAAO,CAAC;QACpC,CAAC,CAAC,EACD7E,KAAK,IAAI;UACR,MAAM6E,OAAO,GAAGQ,QAAQ,CAACI,KAAK,CAAC;UAC/B,MAAMa,KAAK,GAAG/O,KAAK,CAACgP,aAAa,CAACvG,KAAK,CAAC;UACxC;UACA,IAAIxH,MAAM,CAACgO,MAAM,CAACF,KAAK,CAAC,EAAE;YACxB,OAAOhK,OAAO,CAACmK,SAAS,CAAC/M,KAAK,CAACkM,gBAAgB,CAACC,UAAU,CAAC;cACzD7H,EAAE,EAAE/B,YAAY,CAAC6J,UAAU,EAAE;cAC7Bf,SAAS,EAAEF,OAAO,CAACC,QAAQ,CAACC,SAAS;cACrCgB,MAAM,EAAExO,KAAK,CAACmP,MAAM,CAAC1G,KAAK;aAC3B,CAAC,CAAC;UACL;UACA,IAAIsG,KAAK,CAAC1I,KAAK,CAAC8H,IAAI,KAAK,aAAa,EAAE;YACtC;YACA,OAAOiB,uBAAuB,CAAC9B,OAAuC,CAAC;UACzE;UACA,OAAOnN,MAAM,CAACwJ,IAAI;QACpB,CAAC,CACF;QAED,IAAIuE,KAAK,GAAG,CAAC;QACb,OAAO/N,MAAM,CAACkP,SAAS,CAAC;UACtBC,KAAK,EAAEA,CAAA,KAAMpB,KAAK,GAAGJ,QAAQ,CAAC3F,MAAM;UACpCoH,IAAI,EAAEA,CAAA,KAAMrB,KAAK,EAAE;UACnBsB,IAAI,EAAE,IAAA3C,kBAAQ,EAACoB,IAAI;SACpB,CAAC;QAEF;QACA,OAAOnB,eAAe,CAACjC,OAAO,CAAC,CAAC,CAAC;QAEjC,OAAOuC,iBAAiB,CAACzF,IAAI,GAAG,EAAE,EAAE;UAClC,MAAM8H,MAAM,GAAG7O,QAAQ,CAAC8O,UAAU,CAACtC,iBAAiB,CAAC;UACrDA,iBAAiB,CAACuC,MAAM,CAACF,MAAM,CAAC;UAChC,KAAK,MAAMhJ,EAAE,IAAIgJ,MAAM,EAAE;YACvBvC,cAAc,CAACyC,MAAM,CAAClJ,EAAE,CAAC;UAC3B;QACF;MACF;IACF,CAAC,CAAC,CAAC8B,IAAI,CACLpI,MAAM,CAAC8L,MAAM,EACb9L,MAAM,CAACyP,QAAQ,CAAC9C,eAAe,CAACzF,UAAU,CAAC,EAC3ClH,MAAM,CAACqI,aAAa,CAAEC,KAAK,IAAKtI,MAAM,CAACuI,UAAU,CAAC,sCAAsC,EAAED,KAAK,CAAC,CAAC,EACjGtI,MAAM,CAACwI,MAAM,CAACvH,QAAQ,CAACwH,MAAM,CAACxE,MAAM,CAACyE,yBAAyB,CAAC,CAAC,EAChE1I,MAAM,CAAC2I,YAAY,CAAC;MAClBC,OAAO,EAAE,iBAAiB;MAC1BC,MAAM,EAAE,UAAU;MAClBC,KAAK,EAAE,mBAAmB;MAC1BC,MAAM,EAAEhC;KACT,CAAC,EACF/G,MAAM,CAACgJ,aAAa,EACpBhJ,MAAM,CAACyH,MAAM,CAAChD,aAAa,CAAC,CAC7B;IAED;IACA,OAAOwD,gBAAgB,CAACC,IAAI,CAACE,IAAI,CAC/BpI,MAAM,CAAC8J,KAAK,CAAC7F,MAAM,CAACyE,yBAAyB,CAAC,EAC9C1I,MAAM,CAAC+J,OAAO,EACd/J,MAAM,CAACgJ,aAAa,EACpBhJ,MAAM,CAACyH,MAAM,CAAChD,aAAa,CAAC,CAC7B;IAED;IACA,MAAMgK,qBAAqB,GAAG9N,cAAc,CAACyE,KAAK,EAG9C;IACJ,MAAM6J,uBAAuB,GAAIS,mBAAiD,IAAI;MACpF,MAAM5J,OAAO,GAAG4J,mBAAmB,CAACtC,QAAQ,CAACtH,OAAO;MACpD,MAAM0I,eAAe,GAAG7N,cAAc,CAAC0C,GAAG,CAACoL,qBAAqB,EAAE3I,OAAO,CAAC;MAC1E,IAAIhF,MAAM,CAACiF,MAAM,CAACyI,eAAe,CAAC,EAAE;QAClCA,eAAe,CAACtI,KAAK,CAACwI,WAAW,CAACpH,GAAG,CAACoI,mBAAmB,CAACtC,QAAQ,CAACC,SAAS,CAAC;QAC7E,OAAOrN,MAAM,CAACwJ,IAAI;MACpB;MACA7I,cAAc,CAAC2C,GAAG,CAACmL,qBAAqB,EAAE3I,OAAO,EAAE;QACjD4I,WAAW,EAAE,IAAI1B,GAAG,CAAC,CAAC0C,mBAAmB,CAACtC,QAAQ,CAACC,SAAS,CAAC,CAAC;QAC9DsB,UAAU,EAAE,IAAIzJ,GAAG;OACpB,CAAC;MACF,OAAOyK,2BAA2B,CAAC7J,OAAO,CAAC;IAC7C,CAAC;IACD,MAAM6J,2BAA2B,GAAG3P,MAAM,CAACgL,UAAU,CACnD,WAAUlF,OAAsB;MAC9B,MAAMuE,KAAK,GAAGpF,cAAc,CAAC5B,GAAG,CAACyC,OAAO,CAACwH,UAAU,CAAC;MACpD,IAAI,CAACjD,KAAK,EAAE;QACV1J,cAAc,CAAC0G,MAAM,CAACoH,qBAAqB,EAAE3I,OAAO,CAAC;QACrD;MACF;MAEA,MAAM0I,eAAe,GAAG1N,MAAM,CAAC8O,UAAU,CAACjP,cAAc,CAAC0C,GAAG,CAACoL,qBAAqB,EAAE3I,OAAO,CAAC,CAAC;MAC7F,IAAI+J,IAAI,GAAG,KAAK;MAEhB,OAAO,CAACA,IAAI,EAAE;QACZ;QACA,IAAI,CAACjP,cAAc,CAACwC,GAAG,CAACkC,cAAc,EAAEQ,OAAO,CAACgB,OAAO,CAAC,EAAE;UACxD;QACF;QAEA;QACA,MAAMgJ,UAAU,GAAGlQ,GAAG,CAACwF,KAAK,EAAuB;QACnD,KAAK,MAAMkB,EAAE,IAAIkI,eAAe,CAACE,WAAW,EAAE;UAC5C,IAAIoB,UAAU,CAAC9H,MAAM,KAAK,IAAI,EAAE;UAChC8H,UAAU,CAACC,IAAI,CAACzJ,EAAE,CAAC;QACrB;QAEA,MAAMqH,QAAQ,GAAG,OAAO/I,OAAO,CAACoL,uBAAuB,CAACF,UAAU,CAAC;QAEnE;QACA,IAAInC,QAAQ,CAAC3F,MAAM,KAAK,CAAC,EAAE;UACzB,OAAOhI,MAAM,CAACmI,KAAK,CAAClE,MAAM,CAACyE,yBAAyB,CAAC;UACrD;QACF;QAEA,IAAIqF,KAAK,GAAG,CAAC;QAEb,MAAMkC,aAAa,GAGfjQ,MAAM,CAACkQ,SAAS,CAClBlQ,MAAM,CAACiJ,OAAO,CAAC,MAAK;UAClB,IAAI,CAACrI,cAAc,CAACwC,GAAG,CAACkC,cAAc,EAAEQ,OAAO,CAACgB,OAAO,CAAC,EAAE;YACxD,OAAO9G,MAAM,CAACmQ,IAAI,CAAC,IAAIC,uCAAyB,CAAC;cAAEtK;YAAO,CAAE,CAAC,CAAC;UAChE;UAEA,MAAMqH,OAAO,GAAGQ,QAAQ,CAACI,KAAK,CAAC;UAC/B;UACA,MAAMsC,SAAS,GAAGlD,OAAO,CAACa,IAAI,KAAK,iBAAiB,IAClDQ,eAAe,CAACG,UAAU,CAACtL,GAAG,CAAC8J,OAAO,CAACC,QAAQ,CAACC,SAAS,CAAC;UAC5D,OAAOgD,SAAS,GACdrQ,MAAM,CAACmJ,OAAO,CAACkB,KAAK,CAACC,OAAO,CAACwD,IAAI,CAACX,OAAO,CAAC,EAAE,MAAK;YAC/CqB,eAAe,CAACG,UAAU,CAACa,MAAM,CAACrC,OAAO,CAACC,QAAQ,CAACC,SAAS,CAAC;YAC7D,OAAOhD,KAAK,CAACC,OAAO,CAACwD,IAAI,CAACuC,SAAS,CAAC;UACtC,CAAC,CAAC,GACFhG,KAAK,CAACC,OAAO,CAACwD,IAAI,CAACX,OAAO,CAAC;QAC/B,CAAC,CAAC,EACF;UACEmD,WAAW,EAAEA,CAAA,KAAMtQ,MAAM,CAAC8J,KAAK,CAACmG,aAAa,EAAEhM,MAAM,CAACsM,iBAAiB,CAAC;UACxEC,wBAAwB,EAAEA,CAAA,KAAMxQ,MAAM,CAACwJ;SACxC,CACF;QAED,OAAOxJ,MAAM,CAACkP,SAAS,CAAC;UACtBC,KAAK,EAAEA,CAAA,KAAMpB,KAAK,GAAGJ,QAAQ,CAAC3F,MAAM;UACpCqH,IAAI,EAAE,IAAA3C,kBAAQ,EAACuD,aAAa,CAAC;UAC7Bb,IAAI,EAAEA,CAAA,KAAMrB,KAAK;SAClB,CAAC;QAEF,KAAK,MAAMzH,EAAE,IAAIwJ,UAAU,EAAE;UAC3BtB,eAAe,CAACE,WAAW,CAACc,MAAM,CAAClJ,EAAE,CAAC;QACxC;QACA,IAAIkI,eAAe,CAACE,WAAW,CAAClH,IAAI,GAAG,CAAC,EAAE;QAE1C;QACA,OAAOoF,mBAAmB,CAAC5M,MAAM,CAACyQ,IAAI,CAAC,MAAK;UAC1C,IAAIjC,eAAe,CAACE,WAAW,CAAClH,IAAI,KAAK,CAAC,EAAE;YAC1C7G,cAAc,CAAC0G,MAAM,CAACoH,qBAAqB,EAAE3I,OAAO,CAAC;YACrD+J,IAAI,GAAG,IAAI;UACb;QACF,CAAC,CAAC,CAAC;MACL;IACF,CAAC,EACD7P,MAAM,CAACyJ,KAAK,CAAC;MACX0F,KAAK,EAAG1M,CAAC,IAAKA,CAAC,CAACuL,IAAI,KAAK,kBAAkB;MAC3CrE,QAAQ,EAAE1I,QAAQ,CAACwH,MAAM,CAACxE,MAAM,CAACyE,yBAAyB;KAC3D,CAAC,EACF1I,MAAM,CAACqI,aAAa,CAAEC,KAAK,IAAKtI,MAAM,CAAC4J,QAAQ,CAAC,uCAAuC,EAAEtB,KAAK,CAAC,CAAC,EAChG,CAACoI,MAAM,EAAE5K,OAAO,KACd9F,MAAM,CAAC2I,YAAY,CAAC+H,MAAM,EAAE;MAC1B9H,OAAO,EAAE,iBAAiB;MAC1BC,MAAM,EAAE,UAAU;MAClBC,KAAK,EAAE,+BAA+B;MACtCC,MAAM,EAAEhC,WAAW;MACnB4J,MAAM,EAAE7K;KACT,CAAC,EACJ,CAAC4K,MAAM,EAAE5K,OAAO,KACd9F,MAAM,CAACyP,QAAQ,CACbiB,MAAM,EACN1Q,MAAM,CAACyQ,IAAI,CAAC,MAAM9P,cAAc,CAAC0G,MAAM,CAACoH,qBAAqB,EAAE3I,OAAO,CAAC,CAAC,CACzE,EACH9F,MAAM,CAACgJ,aAAa,EACpBhJ,MAAM,CAACyH,MAAM,CAAChD,aAAa,CAAC,CAC7B;EACH;EAEA;EAEA,MAAMmM,SAAS,GACbzD,OAAU,IASVnN,MAAM,CAACiJ,OAAO,CAAC,MAAK;IAClB,MAAMnD,OAAO,GAAGqH,OAAO,CAACC,QAAQ,CAACtH,OAAO;IACxC,IAAI,CAACe,qBAAqB,CAACf,OAAO,CAAC,EAAE;MACnC,OAAO9F,MAAM,CAACmQ,IAAI,CAAC,IAAIC,uCAAyB,CAAC;QAAEtK;MAAO,CAAE,CAAC,CAAC;IAChE;IACA,MAAMuE,KAAK,GAAGpF,cAAc,CAAC5B,GAAG,CAACyC,OAAO,CAACwH,UAAU,CAAC;IACpD,IAAI,CAACjD,KAAK,EAAE;MACV,OAAOrK,MAAM,CAACmQ,IAAI,CAAC,IAAI7B,sCAAwB,CAAC;QAAExI;MAAO,CAAE,CAAC,CAAC;IAC/D;IAEA,OAAOqH,OAAO,CAACa,IAAI,KAAK,iBAAiB,IAAIb,OAAO,CAACa,IAAI,KAAK,kBAAkB,GAC9E3D,KAAK,CAACC,OAAO,CAACwD,IAAI,CAACX,OAAO,CAAC,GAC3BhJ,OAAO,CAACyM,SAAS,CAAC;MAChBzD,OAAO;MACPW,IAAI,EAAEzD,KAAK,CAACC,OAAO,CAACsG,SAAS;MAC7BC,2BAA2B,EAAE5M,MAAM,CAAC4M;KACrC,CAAQ;EACb,CAAC,CAAC;EAEJ,MAAMC,WAAW,GAAGA,CAClB3D,OAAU,EACV1C,OAAgB,KAEhBzK,MAAM,CAACiJ,OAAO,CACZ,MAMI;IACF,MAAMnD,OAAO,GAAGqH,OAAO,CAACC,QAAQ,CAACtH,OAAO;IACxC,IAAI,CAACe,qBAAqB,CAACf,OAAO,CAAC,EAAE;MACnC,OAAO9F,MAAM,CAACmQ,IAAI,CAAC,IAAIC,uCAAyB,CAAC;QAAEtK;MAAO,CAAE,CAAC,CAAC;IAChE,CAAC,MAAM,IAAI,CAACb,cAAc,CAAC7B,GAAG,CAAC0C,OAAO,CAACwH,UAAU,CAAC,EAAE;MAClD,OAAOtN,MAAM,CAACmQ,IAAI,CAAC,IAAI7B,sCAAwB,CAAC;QAAExI;MAAO,CAAE,CAAC,CAAC;IAC/D;IAEA,MAAMiL,MAAM,GAAGlM,cAAc,GACzB4H,oBAAoB,GACpB,MAAMzM,MAAM,CAACwL,UAAU,CAAC,2CAA2C,CAAC;IAExE,IAAI2B,OAAO,CAACa,IAAI,KAAK,iBAAiB,IAAIb,OAAO,CAACa,IAAI,KAAK,kBAAkB,EAAE;MAC7E,IAAIb,OAAO,CAACa,IAAI,KAAK,iBAAiB,IAAInB,uBAAuB,CAACM,OAAO,CAAC,EAAE;QAC1E,OAAOnN,MAAM,CAACmQ,IAAI,CAAC,IAAIK,sCAAwB,CAAC;UAAE1K,OAAO;UAAEkL,UAAU,EAAE7D,OAAO,CAACC,QAAQ,CAACC;QAAS,CAAE,CAAC,CAAC;MACvG;MACA,OAAO0D,MAAM,EAAE;IACjB;IAEA,OAAO5M,OAAO,CAAC2M,WAAW,CAAC;MAAE3D,OAAO;MAAE4D,MAAM;MAAEtG;IAAO,CAAE,CAAQ;EACjE,CAAC,CACF;EAEH,MAAMwG,gBAAgB,GAAGlQ,SAAS,CAACmQ,EAAE,CAACC,+BAAiB,CAACC,EAAE,EAAEhB,uCAAyB,CAACgB,EAAE,CAAC;EACzF,SAASC,YAAYA,CACnBlE,OAA8B,EAC9B1C,OAAgB,EAChB6G,OAAgB;IAKhB,OAAOtR,MAAM,CAACuR,OAAO,CACnBvR,MAAM,CAACiJ,OAAO,CAAC,MAAK;MAClB,MAAMnD,OAAO,GAAGqH,OAAO,CAACC,QAAQ,CAACtH,OAAO;MACxC,MAAM0L,WAAW,GAAG7Q,cAAc,CAAC0C,GAAG,CAAC8B,gBAAgB,EAAEW,OAAO,CAACgB,OAAO,CAAC;MACzE,MAAM2K,WAAW,GAAG3R,OAAO,CAACuD,GAAG,CAAC8J,OAAO,CAACuE,GAAG,CAACC,WAAW,EAAEC,wBAAS,CAAC;MACnE,IAAIH,WAAW,IAAI,CAAC5M,cAAc,EAAE;QAClC,OAAO7E,MAAM,CAACwL,UAAU,CAAC,kEAAkE,CAAC;MAC9F;MACA,MAAMqG,aAAa,GAAG/Q,MAAM,CAACiF,MAAM,CAACyL,WAAW,CAAC,IAAI3L,aAAa,CAAC2L,WAAW,CAACtL,KAAK,CAAC;MACpF,IAAIuL,WAAW,EAAE;QACf,OAAOI,aAAa,GAChBf,WAAW,CAAC3D,OAAO,EAAE1C,OAAO,CAAC,GAC7BtG,OAAO,CAAC4M,MAAM,CAAC;UAAEjL,OAAO,EAAE0L,WAAW;UAAErE,OAAO;UAAE1C;QAAO,CAAE,CAAC;MAChE,CAAC,MAAM,IAAI3J,MAAM,CAACgO,MAAM,CAAC0C,WAAW,CAAC,EAAE;QACrC,OAAOxR,MAAM,CAACmQ,IAAI,CAAC,IAAIC,uCAAyB,CAAC;UAAEtK;QAAO,CAAE,CAAC,CAAC;MAChE;MACA,OAAO+L,aAAa,GAChBjB,SAAS,CAACzD,OAAO,CAAC,GAClBhJ,OAAO,CAAC2J,IAAI,CAAC;QAAEhI,OAAO,EAAE0L,WAAW,CAACtL,KAAK;QAAEiH;MAAO,CAAE,CAAC;IAC3D,CAAC,CAAC,EACF8D,gBAAgB,EACfrC,KAAK,IAAI;MACR,IAAI0C,OAAO,KAAK,CAAC,EAAE;QACjB,OAAOtR,MAAM,CAAC8R,GAAG,CAAClD,KAAK,CAAC;MAC1B;MACA,OAAO5O,MAAM,CAAC8J,KAAK,CAACuH,YAAY,CAAClE,OAAO,EAAE1C,OAAO,EAAE6G,OAAO,IAAIA,OAAO,GAAG,CAAC,CAAC,EAAErN,MAAM,CAACsM,iBAAiB,CAAC;IACvG,CAAC,CACF;EACH;EAEA,MAAMwB,KAAK,GAA8B/R,MAAM,CAACgL,UAAU,CACxD,WAAUqC,SAAS;IACjB,OAAOzI,OAAO,CAACoN,YAAY,CAAC3E,SAAS,CAAC;IACtCN,cAAc,CAACyC,MAAM,CAACnC,SAAS,CAAC;EAClC,CAAC,EACDrN,MAAM,CAACiS,UAAU,CAAC;IAChBC,SAAS,EAAEA,CAAA,KAAM,IAAI;IACrBC,SAAS,EAAEA,CAAA,KAAM;GAClB,CAAC,CACH;EAED;EAEA,MAAMC,wBAAwB,GAAG,OAAOhS,WAAW,CAAC2D,IAAI,EAAE,CAACqE,IAAI,CAC7DlH,KAAK,CAACmR,MAAM,CAAC5N,aAAa,CAAC,CAC5B;EACD,MAAM6N,wBAAwB,GAAGlS,WAAW,CAAC8K,GAAG,CAC9CkH,wBAAwB,EACxBpS,MAAM,CAACmJ,OAAO,CAACnJ,MAAM,CAACmI,KAAK,CAAClE,MAAM,CAACsO,8BAA8B,CAAC,EAAE,MAAK;IACvE5R,cAAc,CAACgK,KAAK,CAACxF,gBAAgB,CAAC;IACtC,OAAO0E,eAAe;EACxB,CAAC,CAAC,EACF;IAAE2I,aAAa,EAAE;EAAI,CAAE,CACxB;EACD,MAAMC,uBAAuB,GAAGrS,WAAW,CAACuK,KAAK,CAACyH,wBAAwB,CAAC;EAE3E;EACA;EACA,OAAOpS,MAAM,CAACgE,GAAG,CAAC,aAAS;IACzB,OAAOhE,MAAM,CAACmM,QAAQ,CAAC,gCAAgC,CAAC;IACxD,IAAIrL,MAAM,CAACiF,MAAM,CAAC9B,MAAM,CAAC+B,aAAa,CAAC,EAAE;MACvC,MAAM0M,SAAS,GAAG,OAAOrO,YAAY,CAACsO,QAAQ,CAAC1O,MAAM,CAAC+B,aAAa,CAACE,KAAK,EAAEjC,MAAM,CAAC2O,WAAW,CAAC;MAC9F,OAAOrO,YAAY,CAACsO,YAAY,CAACH,SAAS,CAAC;IAC7C;IAEA,OAAOD,uBAAuB;IAE9B,OAAOzS,MAAM,CAACmM,QAAQ,CAAC,gCAAgC,CAAC;IACxD,MAAM2G,OAAO,GAAG,OAAOzO,YAAY,CAAC0O,cAAc;IAClD,MAAMC,YAAY,GAAG,OAAOjT,QAAQ,CAACgE,IAAI,EAAQ;IAEjD,MAAMkP,WAAW,GAAG,OAAOjT,MAAM,CAACgE,GAAG,CAAC,aAAS;MAC7C,OAAO,IAAI,EAAE;QACX,MAAM,CAACyB,MAAM,CAAC,GAAG,OAAOqN,OAAO,CAACI,OAAO;QACvC,KAAK,MAAMC,KAAK,IAAI1N,MAAM,EAAE;UAC1B,OAAOzF,MAAM,CAACmM,QAAQ,CAAC,yBAAyB,EAAEgH,KAAK,CAAC;UAExD,QAAQA,KAAK,CAACnF,IAAI;YAChB,KAAK,eAAe;cAAE;gBACpB,OAAOjO,QAAQ,CAAC8P,IAAI,CAACmD,YAAY,EAAE9S,IAAI,CAACsJ,IAAI,CAAC;gBAC7C;cACF;YACA,KAAK,gBAAgB;cAAE;gBACrB,KAAK,MAAM4J,KAAK,IAAID,KAAK,CAACE,MAAM,EAAE;kBAChC1S,cAAc,CAAC2C,GAAG,CAAC6B,gBAAgB,EAAEiO,KAAK,EAAED,KAAK,CAACrN,OAAO,CAAC;gBAC5D;gBACA,IAAI,CAACjF,UAAU,CAACwC,GAAG,CAACsB,UAAU,CAAC,IAAIkB,aAAa,CAACsN,KAAK,CAACrN,OAAO,CAAC,EAAE;kBAC/D,KAAK,MAAMgB,OAAO,IAAIqM,KAAK,CAACE,MAAM,EAAE;oBAClC,IAAIzS,cAAc,CAACwC,GAAG,CAACiC,UAAU,EAAEyB,OAAO,CAAC,EAAE;oBAC7ClG,cAAc,CAAC0G,GAAG,CAACjC,UAAU,EAAEyB,OAAO,CAAC;kBACzC;kBACA,OAAOvB,iBAAiB,CAAC2C,IAAI;gBAC/B;gBACA;cACF;YACA,KAAK,kBAAkB;cAAE;gBACvB,KAAK,MAAMkL,KAAK,IAAID,KAAK,CAACE,MAAM,EAAE;kBAChC1S,cAAc,CAAC0G,MAAM,CAAClC,gBAAgB,EAAEiO,KAAK,CAAC;gBAChD;gBACA,IAAIvN,aAAa,CAACsN,KAAK,CAACrN,OAAO,CAAC,EAAE;kBAChC,KAAK,MAAMsN,KAAK,IAAID,KAAK,CAACE,MAAM,EAAE;oBAChCzS,cAAc,CAACyG,MAAM,CAAChC,UAAU,EAAE+N,KAAK,CAAC;kBAC1C;kBACA,OAAO7N,iBAAiB,CAAC2C,IAAI;gBAC/B;gBACA;cACF;UACF;QACF;MACF;IACF,CAAC,CAAC,CAACE,IAAI,CACLpI,MAAM,CAACsT,YAAY,CAACN,YAAY,CAAC,EACjChT,MAAM,CAACuT,UAAU,CAClB;IAED;IACA,OAAOxT,QAAQ,CAACqH,KAAK,CAAC4L,YAAY,CAAC;IAEnC;IACA,MAAMQ,SAAS,GAAG,OAAOC,eAAe,CAACrL,IAAI,CAC3CpI,MAAM,CAACuJ,OAAO,CAACvJ,MAAM,CAACmI,KAAK,CAAClE,MAAM,CAACyP,0BAA0B,CAAC,CAAC,EAC/D1T,MAAM,CAAC+J,OAAO,EACd/J,MAAM,CAACuT,UAAU,CAClB;IAED,OAAOpT,KAAK,CAACwT,OAAO,CAAC,CAACV,WAAW,EAAEO,SAAS,CAAC,CAAC;EAChD,CAAC,CAAC,CAACpL,IAAI,CACLpI,MAAM,CAAC8L,MAAM,EACb9L,MAAM,CAACqI,aAAa,CAAEC,KAAK,IAAKtI,MAAM,CAACmM,QAAQ,CAAC7D,KAAK,CAAC,CAAC,EACvDtI,MAAM,CAAC4T,QAAQ,CAACtB,wBAAwB,CAAC,EACzCtS,MAAM,CAACwI,MAAM,CACXvH,QAAQ,CAAC4S,WAAW,CAAC,IAAI,CAAC,CAACzL,IAAI,CAC7BnH,QAAQ,CAAC6S,KAAK,CAAC7S,QAAQ,CAACwH,MAAM,CAAC,MAAM,CAAC,CAAC,CACxC,CACF,EACDzI,MAAM,CAAC2I,YAAY,CAAC;IAClBC,OAAO,EAAE,iBAAiB;IAC1BC,MAAM,EAAE,UAAU;IAClBC,KAAK,EAAE,mBAAmB;IAC1BC,MAAM,EAAE9E,MAAM,CAAC+B;GAChB,CAAC,EACFhG,MAAM,CAACgJ,aAAa,EACpBhJ,MAAM,CAACyH,MAAM,CAAChD,aAAa,CAAC,CAC7B;EAED,MAAMgP,eAAe,GAAGzT,MAAM,CAACgE,GAAG,CAAC,aAAS;IAC1C,MAAM+P,WAAW,GAAG,OAAO1P,YAAY,CAAC2P,cAAc;IACtD,OAAOhU,MAAM,CAACmM,QAAQ,CAAC,4BAA4B,EAAE4H,WAAW,CAAC;IAEjE,KAAK,MAAM,CAACjN,OAAO,EAAEiC,MAAM,CAAC,IAAIgL,WAAW,EAAE;MAC3C,IAAIjT,MAAM,CAACgO,MAAM,CAAC/F,MAAM,CAAC,EAAE;QACzBpI,cAAc,CAAC0G,MAAM,CAAClC,gBAAgB,EAAE2B,OAAO,CAAC;QAChDlG,cAAc,CAACyG,MAAM,CAAChC,UAAU,EAAEyB,OAAO,CAAC;QAC1C;MACF;MAEAnG,cAAc,CAAC2C,GAAG,CAAC6B,gBAAgB,EAAE2B,OAAO,EAAEiC,MAAM,CAAC7C,KAAK,CAAC;MAE3D,IAAI,CAACL,aAAa,CAACkD,MAAM,CAAC7C,KAAK,CAAC,EAAE;QAChCtF,cAAc,CAACyG,MAAM,CAAChC,UAAU,EAAEyB,OAAO,CAAC;QAC1C;MACF;MACA,IAAIjG,UAAU,CAACwC,GAAG,CAACsB,UAAU,CAAC,IAAI/D,cAAc,CAACwC,GAAG,CAACiC,UAAU,EAAEyB,OAAO,CAAC,EAAE;QACzE;MACF;MACAlG,cAAc,CAAC0G,GAAG,CAACjC,UAAU,EAAEyB,OAAO,CAAC;IACzC;IAEA,OAAOvB,iBAAiB,CAAC2C,IAAI;EAC/B,CAAC,CAAC;EASF,MAAM+L,cAAc,GAAG,IAAI/O,GAAG,EAA2C;EAEzE,MAAMgP,OAAO,GAOT,OAAOC,wBAAW,CAACpQ,IAAI,CAAC/D,MAAM,CAACgL,UAAU,CAAC,WAAU2F,MAA2B;IACjF,MAAMyD,MAAM,GAAG,OAAO5U,SAAS,CAAC6U,mBAAmB,CAAC1D,MAAM,CAAC2D,QAAQ,EAAE;MACnEC,UAAU,EAAE,GAAG5D,MAAM,CAAC6D,IAAI,SAAS;MACnCC,WAAW,EAAE,IAAI;MACjBC,iBAAiB,EAAEA,CAAA,KAAM,IAAAC,qBAAS,EAACpQ,YAAY,CAAC6J,UAAU,EAAE,CAAC;MAC7DwG,OAAO,EAAE,IAAI;MACbC,YAAYA,CAAC1J,OAAO;QAIlB,MAAMrF,OAAO,GAAGhG,OAAO,CAACgV,SAAS,CAAC3J,OAAO,CAACM,OAAO,EAAEsJ,gBAAgB,CAAC;QACpE,QAAQ5J,OAAO,CAACgC,OAAO,CAACa,IAAI;UAC1B,KAAK,SAAS;YAAE;cACd,MAAMlF,KAAK,GAAGhI,MAAM,CAAC8O,UAAU,CAACzP,KAAK,CAAC6U,eAAe,EAAE,CAAC;cACxD,MAAM1O,EAAE,GAAG9D,SAAS,CAACA,SAAS,CAAC2I,OAAO,CAACgC,OAAO,CAAC7G,EAAE,CAAC;cAClD,MAAMoL,GAAG,GAAGf,MAAM,CAAC2D,QAAQ,CAACW,QAAQ,CAAC5R,GAAG,CAAC8H,OAAO,CAACgC,OAAO,CAAC+H,GAAG,CAAE;cAC9D,IAAIjH,OAAyD;cAC7D,IAAI,CAAC9C,OAAO,CAACV,OAAO,EAAE;gBACpB,MAAM0K,KAAK,GAAuB;kBAChCzD,GAAG,EAAEA,GAAU;kBACfjG,OAAO,EAAE3C,KAAK,CAACsM;iBAChB;gBACDnB,cAAc,CAAC3Q,GAAG,CAACgD,EAAE,EAAE6O,KAAK,CAAC;gBAC7BlH,OAAO,GAAGoH,iBAAiB,CAACF,KAAK,EAAEf,MAAM,CAACkB,KAAK,CAAC;cAClD,CAAC,MAAM;gBACLrH,OAAO,GAAGsH,oBAAoB;cAChC;cACA,OAAOlE,YAAY,CACjB,IAAIvP,OAAO,CAAC0T,eAAe,CAAC;gBAC1BpI,QAAQ,EAAE5L,QAAQ,CAACiU,WAAW,CAAC;kBAC7BpI,SAAS,EAAE/G,EAAE;kBACbR,OAAO;kBACPoP,GAAG,EAAE/J,OAAO,CAACgC,OAAO,CAAC+H,GAAG;kBACxBQ,OAAO,EAAEvK,OAAO,CAACgC,OAAO,CAACuI,OAAO;kBAChCC,OAAO,EAAExK,OAAO,CAACgC,OAAO,CAACwI,OAAO;kBAChCC,OAAO,EAAEzK,OAAO,CAACgC,OAAO,CAACyI,OAAO;kBAChCC,MAAM,EAAE1K,OAAO,CAACgC,OAAO,CAAC0I,MAAM;kBAC9BC,OAAO,EAAE3K,OAAO,CAACgC,OAAO,CAAC2I;iBAC1B,CAAC;gBACFC,iBAAiB,EAAEjV,MAAM,CAACkV,IAAI,EAAE;gBAChCtE,GAAG;gBACHjG,OAAO,EAAE3C,KAAK,CAACsM,cAAsC;gBACrDnH;eACD,CAAC,EACF9C,OAAO,CAACV,OAAO,CAChB;YACH;UACA,KAAK,KAAK;YAAE;cACV,MAAM4C,SAAS,GAAG7K,SAAS,CAACA,SAAS,CAAC2I,OAAO,CAACgC,OAAO,CAACE,SAAS,CAAC;cAChE,MAAM8H,KAAK,GAAGlB,cAAc,CAAC5Q,GAAG,CAACgK,SAAS,CAAC;cAC3C,IAAI,CAAC8H,KAAK,EAAE,OAAOnV,MAAM,CAACwJ,IAAI;cAC9B,OAAO6H,YAAY,CACjB,IAAIvP,OAAO,CAACmU,gBAAgB,CAAC;gBAC3B7I,QAAQ,EAAE,IAAI5L,QAAQ,CAAC0U,QAAQ,CAAC;kBAC9B5P,EAAE,EAAE/B,YAAY,CAAC6J,UAAU,EAAE;kBAC7BtI,OAAO;kBACPuH,SAAS;kBACT8I,OAAO,EAAEhB,KAAK,CAACiB;iBAChB,CAAC;gBACF1E,GAAG,EAAEyD,KAAK,CAACzD;eACZ,CAAC,EACF,KAAK,CACN;YACH;UACA,KAAK,WAAW;YAAE;cAChB,MAAMrE,SAAS,GAAG7K,SAAS,CAACA,SAAS,CAAC2I,OAAO,CAACgC,OAAO,CAACE,SAAS,CAAC;cAChE,MAAM8H,KAAK,GAAGlB,cAAc,CAAC5Q,GAAG,CAACgK,SAAS,CAAE;cAC5C,IAAI,CAAC8H,KAAK,EAAE,OAAOnV,MAAM,CAACwJ,IAAI;cAC9ByK,cAAc,CAACzE,MAAM,CAACnC,SAAS,CAAC;cAChC,IAAIvN,OAAO,CAACuD,GAAG,CAAC8R,KAAK,CAACzD,GAAG,CAACC,WAAW,EAAE0E,8BAAe,CAAC,EAAE;gBACvD,OAAOrW,MAAM,CAACwJ,IAAI;cACpB;cACA;cACA;cACA,MAAM8M,oBAAoB,GAAGzV,UAAU,CAACwC,GAAG,CAACsB,UAAU,CAAC,IACrDwG,OAAO,CAACgC,OAAO,CAACoJ,YAAY,CAACnN,IAAI,CAAE9C,EAAE,IAAKiG,kCAAoB,CAACnJ,GAAG,CAACkD,EAAE,CAAC,CAAC;cACzE,IAAIgQ,oBAAoB,IAAIxW,OAAO,CAACuD,GAAG,CAAC8R,KAAK,CAACzD,GAAG,CAACC,WAAW,EAAEC,wBAAS,CAAC,EAAE;gBACzE,OAAO5R,MAAM,CAACwJ,IAAI;cACpB;cACA,OAAOxJ,MAAM,CAACiH,MAAM,CAACoK,YAAY,CAC/B,IAAIvP,OAAO,CAACmU,gBAAgB,CAAC;gBAC3B7I,QAAQ,EAAE,IAAI5L,QAAQ,CAACgV,SAAS,CAAC;kBAC/BlQ,EAAE,EAAE/B,YAAY,CAAC6J,UAAU,EAAE;kBAC7BtI,OAAO;kBACPuH;iBACD,CAAC;gBACFqE,GAAG,EAAEyD,KAAK,CAACzD;eACZ,CAAC,EACF,KAAK,EACL,CAAC,CACF,CAAC;YACJ;QACF;QACA,OAAO1R,MAAM,CAACwJ,IAAI;MACpB;KACD,CAAC;IAEF,OAAOtI,KAAK,CAACgM,YAAY,CACvB,OAAOlN,MAAM,CAAC0E,KAAK,EACnB1E,MAAM,CAACyW,gBAAgB,CAAE3N,KAAK,IAAI;MAChCyD,kCAAoB,CAACjF,GAAG,CAACwB,KAAK,CAACxC,EAAE,EAAE,CAAC;MACpC,OAAOtG,MAAM,CAACwJ,IAAI;IACpB,CAAC,CAAC,CACH;IAED,OAAQpD,QAAgB,IAAI;MAC1B,MAAME,EAAE,GAAGgF,kBAAQ,CAACvH,IAAI,CAACqC,QAAQ,CAAC;MAClC,MAAMN,OAAO,GAAGiP,gBAAgB,CAACtJ,OAAO,CAACiL,4BAAa,CAAC3S,IAAI,CAAC;QAC1D+C,OAAO,EAAEX,UAAU,CAACG,EAAE,EAAEqK,MAAM,CAACgG,aAAa,CAACvQ,QAAoB,CAAC,CAAC;QACnEA,QAAQ,EAAEE,EAAE;QACZgH,UAAU,EAAEqD,MAAM,CAAC6D;OACpB,CAAC,CAAC;MACH,MAAMoC,QAAQ,GAAG,SAAAA,CAAS1B,GAAW,EAAEQ,OAAY,EAAEvK,OAEpD;QACC,MAAMM,OAAO,GAAGN,OAAO,EAAEM,OAAO,GAAG3L,OAAO,CAAC+W,KAAK,CAAC1L,OAAO,CAACM,OAAO,EAAE3F,OAAO,CAAC,GAAGA,OAAO;QACpF,OAAOsO,MAAM,CAACA,MAAM,CAACc,GAAG,EAAEQ,OAAO,EAAE;UACjC,GAAGvK,OAAO;UACVM;SACD,CAAC;MACJ,CAAC;MACD,MAAMqL,WAAW,GAAQ,EAAE;MAC3B,OAAO,IAAIC,KAAK,CAACD,WAAW,EAAE;QAC5B1T,GAAGA,CAACiG,CAAC,EAAE2N,CAAC;UACN,OAAOrG,MAAM,CAAC2D,QAAQ,CAACW,QAAQ,CAAC7R,GAAG,CAAC4T,CAAW,CAAC;QAClD,CAAC;QACD3T,GAAGA,CAAC4T,MAAM,EAAED,CAAC;UACX,IAAIA,CAAC,IAAIC,MAAM,EAAE;YACf,OAAOA,MAAM,CAACD,CAAC,CAAC;UAClB,CAAC,MAAM,IAAI,CAACrG,MAAM,CAAC2D,QAAQ,CAACW,QAAQ,CAAC7R,GAAG,CAAC4T,CAAW,CAAC,EAAE;YACrD,OAAOE,SAAS;UAClB;UACA,OAAOD,MAAM,CAACD,CAAC,CAAC,GAAG,CAACtB,OAAY,EAAEvK,OAAY,KAAKyL,QAAQ,CAACI,CAAW,EAAEtB,OAAO,EAAEvK,OAAO,CAAC;QAC5F;OACD,CAAC;IACJ,CAAC;EACH,CAAC,CAAC,CAAC;EAEH,MAAMgM,UAAU,GAA+CxG,MAA0B,IAIpFuD,OAAO,CAAC7Q,GAAG,CAACsN,MAAM,CAAQ;EAE/B,MAAM4E,oBAAoB,GAAI6B,MAAwB,IAAKpX,MAAM,CAACwJ,IAAI;EAEtE,MAAM6L,iBAAiB,GAAGA,CACxBF,KAAyB,EACzBG,KAAsD,KAEvD+B,KAAuB,IAAI;IAC1B,QAAQA,KAAK,CAACrJ,IAAI;MAChB,KAAK,OAAO;QAAE;UACZmH,KAAK,CAACiB,WAAW,GAAGiB,KAAK,CAAC/Q,EAAE;UAC5B,OAAOgP,KAAK,CAAC;YACXtH,IAAI,EAAE,OAAO;YACbsJ,QAAQ,EAAE,CAAC;YACXjK,SAAS,EAAE,IAAAsH,qBAAS,EAAC0C,KAAK,CAAChK,SAAS,CAAC;YACrCjD,MAAM,EAAEiN,KAAK,CAACjN;WACf,CAAC;QACJ;MACA,KAAK,UAAU;QAAE;UACf6J,cAAc,CAACzE,MAAM,CAAC6H,KAAK,CAAChK,SAAS,CAAC;UACtC,OAAOiI,KAAK,CAAC;YACXtH,IAAI,EAAE,MAAM;YACZsJ,QAAQ,EAAE,CAAC;YACXjK,SAAS,EAAE,IAAAsH,qBAAS,EAAC0C,KAAK,CAAChK,SAAS,CAAC;YACrCkK,IAAI,EAAEF,KAAK,CAACE;WACb,CAAC;QACJ;IACF;EACF,CAAC;EAED;EAEA,MAAM9L,OAAO,GAAG,OAAOzL,MAAM,CAACyL,OAAO,EAAkB;EACvD,MAAM+L,MAAM,GAAG,OAAOC,0BAAY;EAClC,MAAMC,cAAc,GAAuC1X,MAAM,CAACgL,UAAU,CAC1E,WAAU2F,MAAM,EAAEgH,KAAK,EAAExM,OAAO;IAC9B,IAAIrK,MAAM,CAACgO,MAAM,CAAC7K,MAAM,CAAC+B,aAAa,CAAC,IAAIf,cAAc,CAAC7B,GAAG,CAACuN,MAAM,CAAC6D,IAAI,CAAC,EAAE;IAC5E,MAAM9P,KAAK,GAAG,OAAOxD,KAAK,CAAC6C,IAAI,EAAE;IACjC,MAAMuG,OAAO,GAAG,OAAO7I,aAAa,CAACsC,IAAI,CAAC4M,MAAM,EAAEgH,KAAK,EAAE;MACvD,GAAGxM,OAAO;MACVvG,OAAO;MACPoB,aAAa,EAAE/B,MAAM,CAAC+B,aAAa,CAACE,KAAK;MACzC0R;KACD,CAAC,CAACxP,IAAI,CACLpI,MAAM,CAAC+L,OAAO,CAACN,OAAO,CAACrD,IAAI,CACzBtI,OAAO,CAACwH,GAAG,CAACmQ,0BAAY,EAAED,MAAM,CAAC,EACjC1X,OAAO,CAACwH,GAAG,CAACpG,KAAK,CAACA,KAAK,EAAEwD,KAAK,CAAC,EAC/B5E,OAAO,CAACwH,GAAG,CAAC9E,SAAS,CAACgC,SAAS,EAAED,YAAY,CAAC,CAC/C,CAAC,CAC2C;IAC/CU,cAAc,CAAC3B,GAAG,CAACqN,MAAM,CAAC6D,IAAI,EAAE;MAC9B7D,MAAM;MACNjM,KAAK;MACL4F;KACD,CAAC;IAEF,OAAOpJ,KAAK,CAACgM,YAAY,CAACxI,KAAK,EAAE1E,MAAM,CAACyQ,IAAI,CAAC,MAAMxL,cAAc,CAACuK,MAAM,CAACmB,MAAM,CAAC6D,IAAI,CAAC,CAAC,CAAC;IACvF,OAAOxT,MAAM,CAACiL,OAAO,CAACxG,MAAM,EAAE,IAAAoS,2CAAgB,EAAC;MAAElH;IAAM,CAAE,CAAC,CAAC;EAC7D,CAAC,CACF;EAED,OAAOzP,KAAK,CAAC8F,gBAAgB,CAC3BvC,aAAa,EACZ8S,IAAI,IACHvX,MAAM,CAACmK,OAAO,CACZlF,cAAc,CAACmF,MAAM,EAAE,EACtBC,KAAK,IACJrK,MAAM,CAACqI,aAAa,CAACnH,KAAK,CAAC0G,KAAK,CAACyC,KAAK,CAAC3F,KAAK,EAAE6S,IAAI,CAAC,EAAGjP,KAAK,IACzDtI,MAAM,CAAC2I,YAAY,CAAC3I,MAAM,CAAC4J,QAAQ,CAAC,8BAA8B,EAAEtB,KAAK,CAAC,EAAE;IAC1EqI,MAAM,EAAEtG,KAAK,CAACsG,MAAM,CAAC6D;GACtB,CAAC,CAAC,EACP;IAAEhK,WAAW,EAAE,WAAW;IAAEC,OAAO,EAAE;EAAI,CAAE,CAC5C,CACJ;EAED;EAEA,IAAI3J,MAAM,CAACiF,MAAM,CAAC9B,MAAM,CAAC+B,aAAa,CAAC,EAAE;IACvC,MAAMe,WAAW,GAAG9C,MAAM,CAAC+B,aAAa,CAACE,KAAK;IAC9C;IACA,OAAOhF,KAAK,CAACgM,YAAY,CACvBzI,aAAa,EACbzE,MAAM,CAACgE,GAAG,CAAC,aAAS;MAClB,OAAOhE,MAAM,CAACmM,QAAQ,CAAC,yCAAyC,EAAEpF,WAAW,CAAC;MAC9E,OAAO1C,YAAY,CAACyT,UAAU,CAAC/Q,WAAW,CAAC,CAACqB,IAAI,CAC9CpI,MAAM,CAACqI,aAAa,CAAEC,KAAK,IAAKtI,MAAM,CAAC4J,QAAQ,CAAC,6CAA6C,EAAEtB,KAAK,CAAC,CAAC,CACvG;MACD,OAAOuB,eAAe;IACxB,CAAC,CAAC,CACH;EACH;EAEA,OAAO3I,KAAK,CAACgM,YAAY,CACvBzI,aAAa,EACbzE,MAAM,CAACyW,gBAAgB,CAAE3N,KAAK,IAAI;IAChCjI,UAAU,CAACyC,GAAG,CAACqB,UAAU,EAAE,IAAI,CAAC;IAChC4H,kCAAoB,CAACjF,GAAG,CAACwB,KAAK,CAACxC,EAAE,EAAE,CAAC;IACpC,OAAOtG,MAAM,CAACwJ,IAAI;EACpB,CAAC,CAAC,CACH;EAED,MAAMuO,iBAAiB,GAAG/X,MAAM,CAACgE,GAAG,CAAC,aAAS;IAC5C,IAAIgU,KAAK,GAAG,CAAC;IACb,KAAK,MAAM3N,KAAK,IAAIpF,cAAc,CAACmF,MAAM,EAAE,EAAE;MAC3C4N,KAAK,IAAI,OAAO3N,KAAK,CAACC,OAAO,CAACyN,iBAAiB;IACjD;IACA,OAAOC,KAAK;EACd,CAAC,CAAC;EAEF,MAAMJ,QAAQ,GAAGhU,QAAQ,CAACqU,EAAE,CAAC;IAC3BtS,qBAAqB;IACrBQ,UAAU;IACVxB,UAAU,EAAE3E,MAAM,CAACyQ,IAAI,CAAC,MAAM5P,UAAU,CAACwC,GAAG,CAACsB,UAAU,CAAC,CAAC;IACzD+S,cAAc;IACd3M,iBAAiB;IACjBoM,UAAU;IACVrJ,IAAI,EAAE8C,SAAS;IACfS,YAAY,EAAEA,CAAClE,OAAO,EAAE1C,OAAO,KAAK4G,YAAY,CAAClE,OAAO,EAAE1C,OAAO,CAAC;IAClEsG,MAAM,EAAG5D,OAAO,IAAK2D,WAAW,CAAC3D,OAAO,EAAE,KAAK,CAAC;IAChD4K,iBAAiB;IACjBG,WAAW,EAAEjQ,gBAAgB,CAACC,IAAI;IAClC6J;GACD,CAAC;EAEF,OAAO6F,QAAQ;AACjB,CAAC,CAAC;AAEF;;;;AAIO,MAAMO,KAAK,GAAArU,OAAA,CAAAqU,KAAA,gBAIdzX,KAAK,CAACoL,MAAM,CAAClI,QAAQ,EAAEG,IAAI,CAAC,CAACqE,IAAI,cACnC1H,KAAK,CAACqL,OAAO,CAAC,CAACvJ,SAAS,CAAC4V,cAAc,EAAEX,0BAAY,CAACY,OAAO,CAAC,CAAC,CAChE;AAED;AAEA,MAAMtD,gBAAgB,gBAAGjV,OAAO,CAACwY,UAAU,CAAgB,wCAAwC,CAAC","ignoreList":[]}