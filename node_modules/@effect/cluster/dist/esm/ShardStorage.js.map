{"version":3,"file":"ShardStorage.js","names":["Arr","Context","Effect","Layer","MutableHashMap","Option","Runner","RunnerAddress","ShardId","ShardStorage","Tag","makeEncoded","encoded","of","getAssignments","map","assignments","arr","empty","shardId","runnerAddress","push","fromString","none","some","decodeRunnerAddress","saveAssignments","toString","isNone","encodeRunnerAddress","value","getRunners","gen","runners","results","i","length","address","runner","decodeSync","saveRunners","suspend","Array","from","encodeSync","acquire","shardIds","id","pipe","shards","refresh","release","releaseAll","layerNoop","sync","acquired","void","_address","succeed","makeMemory","set","layerMemory","effect","host","port","split","Number"],"sources":["../../src/ShardStorage.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}