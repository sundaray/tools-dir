{"version":3,"file":"fileSystem.js","names":["Channel","_interopRequireWildcard","require","Chunk","_Context","Effect","_Function","Layer","Option","Sink","Stream","Error","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","tag","exports","GenericTag","Size","bytes","BigInt","KiB","MiB","GiB","TiB","bigint1024","bigintPiB","PiB","make","impl","of","exists","path","pipe","access","as","catchTag","reason","succeed","fail","readFileString","encoding","tryMap","readFile","try","_","TextDecoder","decode","catch","cause","BadArgument","module","method","description","stream","options","open","flag","offset","tap","file","seek","identity","map","unwrapScoped","sink","forEach","writeAll","writeFileString","data","flatMap","TextEncoder","encode","writeFile","notFound","SystemError","pathOrDescriptor","makeNoop","fileSystem","chmod","chown","copy","copyFile","link","makeDirectory","die","makeTempDirectory","makeTempDirectoryScoped","makeTempFile","makeTempFileScoped","readDirectory","readLink","realPath","remove","void","rename","oldPath","stat","symlink","fromPath","truncate","utimes","watch","layerNoop","bufferSize","bytesToRead","bytesToRead_","chunkSize","chunkSize_","undefined","loop","totalBytesRead","toRead","readAlloc","match","onNone","onSome","buf","write","length","bufferChunks","fromChannel","capacity"],"sources":["../../../src/internal/fileSystem.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}