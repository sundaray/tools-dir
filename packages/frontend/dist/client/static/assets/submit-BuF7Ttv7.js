import{R as te,r as Un,j as ae,c as zg,a as Zi,g as Nu,I as xu,B as Gg}from"../entry-client.js";var es=e=>e.type==="checkbox",cn=e=>e instanceof Date,Be=e=>e==null;const Cf=e=>typeof e=="object";var ye=e=>!Be(e)&&!Array.isArray(e)&&Cf(e)&&!cn(e),$f=e=>ye(e)&&e.target?es(e.target)?e.target.checked:e.target.value:e,Yg=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Mf=(e,t)=>e.has(Yg(t)),Xg=e=>{const t=e.constructor&&e.constructor.prototype;return ye(t)&&t.hasOwnProperty("isPrototypeOf")},Qc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Oe(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Qc&&(e instanceof Blob||r))&&(n||ye(e)))if(t=n?[]:{},!n&&!Xg(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Oe(e[s]));else return e;return t}var xo=e=>/^\w*$/.test(e),ge=e=>e===void 0,Zc=e=>Array.isArray(e)?e.filter(Boolean):[],ea=e=>Zc(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,t,n)=>{if(!t||!ye(e))return n;const r=(xo(t)?[t]:ea(t)).reduce((s,o)=>Be(s)?s:s[o],e);return ge(r)||r===e?ge(e[t])?n:e[t]:r},nt=e=>typeof e=="boolean",ce=(e,t,n)=>{let r=-1;const s=xo(t)?[t]:ea(t),o=s.length,i=o-1;for(;++r<o;){const c=s[r];let a=n;if(r!==i){const u=e[c];a=ye(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=a,e=e[c]}};const eo={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_t={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},jt={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Pf=te.createContext(null);Pf.displayName="HookFormContext";const ta=()=>te.useContext(Pf);var Lf=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const i=o;return t._proxyFormState[i]!==_t.all&&(t._proxyFormState[i]=!r||_t.all),n&&(n[i]=!0),e[i]}});return s};const na=typeof window<"u"?te.useLayoutEffect:te.useEffect;function Qg(e){const t=ta(),{control:n=t.control,disabled:r,name:s,exact:o}=e||{},[i,c]=te.useState(n._formState),a=te.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return na(()=>n._subscribe({name:s,formState:a.current,exact:o,callback:u=>{!r&&c({...n._formState,...u})}}),[s,r,o]),te.useEffect(()=>{a.current.isValid&&n._setValid(!0)},[n]),te.useMemo(()=>Lf(i,n,a.current,!1),[i,n])}var xt=e=>typeof e=="string",Df=(e,t,n,r,s)=>xt(e)?(r&&t.watch.add(e),A(n,e,s)):Array.isArray(e)?e.map(o=>(r&&t.watch.add(o),A(n,o))):(r&&(t.watchAll=!0),n),ec=e=>Be(e)||!Cf(e);function Bt(e,t,n=new WeakSet){if(ec(e)||ec(t))return e===t;if(cn(e)&&cn(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of r){const i=e[o];if(!s.includes(o))return!1;if(o!=="ref"){const c=t[o];if(cn(i)&&cn(c)||ye(i)&&ye(c)||Array.isArray(i)&&Array.isArray(c)?!Bt(i,c,n):i!==c)return!1}}return!0}function Zg(e){const t=ta(),{control:n=t.control,name:r,defaultValue:s,disabled:o,exact:i,compute:c}=e||{},a=te.useRef(s),u=te.useRef(c),l=te.useRef(void 0);u.current=c;const f=te.useMemo(()=>n._getWatch(r,a.current),[n,r]),[h,b]=te.useState(u.current?u.current(f):f);return na(()=>n._subscribe({name:r,formState:{values:!0},exact:i,callback:p=>{if(!o){const S=Df(r,n._names,p.values||n._formValues,!1,a.current);if(u.current){const y=u.current(S);Bt(y,l.current)||(b(y),l.current=y)}else b(S)}}}),[n,o,r,i]),te.useEffect(()=>n._removeUnmounted()),h}function ey(e){const t=ta(),{name:n,disabled:r,control:s=t.control,shouldUnregister:o,defaultValue:i}=e,c=Mf(s._names.array,n),a=te.useMemo(()=>A(s._formValues,n,A(s._defaultValues,n,i)),[s,n,i]),u=Zg({control:s,name:n,defaultValue:a,exact:!0}),l=Qg({control:s,name:n,exact:!0}),f=te.useRef(e),h=te.useRef(s.register(n,{...e.rules,value:u,...nt(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const b=te.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!A(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!A(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!A(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!A(l.validatingFields,n)},error:{enumerable:!0,get:()=>A(l.errors,n)}}),[l,n]),p=te.useCallback(k=>h.current.onChange({target:{value:$f(k),name:n},type:eo.CHANGE}),[n]),S=te.useCallback(()=>h.current.onBlur({target:{value:A(s._formValues,n),name:n},type:eo.BLUR}),[n,s._formValues]),y=te.useCallback(k=>{const T=A(s._fields,n);T&&k&&(T._f.ref={focus:()=>k.focus&&k.focus(),select:()=>k.select&&k.select(),setCustomValidity:F=>k.setCustomValidity(F),reportValidity:()=>k.reportValidity()})},[s._fields,n]),O=te.useMemo(()=>({name:n,value:u,...nt(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:p,onBlur:S,ref:y}),[n,r,l.disabled,p,S,y,u]);return te.useEffect(()=>{const k=s._options.shouldUnregister||o;s.register(n,{...f.current.rules,...nt(f.current.disabled)?{disabled:f.current.disabled}:{}});const T=(F,I)=>{const x=A(s._fields,F);x&&x._f&&(x._f.mount=I)};if(T(n,!0),k){const F=Oe(A(s._options.defaultValues,n));ce(s._defaultValues,n,F),ge(A(s._formValues,n))&&ce(s._formValues,n,F)}return!c&&s.register(n),()=>{(c?k&&!s._state.action:k)?s.unregister(n):T(n,!1)}},[n,s,c,o]),te.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),te.useMemo(()=>({field:O,formState:l,fieldState:b}),[O,l,b])}const Cu=e=>e.render(ey(e));var jf=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Lr=e=>Array.isArray(e)?e:[e],$u=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}},ze=e=>ye(e)&&!Object.keys(e).length,ra=e=>e.type==="file",St=e=>typeof e=="function",to=e=>{if(!Qc)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Uf=e=>e.type==="select-multiple",sa=e=>e.type==="radio",ty=e=>sa(e)||es(e),Ii=e=>to(e)&&e.isConnected;function ny(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=ge(e)?r++:e[t[r++]];return e}function ry(e){for(const t in e)if(e.hasOwnProperty(t)&&!ge(e[t]))return!1;return!0}function Se(e,t){const n=Array.isArray(t)?t:xo(t)?[t]:ea(t),r=n.length===1?e:ny(e,n),s=n.length-1,o=n[s];return r&&delete r[o],s!==0&&(ye(r)&&ze(r)||Array.isArray(r)&&ry(r))&&Se(e,n.slice(0,-1)),e}var Vf=e=>{for(const t in e)if(St(e[t]))return!0;return!1};function no(e,t={}){const n=Array.isArray(e);if(ye(e)||n)for(const r in e)Array.isArray(e[r])||ye(e[r])&&!Vf(e[r])?(t[r]=Array.isArray(e[r])?[]:{},no(e[r],t[r])):Be(e[r])||(t[r]=!0);return t}function Bf(e,t,n){const r=Array.isArray(e);if(ye(e)||r)for(const s in e)Array.isArray(e[s])||ye(e[s])&&!Vf(e[s])?ge(t)||ec(n[s])?n[s]=Array.isArray(e[s])?no(e[s],[]):{...no(e[s])}:Bf(e[s],Be(t)?{}:t[s],n[s]):n[s]=!Bt(e[s],t[s]);return n}var vr=(e,t)=>Bf(e,t,no(t));const Mu={value:!1,isValid:!1},Pu={value:!0,isValid:!0};var qf=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ge(e[0].attributes.value)?ge(e[0].value)||e[0].value===""?Pu:{value:e[0].value,isValid:!0}:Pu:Mu}return Mu},Kf=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>ge(e)?e:t?e===""?NaN:e&&+e:n&&xt(e)?new Date(e):r?r(e):e;const Lu={isValid:!1,value:null};var Jf=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,Lu):Lu;function Du(e){const t=e.ref;return ra(t)?t.files:sa(t)?Jf(e.refs).value:Uf(t)?[...t.selectedOptions].map(({value:n})=>n):es(t)?qf(e.refs).value:Kf(ge(t.value)?e.ref.value:t.value,e)}var sy=(e,t,n,r)=>{const s={};for(const o of e){const i=A(t,o);i&&ce(s,o,i._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},ro=e=>e instanceof RegExp,Tr=e=>ge(e)?e:ro(e)?e.source:ye(e)?ro(e.value)?e.value.source:e.value:e,ju=e=>({isOnSubmit:!e||e===_t.onSubmit,isOnBlur:e===_t.onBlur,isOnChange:e===_t.onChange,isOnAll:e===_t.all,isOnTouch:e===_t.onTouched});const Uu="AsyncFunction";var oy=e=>!!e&&!!e.validate&&!!(St(e.validate)&&e.validate.constructor.name===Uu||ye(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Uu)),iy=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Vu=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Dr=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const o=A(e,s);if(o){const{_f:i,...c}=o;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],s)&&!r)return!0;if(i.ref&&t(i.ref,i.name)&&!r)return!0;if(Dr(c,t))break}else if(ye(c)&&Dr(c,t))break}}};function Bu(e,t,n){const r=A(e,n);if(r||xo(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const o=s.join("."),i=A(t,o),c=A(e,o);if(i&&!Array.isArray(i)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};if(c&&c.root&&c.root.type)return{name:`${o}.root`,error:c.root};s.pop()}return{name:n}}var cy=(e,t,n,r)=>{n(e);const{name:s,...o}=e;return ze(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(i=>t[i]===(!r||_t.all))},ay=(e,t,n)=>!e||!t||e===t||Lr(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),uy=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,ly=(e,t)=>!Zc(A(e,t)).length&&Se(e,t),fy=(e,t,n)=>{const r=Lr(A(e,n));return ce(r,"root",t[n]),ce(e,n,r),e},Ls=e=>xt(e);function qu(e,t,n="validate"){if(Ls(e)||Array.isArray(e)&&e.every(Ls)||nt(e)&&!e)return{type:n,message:Ls(e)?e:"",ref:t}}var xn=e=>ye(e)&&!ro(e)?e:{value:e,message:""},Ku=async(e,t,n,r,s,o)=>{const{ref:i,refs:c,required:a,maxLength:u,minLength:l,min:f,max:h,pattern:b,validate:p,name:S,valueAsNumber:y,mount:O}=e._f,k=A(n,S);if(!O||t.has(S))return{};const T=c?c[0]:i,F=C=>{s&&T.reportValidity&&(T.setCustomValidity(nt(C)?"":C||""),T.reportValidity())},I={},x=sa(i),M=es(i),$=x||M,U=(y||ra(i))&&ge(i.value)&&ge(k)||to(i)&&i.value===""||k===""||Array.isArray(k)&&!k.length,Y=jf.bind(null,S,r,I),D=(C,K,ee,fe=jt.maxLength,se=jt.minLength)=>{const oe=C?K:ee;I[S]={type:C?fe:se,message:oe,ref:i,...Y(C?fe:se,oe)}};if(o?!Array.isArray(k)||!k.length:a&&(!$&&(U||Be(k))||nt(k)&&!k||M&&!qf(c).isValid||x&&!Jf(c).isValid)){const{value:C,message:K}=Ls(a)?{value:!!a,message:a}:xn(a);if(C&&(I[S]={type:jt.required,message:K,ref:T,...Y(jt.required,K)},!r))return F(K),I}if(!U&&(!Be(f)||!Be(h))){let C,K;const ee=xn(h),fe=xn(f);if(!Be(k)&&!isNaN(k)){const se=i.valueAsNumber||k&&+k;Be(ee.value)||(C=se>ee.value),Be(fe.value)||(K=se<fe.value)}else{const se=i.valueAsDate||new Date(k),oe=Nn=>new Date(new Date().toDateString()+" "+Nn),Ue=i.type=="time",ct=i.type=="week";xt(ee.value)&&k&&(C=Ue?oe(k)>oe(ee.value):ct?k>ee.value:se>new Date(ee.value)),xt(fe.value)&&k&&(K=Ue?oe(k)<oe(fe.value):ct?k<fe.value:se<new Date(fe.value))}if((C||K)&&(D(!!C,ee.message,fe.message,jt.max,jt.min),!r))return F(I[S].message),I}if((u||l)&&!U&&(xt(k)||o&&Array.isArray(k))){const C=xn(u),K=xn(l),ee=!Be(C.value)&&k.length>+C.value,fe=!Be(K.value)&&k.length<+K.value;if((ee||fe)&&(D(ee,C.message,K.message),!r))return F(I[S].message),I}if(b&&!U&&xt(k)){const{value:C,message:K}=xn(b);if(ro(C)&&!k.match(C)&&(I[S]={type:jt.pattern,message:K,ref:i,...Y(jt.pattern,K)},!r))return F(K),I}if(p){if(St(p)){const C=await p(k,n),K=qu(C,T);if(K&&(I[S]={...K,...Y(jt.validate,K.message)},!r))return F(K.message),I}else if(ye(p)){let C={};for(const K in p){if(!ze(C)&&!r)break;const ee=qu(await p[K](k,n),T,K);ee&&(C={...ee,...Y(K,ee.message)},F(ee.message),r&&(I[S]=C))}if(!ze(C)&&(I[S]={ref:T,...C},!r))return I}}return F(!0),I};const dy={mode:_t.onSubmit,reValidateMode:_t.onChange,shouldFocusError:!0};function hy(e={}){let t={...dy,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:St(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=ye(t.defaultValues)||ye(t.values)?Oe(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:Oe(s),i={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},a,u=0;const l={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...l};const h={array:$u(),state:$u()},b=t.criteriaMode===_t.all,p=d=>g=>{clearTimeout(u),u=setTimeout(d,g)},S=async d=>{if(!t.disabled&&(l.isValid||f.isValid||d)){const g=t.resolver?ze((await M()).errors):await U(r,!0);g!==n.isValid&&h.state.next({isValid:g})}},y=(d,g)=>{!t.disabled&&(l.isValidating||l.validatingFields||f.isValidating||f.validatingFields)&&((d||Array.from(c.mount)).forEach(w=>{w&&(g?ce(n.validatingFields,w,g):Se(n.validatingFields,w))}),h.state.next({validatingFields:n.validatingFields,isValidating:!ze(n.validatingFields)}))},O=(d,g=[],w,N,R=!0,v=!0)=>{if(N&&w&&!t.disabled){if(i.action=!0,v&&Array.isArray(A(r,d))){const P=w(A(r,d),N.argA,N.argB);R&&ce(r,d,P)}if(v&&Array.isArray(A(n.errors,d))){const P=w(A(n.errors,d),N.argA,N.argB);R&&ce(n.errors,d,P),ly(n.errors,d)}if((l.touchedFields||f.touchedFields)&&v&&Array.isArray(A(n.touchedFields,d))){const P=w(A(n.touchedFields,d),N.argA,N.argB);R&&ce(n.touchedFields,d,P)}(l.dirtyFields||f.dirtyFields)&&(n.dirtyFields=vr(s,o)),h.state.next({name:d,isDirty:D(d,g),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ce(o,d,g)},k=(d,g)=>{ce(n.errors,d,g),h.state.next({errors:n.errors})},T=d=>{n.errors=d,h.state.next({errors:n.errors,isValid:!1})},F=(d,g,w,N)=>{const R=A(r,d);if(R){const v=A(o,d,ge(w)?A(s,d):w);ge(v)||N&&N.defaultChecked||g?ce(o,d,g?v:Du(R._f)):ee(d,v),i.mount&&S()}},I=(d,g,w,N,R)=>{let v=!1,P=!1;const ie={name:d};if(!t.disabled){if(!w||N){(l.isDirty||f.isDirty)&&(P=n.isDirty,n.isDirty=ie.isDirty=D(),v=P!==ie.isDirty);const ue=Bt(A(s,d),g);P=!!A(n.dirtyFields,d),ue?Se(n.dirtyFields,d):ce(n.dirtyFields,d,!0),ie.dirtyFields=n.dirtyFields,v=v||(l.dirtyFields||f.dirtyFields)&&P!==!ue}if(w){const ue=A(n.touchedFields,d);ue||(ce(n.touchedFields,d,w),ie.touchedFields=n.touchedFields,v=v||(l.touchedFields||f.touchedFields)&&ue!==w)}v&&R&&h.state.next(ie)}return v?ie:{}},x=(d,g,w,N)=>{const R=A(n.errors,d),v=(l.isValid||f.isValid)&&nt(g)&&n.isValid!==g;if(t.delayError&&w?(a=p(()=>k(d,w)),a(t.delayError)):(clearTimeout(u),a=null,w?ce(n.errors,d,w):Se(n.errors,d)),(w?!Bt(R,w):R)||!ze(N)||v){const P={...N,...v&&nt(g)?{isValid:g}:{},errors:n.errors,name:d};n={...n,...P},h.state.next(P)}},M=async d=>{y(d,!0);const g=await t.resolver(o,t.context,sy(d||c.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return y(d),g},$=async d=>{const{errors:g}=await M(d);if(d)for(const w of d){const N=A(g,w);N?ce(n.errors,w,N):Se(n.errors,w)}else n.errors=g;return g},U=async(d,g,w={valid:!0})=>{for(const N in d){const R=d[N];if(R){const{_f:v,...P}=R;if(v){const ie=c.array.has(v.name),ue=R._f&&oy(R._f);ue&&l.validatingFields&&y([N],!0);const at=await Ku(R,c.disabled,o,b,t.shouldUseNativeValidation&&!g,ie);if(ue&&l.validatingFields&&y([N]),at[v.name]&&(w.valid=!1,g))break;!g&&(A(at,v.name)?ie?fy(n.errors,at,v.name):ce(n.errors,v.name,at[v.name]):Se(n.errors,v.name))}!ze(P)&&await U(P,g,w)}}return w.valid},Y=()=>{for(const d of c.unMount){const g=A(r,d);g&&(g._f.refs?g._f.refs.every(w=>!Ii(w)):!Ii(g._f.ref))&&vi(d)}c.unMount=new Set},D=(d,g)=>!t.disabled&&(d&&g&&ce(o,d,g),!Bt(Nn(),s)),C=(d,g,w)=>Df(d,c,{...i.mount?o:ge(g)?s:xt(d)?{[d]:g}:g},w,g),K=d=>Zc(A(i.mount?o:s,d,t.shouldUnregister?A(s,d,[]):[])),ee=(d,g,w={})=>{const N=A(r,d);let R=g;if(N){const v=N._f;v&&(!v.disabled&&ce(o,d,Kf(g,v)),R=to(v.ref)&&Be(g)?"":g,Uf(v.ref)?[...v.ref.options].forEach(P=>P.selected=R.includes(P.value)):v.refs?es(v.ref)?v.refs.forEach(P=>{(!P.defaultChecked||!P.disabled)&&(Array.isArray(R)?P.checked=!!R.find(ie=>ie===P.value):P.checked=R===P.value||!!R)}):v.refs.forEach(P=>P.checked=P.value===R):ra(v.ref)?v.ref.value="":(v.ref.value=R,v.ref.type||h.state.next({name:d,values:Oe(o)})))}(w.shouldDirty||w.shouldTouch)&&I(d,R,w.shouldTouch,w.shouldDirty,!0),w.shouldValidate&&ct(d)},fe=(d,g,w)=>{for(const N in g){if(!g.hasOwnProperty(N))return;const R=g[N],v=d+"."+N,P=A(r,v);(c.array.has(d)||ye(R)||P&&!P._f)&&!cn(R)?fe(v,R,w):ee(v,R,w)}},se=(d,g,w={})=>{const N=A(r,d),R=c.array.has(d),v=Oe(g);ce(o,d,v),R?(h.array.next({name:d,values:Oe(o)}),(l.isDirty||l.dirtyFields||f.isDirty||f.dirtyFields)&&w.shouldDirty&&h.state.next({name:d,dirtyFields:vr(s,o),isDirty:D(d,v)})):N&&!N._f&&!Be(v)?fe(d,v,w):ee(d,v,w),Vu(d,c)&&h.state.next({...n,name:d}),h.state.next({name:i.mount?d:void 0,values:Oe(o)})},oe=async d=>{i.mount=!0;const g=d.target;let w=g.name,N=!0;const R=A(r,w),v=ue=>{N=Number.isNaN(ue)||cn(ue)&&isNaN(ue.getTime())||Bt(ue,A(o,w,ue))},P=ju(t.mode),ie=ju(t.reValidateMode);if(R){let ue,at;const As=g.type?Du(R._f):$f(d),Gt=d.type===eo.BLUR||d.type===eo.FOCUS_OUT,Jg=!iy(R._f)&&!t.resolver&&!A(n.errors,w)&&!R._f.deps||uy(Gt,A(n.touchedFields,w),n.isSubmitted,ie,P),Ai=Vu(w,c,Gt);ce(o,w,As),Gt?(R._f.onBlur&&R._f.onBlur(d),a&&a(0)):R._f.onChange&&R._f.onChange(d);const Fi=I(w,As,Gt),Hg=!ze(Fi)||Ai;if(!Gt&&h.state.next({name:w,type:d.type,values:Oe(o)}),Jg)return(l.isValid||f.isValid)&&(t.mode==="onBlur"?Gt&&S():Gt||S()),Hg&&h.state.next({name:w,...Ai?{}:Fi});if(!Gt&&Ai&&h.state.next({...n}),t.resolver){const{errors:Fu}=await M([w]);if(v(As),N){const Wg=Bu(n.errors,r,w),Iu=Bu(Fu,r,Wg.name||w);ue=Iu.error,w=Iu.name,at=ze(Fu)}}else y([w],!0),ue=(await Ku(R,c.disabled,o,b,t.shouldUseNativeValidation))[w],y([w]),v(As),N&&(ue?at=!1:(l.isValid||f.isValid)&&(at=await U(r,!0)));N&&(R._f.deps&&ct(R._f.deps),x(w,at,ue,Fi))}},Ue=(d,g)=>{if(A(n.errors,g)&&d.focus)return d.focus(),1},ct=async(d,g={})=>{let w,N;const R=Lr(d);if(t.resolver){const v=await $(ge(d)?d:R);w=ze(v),N=d?!R.some(P=>A(v,P)):w}else d?(N=(await Promise.all(R.map(async v=>{const P=A(r,v);return await U(P&&P._f?{[v]:P}:P)}))).every(Boolean),!(!N&&!n.isValid)&&S()):N=w=await U(r);return h.state.next({...!xt(d)||(l.isValid||f.isValid)&&w!==n.isValid?{}:{name:d},...t.resolver||!d?{isValid:w}:{},errors:n.errors}),g.shouldFocus&&!N&&Dr(r,Ue,d?R:c.mount),N},Nn=d=>{const g={...i.mount?o:s};return ge(d)?g:xt(d)?A(g,d):d.map(w=>A(g,w))},zt=(d,g)=>({invalid:!!A((g||n).errors,d),isDirty:!!A((g||n).dirtyFields,d),error:A((g||n).errors,d),isValidating:!!A(n.validatingFields,d),isTouched:!!A((g||n).touchedFields,d)}),Dg=d=>{d&&Lr(d).forEach(g=>Se(n.errors,g)),h.state.next({errors:d?n.errors:{}})},Eu=(d,g,w)=>{const N=(A(r,d,{_f:{}})._f||{}).ref,R=A(n.errors,d)||{},{ref:v,message:P,type:ie,...ue}=R;ce(n.errors,d,{...ue,...g,ref:N}),h.state.next({name:d,errors:n.errors,isValid:!1}),w&&w.shouldFocus&&N&&N.focus&&N.focus()},jg=(d,g)=>St(d)?h.state.subscribe({next:w=>"values"in w&&d(C(void 0,g),w)}):C(d,g,!0),ku=d=>h.state.subscribe({next:g=>{ay(d.name,g.name,d.exact)&&cy(g,d.formState||l,Kg,d.reRenderRoot)&&d.callback({values:{...o},...n,...g,defaultValues:s})}}).unsubscribe,Ug=d=>(i.mount=!0,f={...f,...d.formState},ku({...d,formState:f})),vi=(d,g={})=>{for(const w of d?Lr(d):c.mount)c.mount.delete(w),c.array.delete(w),g.keepValue||(Se(r,w),Se(o,w)),!g.keepError&&Se(n.errors,w),!g.keepDirty&&Se(n.dirtyFields,w),!g.keepTouched&&Se(n.touchedFields,w),!g.keepIsValidating&&Se(n.validatingFields,w),!t.shouldUnregister&&!g.keepDefaultValue&&Se(s,w);h.state.next({values:Oe(o)}),h.state.next({...n,...g.keepDirty?{isDirty:D()}:{}}),!g.keepIsValid&&S()},Ou=({disabled:d,name:g})=>{(nt(d)&&i.mount||d||c.disabled.has(g))&&(d?c.disabled.add(g):c.disabled.delete(g))},Ti=(d,g={})=>{let w=A(r,d);const N=nt(g.disabled)||nt(t.disabled);return ce(r,d,{...w||{},_f:{...w&&w._f?w._f:{ref:{name:d}},name:d,mount:!0,...g}}),c.mount.add(d),w?Ou({disabled:nt(g.disabled)?g.disabled:t.disabled,name:d}):F(d,!0,g.value),{...N?{disabled:g.disabled||t.disabled}:{},...t.progressive?{required:!!g.required,min:Tr(g.min),max:Tr(g.max),minLength:Tr(g.minLength),maxLength:Tr(g.maxLength),pattern:Tr(g.pattern)}:{},name:d,onChange:oe,onBlur:oe,ref:R=>{if(R){Ti(d,g),w=A(r,d);const v=ge(R.value)&&R.querySelectorAll&&R.querySelectorAll("input,select,textarea")[0]||R,P=ty(v),ie=w._f.refs||[];if(P?ie.find(ue=>ue===v):v===w._f.ref)return;ce(r,d,{_f:{...w._f,...P?{refs:[...ie.filter(Ii),v,...Array.isArray(A(s,d))?[{}]:[]],ref:{type:v.type,name:d}}:{ref:v}}}),F(d,!1,void 0,v)}else w=A(r,d,{}),w._f&&(w._f.mount=!1),(t.shouldUnregister||g.shouldUnregister)&&!(Mf(c.array,d)&&i.action)&&c.unMount.add(d)}}},Ri=()=>t.shouldFocusError&&Dr(r,Ue,c.mount),Vg=d=>{nt(d)&&(h.state.next({disabled:d}),Dr(r,(g,w)=>{const N=A(r,w);N&&(g.disabled=N._f.disabled||d,Array.isArray(N._f.refs)&&N._f.refs.forEach(R=>{R.disabled=N._f.disabled||d}))},0,!1))},vu=(d,g)=>async w=>{let N;w&&(w.preventDefault&&w.preventDefault(),w.persist&&w.persist());let R=Oe(o);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:v,values:P}=await M();n.errors=v,R=Oe(P)}else await U(r);if(c.disabled.size)for(const v of c.disabled)Se(R,v);if(Se(n.errors,"root"),ze(n.errors)){h.state.next({errors:{}});try{await d(R,w)}catch(v){N=v}}else g&&await g({...n.errors},w),Ri(),setTimeout(Ri);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ze(n.errors)&&!N,submitCount:n.submitCount+1,errors:n.errors}),N)throw N},Bg=(d,g={})=>{A(r,d)&&(ge(g.defaultValue)?se(d,Oe(A(s,d))):(se(d,g.defaultValue),ce(s,d,Oe(g.defaultValue))),g.keepTouched||Se(n.touchedFields,d),g.keepDirty||(Se(n.dirtyFields,d),n.isDirty=g.defaultValue?D(d,Oe(A(s,d))):D()),g.keepError||(Se(n.errors,d),l.isValid&&S()),h.state.next({...n}))},Tu=(d,g={})=>{const w=d?Oe(d):s,N=Oe(w),R=ze(d),v=R?s:N;if(g.keepDefaultValues||(s=w),!g.keepValues){if(g.keepDirtyValues){const P=new Set([...c.mount,...Object.keys(vr(s,o))]);for(const ie of Array.from(P))A(n.dirtyFields,ie)?ce(v,ie,A(o,ie)):se(ie,A(v,ie))}else{if(Qc&&ge(d))for(const P of c.mount){const ie=A(r,P);if(ie&&ie._f){const ue=Array.isArray(ie._f.refs)?ie._f.refs[0]:ie._f.ref;if(to(ue)){const at=ue.closest("form");if(at){at.reset();break}}}}if(g.keepFieldsRef)for(const P of c.mount)se(P,A(v,P));else r={}}o=t.shouldUnregister?g.keepDefaultValues?Oe(s):{}:Oe(v),h.array.next({values:{...v}}),h.state.next({values:{...v}})}c={mount:g.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!l.isValid||!!g.keepIsValid||!!g.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:g.keepSubmitCount?n.submitCount:0,isDirty:R?!1:g.keepDirty?n.isDirty:!!(g.keepDefaultValues&&!Bt(d,s)),isSubmitted:g.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:R?{}:g.keepDirtyValues?g.keepDefaultValues&&o?vr(s,o):n.dirtyFields:g.keepDefaultValues&&d?vr(s,d):g.keepDirty?n.dirtyFields:{},touchedFields:g.keepTouched?n.touchedFields:{},errors:g.keepErrors?n.errors:{},isSubmitSuccessful:g.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ru=(d,g)=>Tu(St(d)?d(o):d,g),qg=(d,g={})=>{const w=A(r,d),N=w&&w._f;if(N){const R=N.refs?N.refs[0]:N.ref;R.focus&&(R.focus(),g.shouldSelect&&St(R.select)&&R.select())}},Kg=d=>{n={...n,...d}},Au={control:{register:Ti,unregister:vi,getFieldState:zt,handleSubmit:vu,setError:Eu,_subscribe:ku,_runSchema:M,_focusError:Ri,_getWatch:C,_getDirty:D,_setValid:S,_setFieldArray:O,_setDisabledField:Ou,_setErrors:T,_getFieldArray:K,_reset:Tu,_resetDefaultValues:()=>St(t.defaultValues)&&t.defaultValues().then(d=>{Ru(d,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:Y,_disableForm:Vg,_subjects:h,_proxyFormState:l,get _fields(){return r},get _formValues(){return o},get _state(){return i},set _state(d){i=d},get _defaultValues(){return s},get _names(){return c},set _names(d){c=d},get _formState(){return n},get _options(){return t},set _options(d){t={...t,...d}}},subscribe:Ug,trigger:ct,register:Ti,handleSubmit:vu,watch:jg,setValue:se,getValues:Nn,reset:Ru,resetField:Bg,clearErrors:Dg,unregister:vi,setError:Eu,setFocus:qg,getFieldState:zt};return{...Au,formControl:Au}}function py(e={}){const t=te.useRef(void 0),n=te.useRef(void 0),[r,s]=te.useState({isDirty:!1,isValidating:!1,isLoading:St(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:St(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!St(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...c}=hy(e);t.current={...c,formState:r}}const o=t.current.control;return o._options=e,na(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0});return s(c=>({...c,isReady:!0})),o._formState.isReady=!0,i},[o]),te.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),te.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),te.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),te.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),te.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==r.isDirty&&o._subjects.state.next({isDirty:i})}},[o,r.isDirty]),te.useEffect(()=>{e.values&&!Bt(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=e.values,s(i=>({...i}))):o._resetDefaultValues()},[o,e.values]),te.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=Lf(r,o),t.current}const Ju=(e,t,n)=>{if(e&&"reportValidity"in e){const r=A(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},Hf=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?Ju(r.ref,n,e):r&&r.refs&&r.refs.forEach(s=>Ju(s,n,e))}},my=(e,t)=>{t.shouldUseNativeValidation&&Hf(e,t);const n={};for(const r in e){const s=A(t.fields,r),o=Object.assign(e[r]||{},{ref:s&&s.ref});if(gy(t.names||Object.keys(e),r)){const i=Object.assign({},A(n,r));ce(i,"root",o),ce(n,r,i)}else ce(n,r,o)}return n},gy=(e,t)=>{const n=Hu(t);return e.some(r=>Hu(r).match(`^${n}\\.\\d+`))};function Hu(e){return e.replace(/\]|\[/g,"")}const yy=e=>typeof e=="function",m=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,r){return arguments.length>=2?t(n,r):function(s){return t(s,n)}};case 3:return function(n,r,s){return arguments.length>=3?t(n,r,s):function(o){return t(o,n,r)}};case 4:return function(n,r,s,o){return arguments.length>=4?t(n,r,s,o):function(i){return t(i,n,r,s)}};case 5:return function(n,r,s,o,i){return arguments.length>=5?t(n,r,s,o,i):function(c){return t(c,n,r,s,o)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(r){return t(r,...n)}}}},ke=e=>e,Co=e=>()=>e,Wu=Co(!0),tc=Co(!1),Wf=Co(void 0),by=Wf;function E(e,t,n,r,s,o,i,c,a){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return s(r(n(t(e))));case 6:return o(s(r(n(t(e)))));case 7:return i(o(s(r(n(t(e))))));case 8:return c(i(o(s(r(n(t(e)))))));case 9:return a(c(i(o(s(r(n(t(e))))))));default:{let u=arguments[0];for(let l=1;l<arguments.length;l++)u=arguments[l](u);return u}}}const oa=e=>(t,n)=>t===n||e(t,n),_y=m(2,(e,t)=>oa((n,r)=>e(t(n),t(r)))),Sy=e=>oa((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}),zu="effect/GlobalValue";let Rr;const ne=(e,t)=>(Rr||(globalThis[zu]??=new Map,Rr=globalThis[zu]),Rr.has(e)||Rr.set(e,t()),Rr.get(e)),Pt=e=>typeof e=="string",bn=e=>typeof e=="number",$o=e=>typeof e=="boolean",Mo=e=>typeof e=="bigint",nc=e=>typeof e=="symbol",ts=yy,wy=e=>e===void 0,Ey=e=>!1,ia=e=>typeof e=="object"&&e!==null,Rn=e=>ia(e)||ts(e),G=m(2,(e,t)=>Rn(e)&&t in e),zf=m(2,(e,t)=>G(e,"_tag")&&e._tag===t),Cn=e=>e==null,ky=e=>e!=null,Oy=e=>e instanceof Date,Gf=e=>G(e,Symbol.iterator),vy=e=>ia(e)&&!Array.isArray(e),Ty=e=>G(e,"then")&&ts(e.then),Po=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let Yf=class Xf{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new Xf(this.self)}};const Ry=335903614,Ay=4150755663,Fy=1481765933,Iy=1284865837,Ny=9007199254740992,xy=134217728;class Cy{_state;constructor(t,n,r,s){return Cn(n)&&Cn(t)?(n=Math.random()*4294967295>>>0,t=0):Cn(n)&&(n=t,t=0),Cn(s)&&Cn(r)?(s=this._state?this._state[3]:Ay,r=this._state?this._state[2]:Ry):Cn(s)&&(s=r,r=0),this._state=new Int32Array([0,0,r>>>0,((s||0)|1)>>>0]),this._next(),Gu(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*xy+n)/Ny}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;$y(this._state,t,n,Fy,Iy),Gu(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,s=(n>>>18|t<<14)>>>0;r=(r^t)>>>0,s=(s^n)>>>0;const o=(s>>>27|r<<5)>>>0,i=t>>>27,c=(-i>>>0&31)>>>0;return(o>>>i|o<<c)>>>0}}function $y(e,t,n,r,s){let o=(n>>>16)*(s&65535)>>>0,i=(n&65535)*(s>>>16)>>>0,c=(n&65535)*(s&65535)>>>0,a=(n>>>16)*(s>>>16)+((i>>>16)+(o>>>16))>>>0;i=i<<16>>>0,c=c+i>>>0,c>>>0<i>>>0&&(a=a+1>>>0),o=o<<16>>>0,c=c+o>>>0,c>>>0<o>>>0&&(a=a+1>>>0),a=a+Math.imul(n,r)>>>0,a=a+Math.imul(t,s)>>>0,e[0]=a,e[1]=c}function Gu(e,t,n,r,s){let o=t+r>>>0;const i=n+s>>>0;i>>>0<n>>>0&&(o=o+1|0),e[0]=o,e[1]=i}const rc=Symbol.for("effect/Utils/YieldWrap");class ns{#e;constructor(t){this.#e=t}[rc](){return this.#e}}function My(e){if(typeof e=="object"&&e!==null&&rc in e)return e[rc]();throw new Error(Po("yieldWrapGet"))}const lt=ne("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),Qf={effect_internal_function:e=>e()},Py={effect_internal_function:e=>{try{return e()}finally{}}},Ly=Qf.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,Je=Ly?Qf.effect_internal_function:Py.effect_internal_function,Ni=ne(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),X=Symbol.for("effect/Hash"),L=e=>{if(lt.enabled===!0)return 0;switch(typeof e){case"number":return aa(e);case"bigint":return we(e.toString(10));case"boolean":return we(String(e));case"symbol":return we(String(e));case"string":return we(e);case"undefined":return we("undefined");case"function":case"object":return e===null?we("null"):e instanceof Date?L(e.toISOString()):e instanceof URL?L(e.href):Dy(e)?e[X]():ca(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},ca=e=>(Ni.has(e)||Ni.set(e,aa(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Ni.get(e)),re=e=>t=>t*53^e,Lo=e=>e&3221225471|e>>>1&1073741824,Dy=e=>G(e,X),aa=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return Lo(t)},we=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return Lo(t)},jy=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=E(we(t[r]),re(L(e[t[r]])));return Lo(n)},Zf=e=>jy(e,Object.keys(e)),rs=e=>{let t=6151;for(let n=0;n<e.length;n++)t=E(t,re(L(e[n])));return Lo(t)},pe=function(){if(arguments.length===1){const n=arguments[0];return function(r){return Object.defineProperty(n,X,{value(){return r},enumerable:!1}),r}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,X,{value(){return t},enumerable:!1}),t},W=Symbol.for("effect/Equal");function z(){return arguments.length===1?e=>so(e,arguments[0]):so(arguments[0],arguments[1])}function so(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(oo(e)&&oo(t))return L(e)===L(t)&&e[W](t)?!0:lt.enabled&&lt.tester?lt.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString();if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(lt.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,s)=>so(r,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),s=Object.keys(t);if(r.length===s.length){for(const o of r)if(!(o in t&&so(e[o],t[o])))return lt.tester?lt.tester(e,t):!1;return!0}}return lt.tester?lt.tester(e,t):!1}}return lt.enabled&&lt.tester?lt.tester(e,t):!1}const oo=e=>G(e,W),ua=()=>z,he=Symbol.for("nodejs.util.inspect.custom"),Ae=e=>{try{if(G(e,"toJSON")&&ts(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(Ae)}catch{return{}}return Vy(e)},Ne=e=>JSON.stringify(e,null,2),Wn=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?ed(e,t):String(e)}catch{return String(e)}},ed=(e,t)=>{let n=[];const r=JSON.stringify(e,(s,o)=>typeof o=="object"&&o!==null?n.includes(o)?void 0:n.push(o)&&(dn.fiberRefs!==void 0&&td(o)?o[la](dn.fiberRefs):o):o,t);return n=void 0,r},la=Symbol.for("effect/Inspectable/Redactable"),td=e=>typeof e=="object"&&e!==null&&la in e,dn=ne("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),Uy=(e,t)=>{const n=dn.fiberRefs;dn.fiberRefs=e;try{return t()}finally{dn.fiberRefs=n}},Vy=e=>td(e)&&dn.fiberRefs!==void 0?e[la](dn.fiberRefs):e,q=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let r=0,s=t.length;r<s;r++)n=t[r](n);return n}}},jr="Async",Do="Commit",pt="Failure",xi="OnFailure",io="OnSuccess",co="OnSuccessAndFailure",mt="Success",nd="Sync",By="Tag",ss="UpdateRuntimeFlags",ao="While",Ds="Iterator",rd="WithRuntime",js="Yield",fa="RevertFlags";let qy="3.17.1";const da=()=>qy,Ky=Symbol.for("effect/Effect"),Jy=Symbol.for("effect/Stream"),Hy=Symbol.for("effect/Sink"),Wy=Symbol.for("effect/Channel"),zn={_R:e=>e,_E:e=>e,_A:e=>e,_V:da()},zy={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},Gy={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},os={[Ky]:zn,[Jy]:zn,[Hy]:zy,[Wy]:Gy,[W](e){return this===e},[X](){return pe(this,ca(this))},[Symbol.iterator](){return new Yf(new ns(this))},pipe(){return q(this,arguments)}},ha={[X](){return pe(this,Zf(this))},[W](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r of t)if(!(r in e&&z(this[r],e[r])))return!1;return!0}},is={...os,_op:Do},Yy={...is,...ha},Xy=function(){function e(){}return e.prototype=is,e}(),sd=Symbol.for("effect/Option"),od={...os,[sd]:{_A:e=>e},[he](){return this.toJSON()},toString(){return Ne(this.toJSON())}},Qy=Object.assign(Object.create(od),{_tag:"Some",_op:"Some",[W](e){return id(e)&&ad(e)&&z(this.value,e.value)},[X](){return pe(this,re(L(this._tag))(L(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Ae(this.value)}}}),Zy=L("None"),eb=Object.assign(Object.create(od),{_tag:"None",_op:"None",[W](e){return id(e)&&cd(e)},[X](){return Zy},toJSON(){return{_id:"Option",_tag:this._tag}}}),id=e=>G(e,sd),cd=e=>e._tag==="None",ad=e=>e._tag==="Some",ud=Object.create(eb),sc=e=>{const t=Object.create(Qy);return t.value=e,t},ld=Symbol.for("effect/Either"),fd={...os,[ld]:{_R:e=>e},[he](){return this.toJSON()},toString(){return Ne(this.toJSON())}},tb=Object.assign(Object.create(fd),{_tag:"Right",_op:"Right",[W](e){return pa(e)&&hd(e)&&z(this.right,e.right)},[X](){return re(L(this._tag))(L(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Ae(this.right)}}}),nb=Object.assign(Object.create(fd),{_tag:"Left",_op:"Left",[W](e){return pa(e)&&dd(e)&&z(this.left,e.left)},[X](){return re(L(this._tag))(L(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Ae(this.left)}}}),pa=e=>G(e,ld),dd=e=>e._tag==="Left",hd=e=>e._tag==="Right",rb=e=>{const t=Object.create(nb);return t.left=e,t},sb=e=>{const t=Object.create(tb);return t.right=e,t},Z=sb,Q=rb,ob=pa,$e=dd,Kt=hd,ib=m(2,(e,t)=>$e(e)?Q(t(e.left)):Z(e.right)),cb=m(2,(e,t)=>Kt(e)?Z(t(e.right)):Q(e.left)),ma=m(2,(e,{onLeft:t,onRight:n})=>$e(e)?t(e.left):n(e.right)),ab=ma({onLeft:ke,onRight:ke}),pd=m(2,(e,t)=>{if(Kt(e))return e.right;throw t(e.left)}),md=pd(()=>new Error("getOrThrow called on a Left")),gd=e=>e.length>0,yd=e=>(t,n)=>t===n?0:e(t,n),ub=yd((e,t)=>e<t?-1:1),bd=m(2,(e,t)=>yd((n,r)=>e(t(n),t(r)))),lb=e=>m(2,(t,n)=>e(t,n)===1),j=()=>ud,H=sc,Ie=cd,Me=ad,st=m(2,(e,{onNone:t,onSome:n})=>Ie(e)?t():n(e.value)),xe=m(2,(e,t)=>Ie(e)?t():e.value),Zt=m(2,(e,t)=>Ie(e)?t():e),fb=m(2,(e,t)=>Ie(e)?H(t()):e),jo=e=>e==null?j():H(e),It=xe(Wf),db=e=>(...t)=>{try{return H(e(...t))}catch{return j()}},_d=m(2,(e,t)=>Ie(e)?j():H(t(e.value))),Uo=m(2,(e,t)=>Ie(e)?j():t(e.value)),hb=m(2,(e,t)=>Ie(e)?j():jo(t(e.value))),pb=e=>m(2,(t,n)=>Ie(t)?!1:e(t.value,n)),mb=ua(),gb=pb(mb),yb=m(2,(e,t)=>Ie(e)?!1:t(e.value)),bb=(...e)=>e,Vo=e=>new Array(e),_b=m(2,(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let s=0;s<n;s++)r[s]=t(s);return r}),be=e=>Array.isArray(e)?e:Array.from(e),Sb=e=>Array.isArray(e)?e:[e],wb=m(2,(e,{onEmpty:t,onNonEmpty:n})=>Fe(e)?n(He(e),_n(e)):t()),uo=m(2,(e,t)=>[t,...e]),Eb=m(2,(e,t)=>[...e,t]),Sd=m(2,(e,t)=>be(e).concat(be(t))),kb=Array.isArray,Ob=e=>e.length===0,vb=Ob,Us=gd,Fe=gd,wd=(e,t)=>e<0||e>=t.length,Tb=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),Rb=m(2,(e,t)=>{const n=Math.floor(t);return wd(n,e)?j():H(e[n])}),Ed=m(2,(e,t)=>{const n=Math.floor(t);if(wd(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),Ur=Rb(0),He=Ed(0),Ab=e=>Fe(e)?H(kd(e)):j(),kd=e=>e[e.length-1],_n=e=>e.slice(1),Fb=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},Ib=m(2,(e,t)=>$b(e,Fb(e,t))),Nb=m(2,(e,t)=>{const n=be(e);return n.slice(Tb(t,n),n.length)}),Yu=e=>Array.from(e).reverse(),Kr=m(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),Xu=m(2,(e,t)=>xb(e,t,bb)),xb=m(3,(e,t,n)=>{const r=be(e),s=be(t);if(Fe(r)&&Fe(s)){const o=[n(He(r),He(s))],i=Math.min(r.length,s.length);for(let c=1;c<i;c++)o[c]=n(r[c],s[c]);return o}return[]}),Cb=ua(),$b=m(2,(e,t)=>{const n=Array.from(e),r=Math.floor(t);return Fe(n)?r>=1?Mb(n,r):[[],n]:[n,[]]}),Mb=m(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[Mr(e),[]]:[uo(e.slice(1,n),He(e)),e.slice(n)]}),Mr=e=>e.slice(),Pb=m(3,(e,t,n)=>{const r=be(e),s=be(t);return Fe(r)?Fe(s)?Rd(n)(Sd(r,s)):r:s}),Vs=m(2,(e,t)=>Pb(e,t,Cb)),Gn=()=>[],yt=e=>[e],Bn=m(2,(e,t)=>e.map(t)),Od=m(2,(e,t)=>{if(vb(e))return[];const n=[];for(let r=0;r<e.length;r++){const s=t(e[r],r);for(let o=0;o<s.length;o++)n.push(s[o])}return n}),vd=Od(ke),Lb=m(2,(e,t)=>{const n=be(e),r=[];for(let s=0;s<n.length;s++){const o=t(n[s],s);Me(o)&&r.push(o.value)}return r}),Td=m(3,(e,t,n)=>be(e).reduce((r,s,o)=>n(r,s,o),t)),Qu=(e,t)=>{const n=[];let r=e,s;for(;Me(s=t(r));){const[o,i]=s.value;n.push(o),r=i}return n},ga=Sy,Rd=m(2,(e,t)=>{const n=be(e);if(Fe(n)){const r=[He(n)],s=_n(n);for(const o of s)r.every(i=>!t(o,i))&&r.push(o);return r}return[]}),Db=e=>Rd(e,ua()),pr=m(2,(e,t)=>be(e).join(t)),Ad=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Ad(e,t.from)}},qn=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),Fd=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},jb=e=>{try{return e.toISOString()}catch{return String(e)}},Ct=(e,t=!0)=>{if(Array.isArray(e))return`[${e.map(n=>Ct(n,t)).join(",")}]`;if(Oy(e))return jb(e);if(G(e,"toString")&&ts(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();if(Pt(e))return JSON.stringify(e);if(bn(e)||e==null||$o(e)||nc(e))return String(e);if(Mo(e))return String(e)+"n";if(Gf(e))return`${e.constructor.name}(${Ct(Array.from(e),t)})`;try{t&&JSON.stringify(e);const n=`{${qn(e).map(s=>`${Pt(s)?JSON.stringify(s):String(s)}:${Ct(e[s],!1)}`).join(",")}}`,r=e.constructor.name;return e.constructor!==Object.prototype.constructor?`${r}(${n})`:n}catch{return"<circular structure>"}},Ub=e=>typeof e=="string"?JSON.stringify(e):String(e),ya=e=>Array.isArray(e),Vb=e=>!Array.isArray(e),Zu=e=>`[${Ub(e)}]`,Bb=e=>ya(e)?e.map(Zu).join(""):Zu(e),An=(e,t,n,r)=>{let s=e;return t!==void 0&&(s+=`
details: ${t}`),r&&(s+=`
schema (${r._tag}): ${r}`),s},qb=e=>An("Unsupported key schema",void 0,void 0,e),Kb=e=>An("Unsupported literal",`literal value: ${Ct(e)}`),el=e=>An("Duplicate index signature",`${e} index signature`),Jb=An("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),Hb=An("Invalid element","A required element cannot follow an optional element. ts(1257)"),tl=e=>An("Duplicate property signature transformation",`Duplicate key ${Ct(e)}`),Wb=e=>An("Duplicate property signature",`Duplicate key ${Ct(e)}`),zb=Symbol.for("effect/SchemaId/MinLength"),Yn=ub,lo=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),Gb=Symbol.for("effect/annotation/Brand"),Yb=Symbol.for("effect/annotation/SchemaId"),Id=Symbol.for("effect/annotation/Message"),ba=Symbol.for("effect/annotation/MissingMessage"),Nd=Symbol.for("effect/annotation/Identifier"),mr=Symbol.for("effect/annotation/Title"),oc=Symbol.for("effect/annotation/AutoTitle"),_a=Symbol.for("effect/annotation/Description"),xd=Symbol.for("effect/annotation/Examples"),Cd=Symbol.for("effect/annotation/Default"),$d=Symbol.for("effect/annotation/JSONSchema"),Md=Symbol.for("effect/annotation/Arbitrary"),Pd=Symbol.for("effect/annotation/Pretty"),Ld=Symbol.for("effect/annotation/Equivalence"),Xb=Symbol.for("effect/annotation/Documentation"),Dd=Symbol.for("effect/annotation/Concurrency"),jd=Symbol.for("effect/annotation/Batching"),Ud=Symbol.for("effect/annotation/ParseIssueTitle"),Vd=Symbol.for("effect/annotation/ParseOptions"),Bd=Symbol.for("effect/annotation/DecodingFallback"),qd=Symbol.for("effect/annotation/Surrogate"),Qb=Symbol.for("effect/annotation/StableFilter"),We=m(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?H(e.annotations[t]):j()),Zb=We(Gb),e_=We(Id),t_=We(ba),Kd=We(mr),Jd=We(oc),Bo=We(Nd),Hd=We(_a),n_=We(Dd),r_=We(jd),s_=We(Ud),o_=We(Vd),i_=We(Bd),Wd=We(qd),c_=We(Qb),a_=e=>yb(c_(e),t=>t===!0),zd=Symbol.for("effect/annotation/JSONIdentifier"),u_=We(zd),l_=e=>Zt(u_(e),()=>Bo(e));class Gd{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(t,n,r,s={}){this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=r,this.annotations=s}toString(){return xe(Lt(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:je(this.annotations)}}}const cs=e=>t=>t._tag===e;class f_{literal;annotations;_tag="Literal";constructor(t,n={}){this.literal=t,this.annotations=n}toString(){return xe(Lt(this),()=>Ct(this.literal))}toJSON(){return{_tag:this._tag,literal:Mo(this.literal)?String(this.literal):this.literal,annotations:je(this.annotations)}}}const nl=cs("Literal");class d_{symbol;annotations;_tag="UniqueSymbol";constructor(t,n={}){this.symbol=t,this.annotations=n}toString(){return xe(Lt(this),()=>Ct(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:je(this.annotations)}}}class h_{annotations;_tag="NeverKeyword";constructor(t={}){this.annotations=t}toString(){return Ko(this)}toJSON(){return{_tag:this._tag,annotations:je(this.annotations)}}}const p_=new h_({[mr]:"never"});class m_{annotations;_tag="UnknownKeyword";constructor(t={}){this.annotations=t}toString(){return Ko(this)}toJSON(){return{_tag:this._tag,annotations:je(this.annotations)}}}const g_=new m_({[mr]:"unknown"});class y_{annotations;_tag="AnyKeyword";constructor(t={}){this.annotations=t}toString(){return Ko(this)}toJSON(){return{_tag:this._tag,annotations:je(this.annotations)}}}const b_=new y_({[mr]:"any"});class __{annotations;_tag="StringKeyword";constructor(t={}){this.annotations=t}toString(){return Ko(this)}toJSON(){return{_tag:this._tag,annotations:je(this.annotations)}}}const S_=new __({[mr]:"string",[_a]:"a string"}),w_=cs("StringKeyword"),E_=cs("SymbolKeyword");let Sa=class{type;annotations;constructor(t,n={}){this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:je(this.annotations)}}toString(){return String(this.type)}};class wa extends Sa{isOptional;constructor(t,n,r={}){super(t,r),this.isOptional=n}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:je(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const Yd=e=>e.map(t=>t.type);class Xd{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(t,n,r,s={}){this.elements=t,this.rest=n,this.isReadonly=r,this.annotations=s;let o=!1,i=!1;for(const c of t)if(c.isOptional)o=!0;else if(o){i=!0;break}if(i||o&&n.length>1)throw new Error(Hb)}toString(){return xe(Lt(this),()=>k_(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:je(this.annotations)}}}const k_=e=>{const t=e.elements.map(String).join(", ");return wb(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const s=String(n),o=s.includes(" | ")?`(${s})`:s;if(r.length>0){const i=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${o}[], ${i}]`:`readonly [...${o}[], ${i}]`}else return e.elements.length>0?`readonly [${t}, ...${o}[]]`:`ReadonlyArray<${s}>`}})};class Le extends wa{name;isReadonly;constructor(t,n,r,s,o){super(n,r,o),this.name=t,this.isReadonly=s}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:je(this.annotations)}}}const Qd=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return Qd(e.from)}return!1};class qo{type;isReadonly;parameter;constructor(t,n,r){if(this.type=n,this.isReadonly=r,Qd(t))this.parameter=t;else throw new Error(Jb)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class hn{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(t,n,r={}){this.annotations=r;const s={};for(let i=0;i<t.length;i++){const c=t[i].name;if(Object.prototype.hasOwnProperty.call(s,c))throw new Error(Wb(c));s[c]=null}const o={string:!1,symbol:!1};for(let i=0;i<n.length;i++){const c=ch(n[i].parameter);if(w_(c)){if(o.string)throw new Error(el("string"));o.string=!0}else if(E_(c)){if(o.symbol)throw new Error(el("symbol"));o.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return xe(Lt(this),()=>O_(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:je(this.annotations)}}}const rl=e=>e.map(String).join("; "),O_=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${rl(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${rl(e.indexSignatures)} }`:"{}"},v_=Kr(bd(Yn,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),T_={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},Zd=e=>Od(e,t=>eh(t)?Zd(t.types):[t]),R_=e=>{const t=v_(e),n=[],r={},s=[];for(const o of t)switch(o._tag){case"NeverKeyword":break;case"AnyKeyword":return[b_];case"UnknownKeyword":return[g_];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{r[o._tag]||(r[o._tag]=o,n.push(o));break}case"Literal":{const i=typeof o.literal;switch(i){case"string":case"number":case"bigint":case"boolean":{const c=T_[i];!r[c]&&!s.includes(o.literal)&&(s.push(o.literal),n.push(o));break}case"object":{s.includes(o.literal)||(s.push(o.literal),n.push(o));break}}break}case"UniqueSymbol":{!r.SymbolKeyword&&!s.includes(o.symbol)&&(s.push(o.symbol),n.push(o));break}case"TupleType":{r.ObjectKeyword||n.push(o);break}case"TypeLiteral":{o.propertySignatures.length===0&&o.indexSignatures.length===0?r["{}"]||(r["{}"]=o,n.push(o)):r.ObjectKeyword||n.push(o);break}default:n.push(o)}return n};class bt{types;annotations;static make=(t,n)=>A_(t)?new bt(t,n):t.length===1?t[0]:p_;static unify=(t,n)=>bt.make(R_(Zd(t)),n);_tag="Union";constructor(t,n={}){this.types=t,this.annotations=n}toString(){return xe(Lt(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:je(this.annotations)}}}const A_=e=>e.length>1,eh=cs("Union"),Ci=ne(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class th{f;annotations;_tag="Suspend";constructor(t,n={}){this.f=t,this.annotations=n,this.f=Fd(t)}toString(){return Lt(this).pipe(Zt(()=>Uo(db(this.f)(),t=>Lt(t))),xe(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=Ci.get(t);return n||(Ci.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:je(this.annotations)},Ci.set(t,n),n)}}let nh=class{from;filter;annotations;_tag="Refinement";constructor(t,n,r={}){this.from=t,this.filter=n,this.annotations=r}toString(){return Bo(this).pipe(xe(()=>st(ah(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>rh(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:je(this.annotations)}}};const rh=cs("Refinement"),$i={};let F_=class{from;to;transformation;annotations;_tag="Transformation";constructor(t,n,r,s={}){this.from=t,this.to=n,this.transformation=r,this.annotations=s}toString(){return xe(Lt(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:je(this.annotations)}}};class I_{from;to;decode;encode;constructor(t,n,r,s){this.from=t,this.to=n,this.decode=r,this.encode=s}}class N_{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(t){this.propertySignatureTransformations=t;const n={},r={};for(const s of t){const o=s.from;if(n[o])throw new Error(tl(o));n[o]=!0;const i=s.to;if(r[i])throw new Error(tl(i));r[i]=!0}}}const Xn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={...e.annotations,...t},s=Wd(e);return Me(s)&&(r[qd]=Xn(s.value,t)),n.annotations.value=r,Object.create(Object.getPrototypeOf(e),n)},x_="[\\s\\S]*",C_="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",sh=(e,t)=>{switch(e._tag){case"Literal":return lo(String(e.literal));case"StringKeyword":return x_;case"NumberKeyword":return C_;case"TemplateLiteral":return oh(e);case"Union":return e.types.map(n=>sh(n)).join("|")}},$_=(e,t,n,r)=>eh(e)?`(${t})`:t,oh=(e,t,n)=>{let r="";if(e.head!==""){const s=lo(e.head);r+=s}for(const s of e.spans){const o=sh(s.type);if(r+=$_(s.type,o),s.literal!==""){const i=lo(s.literal);r+=i}}return r},M_=e=>new RegExp(`^${oh(e)}$`),sl=(e,t)=>{const n=[],r=[],s=o=>{switch(o._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new qo(o,t,!0));break;case"Literal":if(Pt(o.literal)||bn(o.literal))n.push(new Le(o.literal,t,!1,!0));else throw new Error(Kb(o.literal));break;case"Enums":{for(const[i,c]of o.enums)n.push(new Le(c,t,!1,!0));break}case"UniqueSymbol":n.push(new Le(o.symbol,t,!1,!0));break;case"Union":o.types.forEach(s);break;default:throw new Error(qb(o))}};return s(e),{propertySignatures:n,indexSignatures:r}},ih=e=>t=>{let n;for(const r of e)Object.prototype.hasOwnProperty.call(t.annotations,r)&&(n===void 0&&(n={}),n[r]=t.annotations[r]);return n},P_=ih([xd,Cd,$d,Md,Pd,Ld]),Ge=e=>{switch(e._tag){case"Declaration":{const t=dt(e.typeParameters,Ge);return t===e.typeParameters?e:new Gd(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=dt(e.elements,s=>{const o=Ge(s.type);return o===s.type?s:new wa(o,s.isOptional)}),n=Yd(e.rest),r=dt(n,Ge);return t===e.elements&&r===n?e:new Xd(t,r.map(s=>new Sa(s)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=dt(e.propertySignatures,r=>{const s=Ge(r.type);return s===r.type?r:new Le(r.name,s,r.isOptional,r.isReadonly)}),n=dt(e.indexSignatures,r=>{const s=Ge(r.type);return s===r.type?r:new qo(r.parameter,s,r.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new hn(t,n,e.annotations)}case"Union":{const t=dt(e.types,Ge);return t===e.types?e:bt.make(t,e.annotations)}case"Suspend":return new th(()=>Ge(e.f()),e.annotations);case"Refinement":{const t=Ge(e.from);return t===e.from?e:new nh(t,e.filter,e.annotations)}case"Transformation":{const t=P_(e);return Ge(t!==void 0?Xn(e.to,t):e.to)}}return e},$n=e=>st(l_(e),{onNone:()=>{},onSome:t=>({[zd]:t})});function dt(e,t){let n=!1;const r=Vo(e.length);for(let s=0;s<e.length;s++){const o=e[s],i=t(o);i!==o&&(n=!0),r[s]=i}return n?r:e}const At=(e,t)=>{switch(e._tag){case"Declaration":{const n=dt(e.typeParameters,r=>At(r));return n===e.typeParameters?e:new Gd(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=dt(e.elements,o=>{const i=At(o.type);return i===o.type?o:new wa(i,o.isOptional)}),r=Yd(e.rest),s=dt(r,o=>At(o));return n===e.elements&&s===r?e:new Xd(n,s.map(o=>new Sa(o)),e.isReadonly,$n(e))}case"TypeLiteral":{const n=dt(e.propertySignatures,s=>{const o=At(s.type);return o===s.type?s:new Le(s.name,o,s.isOptional,s.isReadonly)}),r=dt(e.indexSignatures,s=>{const o=At(s.type);return o===s.type?s:new qo(s.parameter,o,s.isReadonly)});return n===e.propertySignatures&&r===e.indexSignatures?e:new hn(n,r,$n(e))}case"Union":{const n=dt(e.types,r=>At(r));return n===e.types?e:bt.make(n,$n(e))}case"Suspend":return new th(()=>At(e.f()),$n(e));case"Refinement":{const n=At(e.from),r=$n(e);return r?Xn(n,r):n}case"Transformation":{const n=$n(e);return At(n?Xn(e.from,n):e.from)}}return e},ol=e=>At(e),je=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},ch=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return ch(e.from)}},Ko=e=>xe(Lt(e),()=>e._tag);function L_(e){return st(Zb(e),{onNone:()=>"",onSome:t=>t.map(n=>` & Brand<${Ct(n)}>`).join("")})}const ah=e=>Kd(e).pipe(Zt(()=>Hd(e)),Zt(()=>Jd(e)),_d(t=>t+L_(e))),Lt=e=>Zt(Bo(e),()=>ah(e)),D_=Symbol.for("effect/Context/Tag"),fo=Symbol.for("effect/Context/Reference"),j_="effect/STM",U_=Symbol.for(j_),uh={...os,_op:"Tag",[U_]:zn,[D_]:{_Service:e=>e,_Identifier:e=>e},toString(){return Ne(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[he](){return this.toJSON()},of(e){return e},context(e){return fh(this,e)}},V_={...uh,[fo]:fo},B_=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(uh);return Object.defineProperty(r,"stack",{get(){return n.stack}}),r.key=e,r},q_=()=>(e,t)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=n;function s(){}return Object.setPrototypeOf(s,V_),s.key=e,s.defaultValue=t.defaultValue,Object.defineProperty(s,"stack",{get(){return r.stack}}),s},lh=Symbol.for("effect/Context"),K_={[lh]:{_Services:e=>e},[W](e){if(H_(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!z(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[X](){return pe(this,aa(this.unsafeMap.size))},pipe(){return q(this,arguments)},toString(){return Ne(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Ae)}},[he](){return this.toJSON()}},Qn=e=>{const t=Object.create(K_);return t.unsafeMap=e,t},J_=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(t.message=t.message+` (defined at ${r[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},H_=e=>G(e,lh),W_=e=>G(e,fo),z_=Qn(new Map),G_=()=>z_,fh=(e,t)=>Qn(new Map([[e.key,t]])),Y_=m(3,(e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),Qn(r)}),Mi=ne("effect/Context/defaultValueCache",()=>new Map),Ea=e=>{if(Mi.has(e.key))return Mi.get(e.key);const t=e.defaultValue();return Mi.set(e.key,t),t},X_=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):Ea(t),dh=m(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(fo in t)return Ea(t);throw J_(t)}return e.unsafeMap.get(t.key)}),Q_=dh,Z_=m(2,(e,t)=>e.unsafeMap.has(t.key)?sc(e.unsafeMap.get(t.key)):W_(t)?sc(Ea(t)):ud),eS=m(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[r,s]of t.unsafeMap)n.set(r,s);return Qn(n)}),Fn=B_,ka=G_,tS=fh,Ar=Y_,hh=Q_,ph=dh,as=Z_,mh=eS,gh=q_,yh=Symbol.for("effect/Chunk");function nS(e,t,n,r,s){for(let o=t;o<Math.min(e.length,t+s);o++)n[r+o-t]=e[o];return n}const bh=[],rS=e=>oa((t,n)=>t.length===n.length&&pn(t).every((r,s)=>e(r,Kn(n,s)))),sS=rS(z),oS={[yh]:{_A:e=>e},toString(){return Ne(this.toJSON())},toJSON(){return{_id:"Chunk",values:pn(this).map(Ae)}},[he](){return this.toJSON()},[W](e){return _h(e)&&sS(this,e)},[X](){return pe(this,rs(pn(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return bh[Symbol.iterator]();default:return pn(this)[Symbol.iterator]()}},pipe(){return q(this,arguments)}},ve=e=>{const t=Object.create(oS);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=Nt,t.right=Nt;break}case"ISingleton":{t.length=1,t.depth=0,t.left=Nt,t.right=Nt;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=Nt,t.right=Nt;break}}return t},_h=e=>G(e,yh),Nt=ve({_tag:"IEmpty"}),Ht=()=>Nt,Pi=(...e)=>aS(e),ot=e=>ve({_tag:"ISingleton",a:e}),Sh=e=>_h(e)?e:Jo(be(e)),ic=(e,t,n)=>{switch(e.backing._tag){case"IArray":{nS(e.backing.array,0,t,n,e.length);break}case"IConcat":{ic(e.left,t,n),ic(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let r=0,s=n;for(;r<e.length;)t[s]=Kn(e,r),r+=1,s+=1;break}}},iS=e=>{switch(e.backing._tag){case"IEmpty":return bh;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return ic(e,t,0),e.backing={_tag:"IArray",array:t},e.left=Nt,e.right=Nt,e.depth=0,t}}},pn=iS,cS=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return ve({_tag:"IArray",array:Yu(e.backing.array)});case"IConcat":return ve({_tag:"IConcat",left:Zn(e.backing.right),right:Zn(e.backing.left)});case"ISlice":return Jo(Yu(pn(e)))}},Zn=cS,Jo=e=>e.length===0?Ht():e.length===1?ot(e[0]):ve({_tag:"IArray",array:e}),aS=e=>Jo(e),Kn=m(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Kn(e.left,t):Kn(e.right,t-e.left.length);case"ISlice":return Kn(e.backing.chunk,t+e.backing.offset)}}),uS=m(2,(e,t)=>wt(e,ot(t))),kt=m(2,(e,t)=>wt(ot(t),e)),cc=m(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return Nt;switch(e.backing._tag){case"ISlice":return ve({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?cc(e.right,t-e.left.length):ve({_tag:"IConcat",left:cc(e.left,t),right:e.right});default:return ve({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),wt=m(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return ve({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const r=wt(e.right,t);return ve({_tag:"IConcat",left:e.left,right:r})}else{const r=wt(e.right.right,t);if(r.depth===e.depth-3){const s=ve({_tag:"IConcat",left:e.right.left,right:r});return ve({_tag:"IConcat",left:e.left,right:s})}else{const s=ve({_tag:"IConcat",left:e.left,right:e.right.left});return ve({_tag:"IConcat",left:s,right:r})}}else if(t.right.depth>=t.left.depth){const r=wt(e,t.left);return ve({_tag:"IConcat",left:r,right:t.right})}else{const r=wt(e,t.left.left);if(r.depth===t.depth-3){const s=ve({_tag:"IConcat",left:r,right:t.left.right});return ve({_tag:"IConcat",left:s,right:t.right})}else{const s=ve({_tag:"IConcat",left:t.left.right,right:t.right});return ve({_tag:"IConcat",left:r,right:s})}}}),lS=e=>e.length===0,er=e=>e.length>0,wh=e=>Kn(e,0),tr=wh,an=e=>cc(e,1),ac=Symbol.for("effect/Duration"),Eh=BigInt(0),il=BigInt(24),Fs=BigInt(60),uc=BigInt(1e3),cl=BigInt(1e6),al=BigInt(1e9),fS=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,Wt=e=>{if(kh(e))return e;if(bn(e))return lc(e);if(Mo(e))return Li(e);if(Array.isArray(e)&&e.length===2&&e.every(bn))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?Oh:e[0]===1/0||e[1]===1/0?mS:Li(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(Pt(e)){const t=fS.exec(e);if(t){const[n,r,s]=t,o=Number(r);switch(s){case"nano":case"nanos":return Li(BigInt(r));case"micro":case"micros":return gS(BigInt(r));case"milli":case"millis":return lc(o);case"second":case"seconds":return yS(o);case"minute":case"minutes":return bS(o);case"hour":case"hours":return _S(o);case"day":case"days":return SS(o);case"week":case"weeks":return wS(o)}}}throw new Error("Invalid DurationInput")},ul={_tag:"Millis",millis:0},dS={_tag:"Infinity"},hS={[ac]:ac,[X](){return pe(this,Zf(this.value))},[W](e){return kh(e)&&AS(this,e)},toString(){return`Duration(${IS(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:kS(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[he](){return this.toJSON()},pipe(){return q(this,arguments)}},Dt=e=>{const t=Object.create(hS);return bn(e)?isNaN(e)||e<=0?t.value=ul:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=dS:e<=Eh?t.value=ul:t.value={_tag:"Nanos",nanos:e},t},kh=e=>G(e,ac),pS=e=>{switch(e.value._tag){case"Millis":return e.value.millis===0;case"Nanos":return e.value.nanos===Eh;case"Infinity":return!1}},Oh=Dt(0),mS=Dt(1/0),Li=e=>Dt(e),gS=e=>Dt(e*uc),lc=e=>Dt(e),yS=e=>Dt(e*1e3),bS=e=>Dt(e*6e4),_S=e=>Dt(e*36e5),SS=e=>Dt(e*864e5),wS=e=>Dt(e*6048e5),fc=e=>OS(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),ES=e=>{const t=Wt(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},kS=e=>{const t=Wt(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/al),Number(t.value.nanos%al)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},OS=m(2,(e,t)=>{const n=Wt(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),Oa=m(3,(e,t,n)=>{const r=Wt(e),s=Wt(t);if(r.value._tag==="Infinity"||s.value._tag==="Infinity")return n.onMillis(fc(r),fc(s));if(r.value._tag==="Nanos"||s.value._tag==="Nanos"){const o=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),i=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6));return n.onNanos(o,i)}return n.onMillis(r.value.millis,s.value.millis)}),vS=(e,t)=>Oa(e,t,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),TS=m(2,(e,t)=>Oa(e,t,{onMillis:(n,r)=>n<=r,onNanos:(n,r)=>n<=r})),RS=m(2,(e,t)=>Oa(e,t,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),AS=m(2,(e,t)=>vS(Wt(e),Wt(t))),FS=e=>{const t=Wt(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=ES(t),r=n/cl,s=r/uc,o=s/Fs,i=o/Fs,c=i/il;return{days:Number(c),hours:Number(i%il),minutes:Number(o%Fs),seconds:Number(s%Fs),millis:Number(r%uc),nanos:Number(n%cl)}},IS=e=>{const t=Wt(e);if(t.value._tag==="Infinity")return"Infinity";if(pS(t))return"0";const n=FS(t),r=[];return n.days!==0&&r.push(`${n.days}d`),n.hours!==0&&r.push(`${n.hours}h`),n.minutes!==0&&r.push(`${n.minutes}m`),n.seconds!==0&&r.push(`${n.seconds}s`),n.millis!==0&&r.push(`${n.millis}ms`),n.nanos!==0&&r.push(`${n.nanos}ns`),r.join(" ")},Sn=5,va=Math.pow(2,Sn),NS=va-1,xS=va/2,CS=va/4;function $S(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function nr(e,t){return t>>>e&NS}function Vn(e){return 1<<e}function vh(e,t){return $S(e&t-1)}const MS=(e,t)=>({value:e,previous:t});function Jn(e,t,n,r){let s=r;if(!e){const o=r.length;s=new Array(o);for(let i=0;i<o;++i)s[i]=r[i]}return s[t]=n,s}function Th(e,t,n){const r=n.length-1;let s=0,o=0,i=n;if(e)s=o=t;else for(i=new Array(r);s<t;)i[o++]=n[s++];for(++s;s<=r;)i[o++]=n[s++];return e&&(i.length=r),i}function PS(e,t,n,r){const s=r.length;if(e){let a=s;for(;a>=t;)r[a--]=r[a];return r[t]=n,r}let o=0,i=0;const c=new Array(s+1);for(;o<t;)c[i++]=r[o++];for(c[t]=n;o<s;)c[++i]=r[o++];return c}class tn{_tag="EmptyNode";modify(t,n,r,s,o,i){const c=r(j());return Ie(c)?new tn:(++i.value,new mn(t,s,o,c))}}function Et(e){return zf(e,"EmptyNode")}function LS(e){return Et(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Ho(e,t){return Et(e)?!1:t===e.edit}class mn{edit;hash;key;value;_tag="LeafNode";constructor(t,n,r,s){this.edit=t,this.hash=n,this.key=r,this.value=s}modify(t,n,r,s,o,i){if(z(o,this.key)){const a=r(this.value);return a===this.value?this:Ie(a)?(--i.value,new tn):Ho(this,t)?(this.value=a,this):new mn(t,s,o,a)}const c=r(j());return Ie(c)?this:(++i.value,Rh(t,n,this.hash,this,s,new mn(t,s,o,c)))}}class Ta{edit;hash;children;_tag="CollisionNode";constructor(t,n,r){this.edit=t,this.hash=n,this.children=r}modify(t,n,r,s,o,i){if(s===this.hash){const a=Ho(this,t),u=this.updateCollisionList(a,t,this.hash,this.children,r,o,i);return u===this.children?this:u.length>1?new Ta(t,this.hash,u):u[0]}const c=r(j());return Ie(c)?this:(++i.value,Rh(t,n,this.hash,this,s,new mn(t,s,o,c)))}updateCollisionList(t,n,r,s,o,i,c){const a=s.length;for(let l=0;l<a;++l){const f=s[l];if("key"in f&&z(i,f.key)){const h=f.value,b=o(h);return b===h?s:Ie(b)?(--c.value,Th(t,l,s)):Jn(t,l,new mn(n,r,i,b),s)}}const u=o(j());return Ie(u)?s:(++c.value,Jn(t,a,new mn(n,r,i,u),s))}}class rr{edit;mask;children;_tag="IndexedNode";constructor(t,n,r){this.edit=t,this.mask=n,this.children=r}modify(t,n,r,s,o,i){const c=this.mask,a=this.children,u=nr(n,s),l=Vn(u),f=vh(c,l),h=c&l,b=Ho(this,t);if(!h){const k=new tn().modify(t,n+Sn,r,s,o,i);return k?a.length>=xS?jS(t,u,k,c,a):new rr(t,c|l,PS(b,f,k,a)):this}const p=a[f],S=p.modify(t,n+Sn,r,s,o,i);if(p===S)return this;let y=c,O;if(Et(S)){if(y&=~l,!y)return new tn;if(a.length<=2&&LS(a[f^1]))return a[f^1];O=Th(b,f,a)}else O=Jn(b,f,S,a);return b?(this.mask=y,this.children=O,this):new rr(t,y,O)}}class Ra{edit;size;children;_tag="ArrayNode";constructor(t,n,r){this.edit=t,this.size=n,this.children=r}modify(t,n,r,s,o,i){let c=this.size;const a=this.children,u=nr(n,s),l=a[u],f=(l||new tn).modify(t,n+Sn,r,s,o,i);if(l===f)return this;const h=Ho(this,t);let b;if(Et(l)&&!Et(f))++c,b=Jn(h,u,f,a);else if(!Et(l)&&Et(f)){if(--c,c<=CS)return DS(t,c,u,a);b=Jn(h,u,new tn,a)}else b=Jn(h,u,f,a);return h?(this.size=c,this.children=b,this):new Ra(t,c,b)}}function DS(e,t,n,r){const s=new Array(t-1);let o=0,i=0;for(let c=0,a=r.length;c<a;++c)if(c!==n){const u=r[c];u&&!Et(u)&&(s[o++]=u,i|=1<<c)}return new rr(e,i,s)}function jS(e,t,n,r,s){const o=[];let i=r,c=0;for(let a=0;i;++a)i&1&&(o[a]=s[c++]),i>>>=1;return o[t]=n,new Ra(e,c+1,o)}function US(e,t,n,r,s,o){if(n===s)return new Ta(e,n,[o,r]);const i=nr(t,n),c=nr(t,s);if(i===c)return a=>new rr(e,Vn(i)|Vn(c),[a]);{const a=i<c?[r,o]:[o,r];return new rr(e,Vn(i)|Vn(c),a)}}function Rh(e,t,n,r,s,o){let i,c=t;for(;;){const a=US(e,c,n,r,s,o);if(typeof a=="function")i=MS(a,i),c=c+Sn;else{let u=a;for(;i!=null;)u=i.value(u),i=i.previous;return u}}}const Ah="effect/HashMap",dc=Symbol.for(Ah),VS={[dc]:dc,[Symbol.iterator](){return new Wo(this,(e,t)=>[e,t])},[X](){let e=L(Ah);for(const t of this)e^=E(L(t[0]),re(L(t[1])));return pe(this,e)},[W](e){if(KS(e)){if(e._size!==this._size)return!1;for(const t of this){const n=E(e,Fa(t[0],L(t[0])));if(Ie(n))return!1;if(!z(t[1],n.value))return!1}return!0}return!1},toString(){return Ne(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Ae)}},[he](){return this.toJSON()},pipe(){return q(this,arguments)}},Aa=(e,t,n,r)=>{const s=Object.create(VS);return s._editable=e,s._edit=t,s._root=n,s._size=r,s};class Wo{map;f;v;constructor(t,n){this.map=t,this.f=n,this.v=Fh(this.map._root,this.f,void 0)}next(){if(Ie(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=ho(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new Wo(this.map,this.f)}}const ho=e=>e?Ih(e[0],e[1],e[2],e[3],e[4]):j(),Fh=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return Me(e.value)?H({value:t(e.key,e.value.value),cont:n}):ho(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return Ih(r.length,r,0,t,n)}default:return ho(n)}},Ih=(e,t,n,r,s)=>{for(;n<e;){const o=t[n++];if(o&&!Et(o))return Fh(o,r,[e,t,n,r,s])}return ho(s)},BS=Aa(!1,0,new tn,0),zo=()=>BS,qS=e=>{const t=xh(zo());for(const n of e)Jr(t,n[0],n[1]);return GS(t)},KS=e=>G(e,dc),JS=e=>e&&Et(e._root),HS=m(2,(e,t)=>Fa(e,t,L(t))),Fa=m(3,(e,t,n)=>{let r=e._root,s=0;for(;;)switch(r._tag){case"LeafNode":return z(t,r.key)?r.value:j();case"CollisionNode":{if(n===r.hash){const o=r.children;for(let i=0,c=o.length;i<c;++i){const a=o[i];if("key"in a&&z(t,a.key))return a.value}}return j()}case"IndexedNode":{const o=nr(s,n),i=Vn(o);if(r.mask&i){r=r.children[vh(r.mask,i)],s+=Sn;break}return j()}case"ArrayNode":{if(r=r.children[nr(s,n)],r){s+=Sn;break}return j()}default:return j()}}),WS=m(2,(e,t)=>Me(Fa(e,t,L(t)))),Jr=m(3,(e,t,n)=>Ia(e,t,()=>H(n))),zS=m(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:Aa(e._editable,e._edit,t,n)),Nh=e=>new Wo(e,t=>t),hc=e=>e._size,xh=e=>Aa(!0,e._edit+1,e._root,e._size),GS=e=>(e._editable=!1,e),Ia=m(3,(e,t,n)=>YS(e,t,L(t),n)),YS=m(4,(e,t,n,r)=>{const s={value:e._size},o=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,s);return E(e,zS(o,s.value))}),ll=m(2,(e,t)=>Ia(e,t,j)),XS=m(2,(e,t)=>Go(e,zo(),(n,r,s)=>Jr(n,s,t(r,s)))),QS=m(2,(e,t)=>Go(e,void 0,(n,r,s)=>t(r,s))),Go=m(3,(e,t,n)=>{const r=e._root;if(r._tag==="LeafNode")return Me(r.value)?n(t,r.value.value,r.key):t;if(r._tag==="EmptyNode")return t;const s=[r.children];let o;for(;o=s.pop();)for(let i=0,c=o.length;i<c;){const a=o[i++];a&&!Et(a)&&(a._tag==="LeafNode"?Me(a.value)&&(t=n(t,a.value.value,a.key)):s.push(a.children))}return t}),Ch="effect/HashSet",pc=Symbol.for(Ch),ZS={[pc]:pc,[Symbol.iterator](){return Nh(this._keyMap)},[X](){return pe(this,re(L(this._keyMap))(L(Ch)))},[W](e){return ew(e)?hc(this._keyMap)===hc(e._keyMap)&&z(this._keyMap,e._keyMap):!1},toString(){return Ne(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Ae)}},[he](){return this.toJSON()},pipe(){return q(this,arguments)}},Yo=e=>{const t=Object.create(ZS);return t._keyMap=e,t},ew=e=>G(e,pc),tw=Yo(zo()),Xo=()=>tw,nw=e=>{const t=Na(Xo());for(const n of e)Hr(t,n);return xa(t)},rw=(...e)=>{const t=Na(Xo());for(const n of e)Hr(t,n);return xa(t)},sw=m(2,(e,t)=>WS(e._keyMap,t)),ow=e=>hc(e._keyMap),Na=e=>Yo(xh(e._keyMap)),xa=e=>(e._keyMap._editable=!1,e),$h=m(2,(e,t)=>{const n=Na(e);return t(n),xa(n)}),Hr=m(2,(e,t)=>e._keyMap._editable?(Jr(t,!0)(e._keyMap),e):Yo(Jr(t,!0)(e._keyMap))),Mh=m(2,(e,t)=>e._keyMap._editable?(ll(t)(e._keyMap),e):Yo(ll(t)(e._keyMap))),iw=m(2,(e,t)=>$h(e,n=>{for(const r of t)Mh(n,r)})),cw=m(2,(e,t)=>$h(Xo(),n=>{aw(e,r=>Hr(n,r));for(const r of t)Hr(n,r)})),aw=m(2,(e,t)=>QS(e._keyMap,(n,r)=>t(r))),uw=m(3,(e,t,n)=>Go(e._keyMap,t,(r,s,o)=>n(r,o))),wn=Xo,lw=nw,Ca=rw,fw=sw,Ph=ow,Vr=Hr,Lh=Mh,fl=iw,Wr=cw,po=uw,dl=Symbol.for("effect/MutableRef"),dw={[dl]:dl,toString(){return Ne(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Ae(this.current)}},[he](){return this.toJSON()},pipe(){return q(this,arguments)}},Dh=e=>{const t=Object.create(dw);return t.current=e,t},Qo=e=>e.current,jh=m(2,(e,t)=>(e.current=t,e)),$a="effect/FiberId",zr=Symbol.for($a),mo="None",mc="Runtime",hw="Composite",pw=we(`${$a}-${mo}`);let mw=class{[zr]=zr;_tag=mo;id=-1;startTimeMillis=-1;[X](){return pw}[W](t){return Uh(t)&&t._tag===mo}toString(){return Ne(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[he](){return this.toJSON()}};class gw{id;startTimeMillis;[zr]=zr;_tag=mc;constructor(t,n){this.id=t,this.startTimeMillis=n}[X](){return pe(this,we(`${$a}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[W](t){return Uh(t)&&t._tag===mc&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return Ne(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[he](){return this.toJSON()}}const yw=new mw,Uh=e=>G(e,zr),gc=e=>{switch(e._tag){case mo:return wn();case mc:return Ca(e.id);case hw:return E(gc(e.left),Wr(gc(e.right)))}},hl=ne(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Dh(0)),Vh=e=>Array.from(gc(e)).map(n=>`#${n}`).join(","),bw=()=>{const e=Qo(hl);return E(hl,jh(e+1)),new gw(e,Date.now())},sr=yw,_w=Vh,Bh=bw,Ma=zo,Sw=qS,ww=JS,qh=HS,Kh=Jr,Jh=Nh,Ew=Ia,kw=XS,Hh=Go,Gr=Symbol.for("effect/List"),yc=e=>be(e),Ow=e=>_y(ga(e),yc),vw=Ow(z),Tw={[Gr]:Gr,_tag:"Cons",toString(){return Ne(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:yc(this).map(Ae)}},[he](){return this.toJSON()},[W](e){return zh(e)&&this._tag===e._tag&&vw(this,e)},[X](){return pe(this,rs(yc(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return q(this,arguments)}},go=(e,t)=>{const n=Object.create(Tw);return n.head=e,n.tail=t,n},Rw=we("Nil"),Aw={[Gr]:Gr,_tag:"Nil",toString(){return Ne(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[he](){return this.toJSON()},[X](){return Rw},[W](e){return zh(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return q(this,arguments)}},Wh=Object.create(Aw),zh=e=>G(e,Gr),Jt=e=>e._tag==="Nil",Fw=e=>e._tag==="Cons",Iw=()=>Wh,En=(e,t)=>go(e,t),or=Iw,Pa=e=>go(e,Wh),Nw=m(2,(e,t)=>Cw(t,e)),xw=m(2,(e,t)=>En(t,e)),Cw=m(2,(e,t)=>{if(Jt(e))return t;if(Jt(t))return e;{const n=go(t.head,e);let r=n,s=t.tail;for(;!Jt(s);){const o=go(s.head,e);r.tail=o,r=o,s=s.tail}return n}}),$w=m(3,(e,t,n)=>{let r=t,s=e;for(;!Jt(s);)r=n(r,s.head),s=s.tail;return r}),Mw=e=>{let t=or(),n=e;for(;!Jt(n);)t=xw(t,n.head),n=n.tail;return t},La=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=ha,e}(),Pw=Symbol.for("effect/DifferContextPatch");function pl(e){return e}const us={...La.prototype,[Pw]:{_Value:pl,_Patch:pl}},Lw=Object.assign(Object.create(us),{_tag:"Empty"}),Dw=Object.create(Lw),Gh=()=>Dw,jw=Object.assign(Object.create(us),{_tag:"AndThen"}),Uw=(e,t)=>{const n=Object.create(jw);return n.first=e,n.second=t,n},Vw=Object.assign(Object.create(us),{_tag:"AddService"}),Bw=(e,t)=>{const n=Object.create(Vw);return n.key=e,n.service=t,n},qw=Object.assign(Object.create(us),{_tag:"RemoveService"}),Kw=e=>{const t=Object.create(qw);return t.key=e,t},Jw=Object.assign(Object.create(us),{_tag:"UpdateService"}),Hw=(e,t)=>{const n=Object.create(Jw);return n.key=e,n.update=t,n},Ww=(e,t)=>{const n=new Map(e.unsafeMap);let r=Gh();for(const[s,o]of t.unsafeMap.entries())if(n.has(s)){const i=n.get(s);n.delete(s),z(i,o)||(r=Bs(Hw(s,()=>o))(r))}else n.delete(s),r=Bs(Bw(s,o))(r);for(const[s]of n.entries())r=Bs(Kw(s))(r);return r},Bs=m(2,(e,t)=>Uw(e,t)),zw=m(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,r=ot(e);const s=new Map(t.unsafeMap);for(;er(r);){const i=tr(r),c=an(r);switch(i._tag){case"Empty":{r=c;break}case"AddService":{s.set(i.key,i.service),r=c;break}case"AndThen":{r=kt(kt(c,i.second),i.first);break}case"RemoveService":{s.delete(i.key),r=c;break}case"UpdateService":{s.set(i.key,i.update(s.get(i.key))),n=!0,r=c;break}}}if(!n)return Qn(s);const o=new Map;for(const[i]of t.unsafeMap)s.has(i)&&(o.set(i,s.get(i)),s.delete(i));for(const[i,c]of s)o.set(i,c);return Qn(o)}),Gw=Symbol.for("effect/DifferHashSetPatch");function Di(e){return e}const Zo={...La.prototype,[Gw]:{_Value:Di,_Key:Di,_Patch:Di}},Yw=Object.assign(Object.create(Zo),{_tag:"Empty"}),Xw=Object.create(Yw),Yh=()=>Xw,Qw=Object.assign(Object.create(Zo),{_tag:"AndThen"}),Zw=(e,t)=>{const n=Object.create(Qw);return n.first=e,n.second=t,n},e0=Object.assign(Object.create(Zo),{_tag:"Add"}),t0=e=>{const t=Object.create(e0);return t.value=e,t},n0=Object.assign(Object.create(Zo),{_tag:"Remove"}),r0=e=>{const t=Object.create(n0);return t.value=e,t},s0=(e,t)=>{const[n,r]=po([e,Yh()],([s,o],i)=>fw(i)(s)?[Lh(i)(s),o]:[s,bc(t0(i))(o)])(t);return po(r,(s,o)=>bc(r0(o))(s))(n)},bc=m(2,(e,t)=>Zw(e,t)),o0=m(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,r=ot(e);for(;er(r);){const s=tr(r),o=an(r);switch(s._tag){case"Empty":{r=o;break}case"AndThen":{r=kt(s.first)(kt(s.second)(o));break}case"Add":{n=Vr(s.value)(n),r=o;break}case"Remove":n=Lh(s.value)(n),r=o}}return n}),i0=Symbol.for("effect/DifferReadonlyArrayPatch");function ml(e){return e}const ls={...La.prototype,[i0]:{_Value:ml,_Patch:ml}},c0=Object.assign(Object.create(ls),{_tag:"Empty"}),a0=Object.create(c0),Xh=()=>a0,u0=Object.assign(Object.create(ls),{_tag:"AndThen"}),l0=(e,t)=>{const n=Object.create(u0);return n.first=e,n.second=t,n},f0=Object.assign(Object.create(ls),{_tag:"Append"}),d0=e=>{const t=Object.create(f0);return t.values=e,t},h0=Object.assign(Object.create(ls),{_tag:"Slice"}),p0=(e,t)=>{const n=Object.create(h0);return n.from=e,n.until=t,n},m0=Object.assign(Object.create(ls),{_tag:"Update"}),g0=(e,t)=>{const n=Object.create(m0);return n.index=e,n.patch=t,n},y0=e=>{let t=0,n=Xh();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],s=e.newValue[t],o=e.differ.diff(r,s);z(o,e.differ.empty)||(n=qs(n,g0(t,o))),t=t+1}return t<e.oldValue.length&&(n=qs(n,p0(0,t))),t<e.newValue.length&&(n=qs(n,d0(Nb(t)(e.newValue)))),n},qs=m(2,(e,t)=>l0(e,t)),b0=m(3,(e,t,n)=>{if(e._tag==="Empty")return t;let r=t.slice(),s=yt(e);for(;Us(s);){const o=He(s),i=_n(s);switch(o._tag){case"Empty":{s=i;break}case"AndThen":{i.unshift(o.first,o.second),s=i;break}case"Append":{for(const c of o.values)r.push(c);s=i;break}case"Slice":{r=r.slice(o.from,o.until),s=i;break}case"Update":{r[o.index]=n.patch(o.patch,r[o.index]),s=i;break}}}return r}),_0=Symbol.for("effect/Differ"),S0={[_0]:{_P:ke,_V:ke},pipe(){return q(this,arguments)}},gr=e=>{const t=Object.create(S0);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},w0=()=>gr({empty:Gh(),combine:(e,t)=>Bs(t)(e),diff:(e,t)=>Ww(e,t),patch:(e,t)=>zw(t)(e)}),E0=()=>gr({empty:Yh(),combine:(e,t)=>bc(t)(e),diff:(e,t)=>s0(e,t),patch:(e,t)=>o0(t)(e)}),k0=e=>gr({empty:Xh(),combine:(t,n)=>qs(t,n),diff:(t,n)=>y0({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>b0(t,n,e)}),Qh=()=>O0((e,t)=>t),O0=e=>gr({empty:ke,combine:(t,n)=>t===ke?n:n===ke?t:r=>n(t(r)),diff:(t,n)=>z(t,n)?ke:Co(n),patch:(t,n)=>e(n,t(n))}),Yr=255,Zh=8,_c=e=>e&Yr,Sc=e=>e>>Zh&Yr,fs=(e,t)=>(e&Yr)+((t&e&Yr)<<Zh),v0=fs(0,0),T0=e=>fs(e,e),R0=e=>fs(e,0),A0=m(2,(e,t)=>fs(_c(e)&~t,Sc(e))),F0=m(2,(e,t)=>e|t),I0=e=>~e>>>0&Yr,N0=0,yr=1,x0=2,ep=4,wc=16,tp=32,C0=e=>ei(e,tp),$0=m(2,(e,t)=>e|t),Yt=e=>np(e)&&!P0(e),np=e=>ei(e,yr),ei=m(2,(e,t)=>(e&t)!==0),rp=(...e)=>e.reduce((t,n)=>t|n,0),M0=rp(N0),gl=e=>ei(e,ep),P0=e=>ei(e,wc),Ks=m(2,(e,t)=>fs(e^t,t)),Js=m(2,(e,t)=>e&(I0(_c(t))|Sc(t))|_c(t)&Sc(t)),yl=gr({empty:v0,diff:(e,t)=>Ks(e,t),combine:(e,t)=>F0(t)(e),patch:(e,t)=>Js(t,e)}),L0=T0,sp=R0,bl=A0,op=(e,t)=>({_tag:"Par",left:e,right:t}),Is=(e,t)=>({_tag:"Seq",left:e,right:t}),D0=e=>{let t=Pa(e),n=or();for(;;){const[r,s]=$w(t,[ip(),or()],([o,i],c)=>{const[a,u]=j0(c);return[K0(o,a),Nw(i,u)]});if(n=U0(n,r),Jt(s))return Mw(n);t=s}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},j0=e=>{let t=e,n=ip(),r=or(),s=or();for(;;)switch(t._tag){case"Empty":{if(Jt(r))return[n,s];t=r.head,r=r.tail;break}case"Par":{r=En(t.right,r),t=t.left;break}case"Seq":{const o=t.left,i=t.right;switch(o._tag){case"Empty":{t=i;break}case"Par":{const c=o.left,a=o.right;t=op(Is(c,i),Is(a,i));break}case"Seq":{const c=o.left,a=o.right;t=Is(c,Is(a,i));break}case"Single":{t=o,s=En(i,s);break}}break}case"Single":{if(n=q0(n,t),Jt(r))return[n,s];t=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},U0=(e,t)=>{if(Jt(e))return Pa(ji(t));if(J0(t))return e;const n=X0(e.head),r=H0(t);return n.length===1&&r.length===1&&z(n[0],r[0])?En(Y0(e.head,ji(t)),e.tail):En(ji(t),e)},V0=Symbol.for("effect/RequestBlock/RequestBlockParallel"),B0={_R:e=>e};class Da{map;[V0]=B0;constructor(t){this.map=t}}const ip=()=>new Da(Ma()),q0=(e,t)=>new Da(Ew(e.map,t.dataSource,n=>fb(_d(n,uS(t.blockedRequest)),()=>ot(t.blockedRequest)))),K0=(e,t)=>new Da(Hh(e.map,t.map,(n,r,s)=>Kh(n,s,st(qh(n,s),{onNone:()=>r,onSome:o=>wt(r,o)})))),J0=e=>ww(e.map),H0=e=>Array.from(Jh(e.map)),ji=e=>G0(kw(e.map,t=>ot(t))),W0=Symbol.for("effect/RequestBlock/RequestBlockSequential"),z0={_R:e=>e};class cp{map;[W0]=z0;constructor(t){this.map=t}}const G0=e=>new cp(e),Y0=(e,t)=>new cp(Hh(t.map,e.map,(n,r,s)=>Kh(n,s,st(qh(n,s),{onNone:()=>Ht(),onSome:o=>wt(o,r)})))),X0=e=>Array.from(Jh(e.map)),Q0=e=>Array.from(e.map),ds="Die",kn="Empty",In="Fail",br="Interrupt",ir="Parallel",cr="Sequential",ap="effect/Cause",up=Symbol.for(ap),Z0={_E:e=>e},_r={[up]:Z0,[X](){return E(L(ap),re(L(hE(this))),pe(this))},[W](e){return eE(e)&&dE(this,e)},pipe(){return q(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Ae(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Ae(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Ae(this.left),right:Ae(this.right)}}},toString(){return Sr(this)},[he](){return this.toJSON()}},ar=(()=>{const e=Object.create(_r);return e._tag=kn,e})(),yo=e=>{const t=Object.create(_r);return t._tag=In,t.error=e,t},$t=e=>{const t=Object.create(_r);return t._tag=ds,t.defect=e,t},Xt=e=>{const t=Object.create(_r);return t._tag=br,t.fiberId=e,t},ti=(e,t)=>{const n=Object.create(_r);return n._tag=ir,n.left=e,n.right=t,n},ht=(e,t)=>{const n=Object.create(_r);return n._tag=cr,n.left=e,n.right=t,n},eE=e=>G(e,up),tE=e=>e._tag===kn,nE=e=>e._tag===In,rE=e=>e._tag===kn?!0:ur(e,!0,(t,n)=>{switch(n._tag){case kn:return H(t);case ds:case In:case br:return H(!1);default:return j()}}),sE=e=>Me(lE(e)),ja=e=>Ua(void 0,mE)(e),oE=e=>Zn(ur(e,Ht(),(t,n)=>n._tag===In?H(E(t,kt(n.error))):j())),iE=e=>Zn(ur(e,Ht(),(t,n)=>n._tag===ds?H(E(t,kt(n.defect))):j())),cE=e=>ur(e,wn(),(t,n)=>n._tag===br?H(E(t,Vr(n.fiberId))):j()),aE=e=>lp(e,t=>t._tag===In?H(t.error):j()),uE=e=>{const t=aE(e);switch(t._tag){case"None":return Z(e);case"Some":return Q(t.value)}},lE=e=>lp(e,t=>t._tag===br?H(t.fiberId):j()),_l=e=>fp(e,{onEmpty:ar,onFail:()=>ar,onDie:$t,onInterrupt:Xt,onSequential:ht,onParallel:ti}),fE=e=>fp(e,{onEmpty:ar,onFail:$t,onDie:$t,onInterrupt:Xt,onSequential:ht,onParallel:ti}),dE=(e,t)=>{let n=ot(e),r=ot(t);for(;er(n)&&er(r);){const[s,o]=E(tr(n),ur([wn(),Ht()],([a,u],l)=>{const[f,h]=Ec(l);return H([E(a,Wr(f)),E(u,wt(h))])})),[i,c]=E(tr(r),ur([wn(),Ht()],([a,u],l)=>{const[f,h]=Ec(l);return H([E(a,Wr(f)),E(u,wt(h))])}));if(!z(s,i))return!1;n=o,r=c}return!0},hE=e=>pE(ot(e),Ht()),pE=(e,t)=>{for(;;){const[n,r]=E(e,Td([wn(),Ht()],([o,i],c)=>{const[a,u]=Ec(c);return[E(o,Wr(a)),E(i,wt(u))]})),s=Ph(n)>0?E(t,kt(n)):t;if(lS(r))return Zn(s);e=r,t=s}throw new Error(Po("Cause.flattenCauseLoop"))},lp=m(2,(e,t)=>{const n=[e];for(;n.length>0;){const r=n.pop(),s=t(r);switch(s._tag){case"None":{switch(r._tag){case cr:case ir:{n.push(r.right),n.push(r.left);break}}break}case"Some":return s}}return j()}),Ec=e=>{let t=e;const n=[];let r=wn(),s=Ht();for(;t!==void 0;)switch(t._tag){case kn:{if(n.length===0)return[r,s];t=n.pop();break}case In:{if(r=Vr(r,Pi(t._tag,t.error)),n.length===0)return[r,s];t=n.pop();break}case ds:{if(r=Vr(r,Pi(t._tag,t.defect)),n.length===0)return[r,s];t=n.pop();break}case br:{if(r=Vr(r,Pi(t._tag,t.fiberId)),n.length===0)return[r,s];t=n.pop();break}case cr:{switch(t.left._tag){case kn:{t=t.right;break}case cr:{t=ht(t.left.left,ht(t.left.right,t.right));break}case ir:{t=ti(ht(t.left.left,t.right),ht(t.left.right,t.right));break}default:{s=kt(s,t.right),t=t.left;break}}break}case ir:{n.push(t.right),t=t.left;break}}throw new Error(Po("Cause.evaluateCauseLoop"))},mE={emptyCase:Wu,failCase:tc,dieCase:tc,interruptCase:Wu,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},Sl="SequentialCase",wl="ParallelCase",fp=m(2,(e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:s,onParallel:o,onSequential:i})=>Ua(e,void 0,{emptyCase:()=>n,failCase:(c,a)=>r(a),dieCase:(c,a)=>t(a),interruptCase:(c,a)=>s(a),sequentialCase:(c,a,u)=>i(a,u),parallelCase:(c,a,u)=>o(a,u)})),ur=m(3,(e,t,n)=>{let r=t,s=e;const o=[];for(;s!==void 0;){const i=n(r,s);switch(r=Me(i)?i.value:r,s._tag){case cr:{o.push(s.right),s=s.left;break}case ir:{o.push(s.right),s=s.left;break}default:{s=void 0;break}}s===void 0&&o.length>0&&(s=o.pop())}return r}),Ua=m(3,(e,t,n)=>{const r=[e],s=[];for(;r.length>0;){const i=r.pop();switch(i._tag){case kn:{s.push(Z(n.emptyCase(t)));break}case In:{s.push(Z(n.failCase(t,i.error)));break}case ds:{s.push(Z(n.dieCase(t,i.defect)));break}case br:{s.push(Z(n.interruptCase(t,i.fiberId)));break}case cr:{r.push(i.right),r.push(i.left),s.push(Q({_tag:Sl}));break}case ir:{r.push(i.right),r.push(i.left),s.push(Q({_tag:wl}));break}}}const o=[];for(;s.length>0;){const i=s.pop();switch(i._tag){case"Left":{switch(i.left._tag){case Sl:{const c=o.pop(),a=o.pop(),u=n.sequentialCase(t,c,a);o.push(u);break}case wl:{const c=o.pop(),a=o.pop(),u=n.parallelCase(t,c,a);o.push(u);break}}break}case"Right":{o.push(i.right);break}}}if(o.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return o.pop()}),Sr=(e,t)=>ja(e)?"All fibers interrupted without errors.":hp(e).map(function(n){return t?.renderErrorCause!==!0||n.cause===void 0?n.stack:`${n.stack} {
${dp(n.cause,"  ")}
}`}).join(`
`),dp=(e,t)=>{const n=e.stack.split(`
`);let r=`${t}[cause]: ${n[0]}`;for(let s=1,o=n.length;s<o;s++)r+=`
${t}${n[s]}`;return e.cause&&(r+=` {
${dp(e.cause,`${t}  `)}
${t}}`),r};class bo extends globalThis.Error{span=void 0;constructor(t){const n=typeof t=="object"&&t!==null,r=Error.stackTraceLimit;Error.stackTraceLimit=1,super(gE(t),n&&"cause"in t&&typeof t.cause<"u"?{cause:new bo(t.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=r,this.name=t instanceof Error?t.name:"Error",n&&(lr in t&&(this.span=t[lr]),Object.keys(t).forEach(s=>{s in this||(this[s]=t[s])})),this.stack=_E(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:"",this.span)}}const gE=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(G(e,"toString")&&ts(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return ed(e)},yE=/\((.*)\)/g,bE=ne("effect/Tracer/spanToTrace",()=>new WeakMap),_E=(e,t,n)=>{const r=[e],s=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let o=1;o<s.length;o++){if(s[o].includes(" at new BaseEffectError")||s[o].includes(" at new YieldableError")){o++;continue}if(s[o].includes("Generator.next")||s[o].includes("effect_internal_function"))break;r.push(s[o].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let o=n,i=0;for(;o&&o._tag==="Span"&&i<10;){const c=bE.get(o);if(typeof c=="function"){const a=c();if(typeof a=="string"){const u=a.matchAll(yE);let l=!1;for(const[,f]of u)l=!0,r.push(`    at ${o.name} (${f})`);l||r.push(`    at ${o.name} (${a.replace(/^at /,"")})`)}else r.push(`    at ${o.name}`)}else r.push(`    at ${o.name}`);o=It(o.parent),i++}}return r.join(`
`)},lr=Symbol.for("effect/SpanAnnotation"),hp=e=>Ua(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new bo(n)],failCase:(t,n)=>[new bo(n)],interruptCase:()=>[],parallelCase:(t,n,r)=>[...n,...r],sequentialCase:(t,n,r)=>[...n,...r]}),ni="Pending",pp="Done",SE="effect/Deferred",wE=Symbol.for(SE),EE={_E:e=>e,_A:e=>e},kE=e=>({_tag:ni,joiners:e}),OE=e=>({_tag:pp,effect:e});class hs{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new hs(this.self)}}const mp=(e,t)=>{const n=new Pe("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},vE=e=>{const t=new Pe("RunBlocked");return t.effect_instruction_i0=e,t},fr=Symbol.for("effect/Effect");class TE{patch;op;_op=fa;constructor(t,n){this.patch=t,this.op=n}}class Pe{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[fr]=zn;constructor(t){this._op=t}[W](t){return this===t}[X](){return pe(this,ca(this))}pipe(){return q(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Ae(this.effect_instruction_i0),effect_instruction_i1:Ae(this.effect_instruction_i1),effect_instruction_i2:Ae(this.effect_instruction_i2)}}toString(){return Ne(this.toJSON())}[he](){return this.toJSON()}[Symbol.iterator](){return new hs(new ns(this))}}class gp{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[fr]=zn;constructor(t){this._op=t,this._tag=t}[W](t){return za(t)&&t._op==="Failure"&&z(this.effect_instruction_i0,t.effect_instruction_i0)}[X](){return E(we(this._tag),re(L(this.effect_instruction_i0)),pe(this))}get cause(){return this.effect_instruction_i0}pipe(){return q(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return Ne(this.toJSON())}[he](){return this.toJSON()}[Symbol.iterator](){return new hs(new ns(this))}}class yp{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[fr]=zn;constructor(t){this._op=t,this._tag=t}[W](t){return za(t)&&t._op==="Success"&&z(this.effect_instruction_i0,t.effect_instruction_i0)}[X](){return E(we(this._tag),re(L(this.effect_instruction_i0)),pe(this))}get value(){return this.effect_instruction_i0}pipe(){return q(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Ae(this.value)}}toString(){return Ne(this.toJSON())}[he](){return this.toJSON()}[Symbol.iterator](){return new hs(new ns(this))}}const ri=e=>G(e,fr),it=e=>{const t=new Pe(rd);return t.effect_instruction_i0=e,t},RE=m(3,(e,t,n)=>ii(r=>B(e,s=>B(_p(Te(()=>r(t(s)))),o=>Te(()=>n(s,o)).pipe(dr({onFailure:i=>{switch(o._tag){case pt:return Ot(ht(o.effect_instruction_i0,i));case mt:return Ot(i)}},onSuccess:()=>o})))))),ps=m(2,(e,t)=>B(e,()=>le(t))),ms=e=>ps(e,void 0),bp=function(){const e=new Pe(Do);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(Po("you're not supposed to end up here"))}return e},_o=(e,t=sr)=>{const n=new Pe(jr);let r;return n.effect_instruction_i0=s=>{r=e(s)},n.effect_instruction_i1=t,vp(n,s=>ri(r)?r:vt)},AE=(e,t=sr)=>Te(()=>_o(e,t)),Xr=(e,t=sr)=>bp(e,function(){let n,r;function s(a){n?n(a):r===void 0&&(r=a)}const o=new Pe(jr);o.effect_instruction_i0=a=>{n=a,r&&a(r)},o.effect_instruction_i1=t;let i,c;return this.effect_instruction_i0.length!==1?(c=new AbortController,i=Je(()=>this.effect_instruction_i0(s,c.signal))):i=Je(()=>this.effect_instruction_i0(s)),i||c?vp(o,a=>(c&&c.abort(),i??vt)):o}),kc=m(2,(e,t)=>gs(e,{onFailure:t,onSuccess:le})),El=Symbol.for("effect/OriginalAnnotation"),Va=(e,t)=>Me(t)?new Proxy(e,{has(n,r){return r===lr||r===El||r in n},get(n,r){return r===lr?t.value:r===El?e:n[r]}}):e,kl=e=>Rn(e)&&!(lr in e)?it(t=>Ot($t(Va(e,Ga(t))))):Ot($t(e)),FE=e=>IE(()=>$t(new ik(e))),So=e=>gs(e,{onFailure:t=>le(Q(t)),onSuccess:t=>le(Z(t))}),_p=e=>$E(e,{onFailure:de,onSuccess:Ee}),Ke=e=>Rn(e)&&!(lr in e)?it(t=>Ot(yo(Va(e,Ga(t))))):Ot(yo(e)),Sp=e=>B(V(e),Ke),Ot=e=>{const t=new gp(pt);return t.effect_instruction_i0=e,t},IE=e=>B(V(e),Ot),NE=it(e=>le(e.id())),wp=e=>it(t=>e(t.id())),B=m(2,(e,t)=>{const n=new Pe(io);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),xE=e=>{const t=new Pe("OnStep");return t.effect_instruction_i0=e,t},Ep=e=>B(e,ke),CE=e=>gs(e,{onFailure:le,onSuccess:Ke}),$E=m(2,(e,t)=>dr(e,{onFailure:n=>le(t.onFailure(n)),onSuccess:n=>le(t.onSuccess(n))})),dr=m(2,(e,t)=>{const n=new Pe(co);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),gs=m(2,(e,t)=>dr(e,{onFailure:n=>{if(iE(n).length>0)return Ot(fE(n));const s=oE(n);return s.length>0?t.onFailure(wh(s)):Ot(n)},onSuccess:t.onSuccess})),Qt=m(2,(e,t)=>Te(()=>{const n=be(e),r=Vo(n.length);let s=0;return ps(qa({while:()=>s<n.length,body:()=>t(n[s],s),step:o=>{r[s++]=o}}),r)})),si=m(2,(e,t)=>Te(()=>{const n=be(e);let r=0;return qa({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})),kp=e=>{const t=new Pe(ss);return t.effect_instruction_i0=L0(yr),t.effect_instruction_i1=()=>e,t},Ye=m(2,(e,t)=>B(e,n=>V(()=>t(n)))),Op=m(2,(e,t)=>gs(e,{onFailure:n=>Sp(()=>t.onFailure(n)),onSuccess:n=>V(()=>t.onSuccess(n))})),oi=m(2,(e,t)=>dr(e,{onFailure:n=>{const r=uE(n);switch(r._tag){case"Left":return Sp(()=>t(r.left));case"Right":return Ot(r.right)}},onSuccess:le})),Ba=m(2,(e,t)=>ii(n=>dr(n(e),{onFailure:r=>{const s=de(r);return dr(t(s),{onFailure:o=>de(ht(r,o)),onSuccess:()=>s})},onSuccess:r=>{const s=Ee(r);return ci(t(s),s)}}))),vp=m(2,(e,t)=>Ba(e,Dp({onFailure:n=>ja(n)?ms(t(cE(n))):vt,onSuccess:()=>vt}))),le=e=>{const t=new yp(mt);return t.effect_instruction_i0=e,t},Te=e=>{const t=new Pe(Do);return t.commit=e,t},V=e=>{const t=new Pe(nd);return t.effect_instruction_i0=e,t},Tp=m(e=>e.length===3||e.length===2&&!(Rn(e[1])&&"onlyEffect"in e[1]),(e,t)=>B(e,n=>{const r=typeof t=="function"?t(n):t;return ri(r)?ps(r,n):Ty(r)?_o(s=>{r.then(o=>s(le(n)),o=>s(Ke(new uk(o,"An unknown error occurred in Effect.tap"))))}):le(n)})),ME=e=>it(t=>{const n=t.getFiberRef(vc),r=E(n,xe(()=>t.scope()));return e(ai(vc,H(r)))}),Rp=e=>{const t=new Pe(ss);return t.effect_instruction_i0=sp(yr),t.effect_instruction_i1=()=>e,t},ii=e=>bp(e,function(){const t=new Pe(ss);return t.effect_instruction_i0=sp(yr),t.effect_instruction_i1=n=>np(n)?Je(()=>this.effect_instruction_i0(kp)):Je(()=>this.effect_instruction_i0(Rp)),t}),vt=le(void 0),PE=e=>{const t=new Pe(ss);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},qa=e=>{const t=new Pe(ao);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},Ka=e=>{const t=new Pe(js);return typeof e?.priority<"u"?ZE(t,e.priority):t},Ap=m(2,(e,t)=>B(e,n=>Ye(t,r=>[n,r]))),Fp=m(2,(e,t)=>B(e,n=>ps(t,n))),ci=m(2,(e,t)=>B(e,()=>t)),LE=e=>B(NE,t=>E(e,Ip(t))),Ip=m(2,(e,t)=>B(e.interruptAsFork(t),()=>e.await)),DE={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return q(this,arguments)}},jE={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return q(this,arguments)}},UE={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return q(this,arguments)}},Np={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return q(this,arguments)}},xp={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return q(this,arguments)}},Cp={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return q(this,arguments)}},VE={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return q(this,arguments)}},BE={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return q(this,arguments)}},qE="effect/FiberRef",KE=Symbol.for(qE),JE={_A:e=>e},Ja=e=>it(t=>Ee(t.getFiberRef(e))),Ha=m(2,(e,t)=>B(Ja(e),t)),Ol=m(2,(e,t)=>HE(e,()=>[void 0,t])),HE=m(2,(e,t)=>it(n=>{const[r,s]=t(n.getFiberRef(e));return n.setFiberRef(e,s),le(r)})),ai=m(3,(e,t,n)=>RE(Fp(Ja(t),Ol(t,n)),()=>e,r=>Ol(t,r))),Ze=(e,t)=>wr(e,{differ:Qh(),fork:t?.fork??ke,join:t?.join}),WE=e=>{const t=E0();return wr(e,{differ:t,fork:t.empty})},zE=e=>{const t=k0(Qh());return wr(e,{differ:t,fork:t.empty})},$p=e=>{const t=w0();return wr(e,{differ:t,fork:t.empty})},wr=(e,t)=>({...is,[KE]:JE,initial:e,commit(){return Ja(this)},diff:(r,s)=>t.differ.diff(r,s),combine:(r,s)=>t.differ.combine(r,s),patch:r=>s=>t.differ.patch(r,s),fork:t.fork,join:t.join??((r,s)=>s)}),GE=e=>wr(e,{differ:yl,fork:yl.empty}),ys=ne(Symbol.for("effect/FiberRef/currentContext"),()=>$p(ka())),ui=ne(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Ze(0)),Mp=ne(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Ze(2048)),YE=ne(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Ze(Ma())),XE=ne(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Ze(xp)),QE=ne(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Ze(or())),ZE=m(2,(e,t)=>ai(e,ui,t)),ek=ne(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Ze("unbounded")),tk=ne(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Ze(!0)),nk=ne(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Ze(H(Cp))),rk=ne(Symbol.for("effect/FiberRef/versionMismatchErrorLogLevel"),()=>Ze(H(Np))),Oc=ne(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>zE(Gn())),vc=ne(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Ze(j(),{fork:()=>j(),join:(e,t)=>e})),Ns=ne(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Ze(ar,{fork:()=>ar,join:(e,t)=>e})),sk=(e,t)=>e.addFinalizer(()=>ms(t)),ok=(e,t)=>e.close(t),li=(e,t)=>e.fork(t),Wa=function(){class e extends globalThis.Error{commit(){return Ke(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[he](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?Sr(yo(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,Yy),e}(),Pp=(e,t)=>{class n extends Wa{_tag=t}return Object.assign(n.prototype,e),n.prototype.name=t,n},vl=Symbol.for("effect/Cause/errors/RuntimeException"),ik=Pp({[vl]:vl},"RuntimeException"),ck=Symbol.for("effect/Cause/errors/InterruptedException"),ak=e=>G(e,ck),Tl=Symbol.for("effect/Cause/errors/NoSuchElement"),Lp=Pp({[Tl]:Tl},"NoSuchElementException"),Rl=Symbol.for("effect/Cause/errors/UnknownException"),uk=function(){class e extends Wa{_tag="UnknownException";error;constructor(n,r){super(r??"An unknown error occurred",{cause:n}),this.error=n}}return Object.assign(e.prototype,{[Rl]:Rl,name:"UnknownException"}),e}(),za=e=>ri(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),lk=e=>e._tag==="Success",Al=(e,t)=>pk(e,t?.parallel?ti:ht),fk=e=>de($t(e)),Fl=e=>de(yo(e)),de=e=>{const t=new gp(pt);return t.effect_instruction_i0=e,t},dk=e=>de(Xt(e)),Ui=m(2,(e,t)=>{switch(e._tag){case pt:return de(e.effect_instruction_i0);case mt:return Ee(t(e.effect_instruction_i0))}}),Dp=m(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case pt:return t(e.effect_instruction_i0);case mt:return n(e.effect_instruction_i0)}}),Ee=e=>{const t=new yp(mt);return t.effect_instruction_i0=e,t},un=Ee(void 0),hk=m(3,(e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case pt:switch(t._tag){case mt:return de(e.effect_instruction_i0);case pt:return de(n(e.effect_instruction_i0,t.effect_instruction_i0))}case mt:switch(t._tag){case mt:return Ee(r(e.effect_instruction_i0,t.effect_instruction_i0));case pt:return de(t.effect_instruction_i0)}}}),pk=(e,t)=>{const n=Sh(e);return er(n)?E(an(n),Td(E(tr(n),Ui(ot)),(r,s)=>E(r,hk(s,{onSuccess:(o,i)=>E(o,kt(i)),onFailure:t}))),Ui(Zn),Ui(r=>pn(r)),H):j()},mk=e=>({...is,[wE]:EE,state:Dh(kE([])),commit(){return jp(this)},blockingOn:e}),jp=e=>AE(t=>{const n=Qo(e.state);switch(n._tag){case pp:return t(n.effect);case ni:return n.joiners.push(t),gk(e,t)}},e.blockingOn),Up=(e,t)=>{const n=Qo(e.state);if(n._tag===ni){jh(e.state,OE(t));for(let r=0,s=n.joiners.length;r<s;r++)n.joiners[r](t)}},gk=(e,t)=>V(()=>{const n=Qo(e.state);if(n._tag===ni){const r=n.joiners.indexOf(t);r>=0&&n.joiners.splice(r,1)}}),yk=it(e=>Ee(e.currentContext)),bk=()=>yk,bs=e=>B(bk(),e),_k=m(2,(e,t)=>ai(ys,t)(e)),Sk=m(2,(e,t)=>bs(n=>_k(e,t(n)))),Ga=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?H(t):j()},wk=lk,Il=Symbol.for("effect/MutableHashMap"),Ek={[Il]:Il,[Symbol.iterator](){return new Ya(this)},toString(){return Ne(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Ae)}},[he](){return this.toJSON()},pipe(){return q(this,arguments)}};class Ya{self;referentialIterator;bucketIterator;constructor(t){this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new kk(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new Ya(this.self)}}class kk{backing;constructor(t){this.backing=t}currentBucket;next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const Ok=()=>{const e=Object.create(Ek);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},on=m(2,(e,t)=>{if(oo(t)===!1)return e.referential.has(t)?H(e.referential.get(t)):j();const n=t[X](),r=e.buckets.get(n);return r===void 0?j():vk(e,r,t)}),vk=(e,t,n,r=!1)=>{for(let s=0,o=t.length;s<o;s++)if(n[W](t[s][0])){const i=t[s][1];return r&&(t.splice(s,1),e.bucketsSize--),H(i)}return j()},Fr=m(2,(e,t)=>Me(on(e,t))),Ir=m(3,(e,t,n)=>{if(oo(t)===!1)return e.referential.set(t,n),e;const r=t[X](),s=e.buckets.get(r);return s===void 0?(e.buckets.set(r,[[t,n]]),e.bucketsSize++,e):(Tk(e,s,t),s.push([t,n]),e.bucketsSize++,e)}),Tk=(e,t,n)=>{for(let r=0,s=t.length;r<s;r++)if(n[W](t[r][0])){t.splice(r,1),e.bucketsSize--;return}},Rk="effect/Clock",Nl=Symbol.for(Rk),Xa=Fn("effect/Clock"),Ak=2**31-1,xl={unsafeSchedule(e,t){const n=fc(t);if(n>Ak)return tc;let r=!1;const s=setTimeout(()=>{r=!0,e()},n);return()=>(clearTimeout(s),!r)}},Cl=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t;return()=>(t===void 0&&(t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6))),t+BigInt(Math.round(performance.now()*1e6)))}(),Fk=function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return Cl;const t=Cl()-e.bigint();return()=>t+e.bigint()}();class Ik{[Nl]=Nl;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return Fk()}currentTimeMillis=V(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=V(()=>this.unsafeCurrentTimeNanos());scheduler(){return le(xl)}sleep(t){return Xr(n=>{const r=xl.unsafeSchedule(()=>n(vt),t);return ms(V(r))})}}const Nk=()=>new Ik,Vp="And",Bp="Or",qp="InvalidData",Kp="MissingData",Jp="SourceUnavailable",Hp="Unsupported",xk="effect/ConfigError",$l=Symbol.for(xk),Er={_tag:"ConfigError",[$l]:$l},Wp=(e,t)=>{const n=Object.create(Er);return n._op=Vp,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},zp=(e,t)=>{const n=Object.create(Er);return n._op=Bp,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},Ck=(e,t,n={pathDelim:"."})=>{const r=Object.create(Er);return r._op=qp,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${E(this.path,pr(n.pathDelim))}: "${this.message}")`}}),r},On=(e,t,n={pathDelim:"."})=>{const r=Object.create(Er);return r._op=Kp,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${E(this.path,pr(n.pathDelim))}: "${this.message}")`}}),r},$k=(e,t,n,r={pathDelim:"."})=>{const s=Object.create(Er);return s._op=Jp,s.path=e,s.message=t,s.cause=n,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${E(this.path,pr(r.pathDelim))}: "${this.message}")`}}),s},Mk=(e,t,n={pathDelim:"."})=>{const r=Object.create(Er);return r._op=Hp,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${E(this.path,pr(n.pathDelim))}: "${this.message}")`}}),r},ln=m(2,(e,t)=>{switch(e._op){case Vp:return Wp(ln(e.left,t),ln(e.right,t));case Bp:return zp(ln(e.left,t),ln(e.right,t));case qp:return Ck([...t,...e.path],e.message);case Kp:return On([...t,...e.path],e.message);case Jp:return $k([...t,...e.path],e.message,e.cause);case Hp:return Mk([...t,...e.path],e.message)}}),Pk={_tag:"Empty"},Vi=m(2,(e,t)=>{let n=Pa(t),r=e;for(;Fw(n);){const s=n.head;switch(s._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=En(s.first,En(s.second,n.tail));break}case"MapName":{r=Bn(r,s.f),n=n.tail;break}case"Nested":{r=uo(r,s.name),n=n.tail;break}case"Unnested":{if(E(Ur(r),gb(s.name)))r=_n(r),n=n.tail;else return Q(On(r,`Expected ${s.name} to be in path in ConfigProvider#unnested`));break}}}return Z(r)}),Lk="Constant",Dk="Fail",jk="Fallback",Uk="Described",Vk="Lazy",Bk="MapOrFail",qk="Nested",Kk="Primitive",Jk="Sequence",Hk="HashMap",Wk="ZipWith";var Ml={};const wo=(e,t)=>[...e,...t],zk="effect/ConfigProvider",Pl=Symbol.for(zk),Gk=Fn("effect/ConfigProvider"),Yk="effect/ConfigProviderFlat",Ll=Symbol.for(Yk),Xk=e=>({[Pl]:Pl,pipe(){return q(this,arguments)},...e}),Qk=e=>({[Ll]:Ll,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),Zk=e=>Xk({load:t=>B(ft(e,Gn(),t,!1),n=>st(Ur(n),{onNone:()=>Ke(On(Gn(),`Expected a single value having structure: ${t}`)),onSome:le})),flattened:e}),eO=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),r=a=>E(a,pr(t)),s=a=>a.split(t),o=()=>typeof process<"u"&&"env"in process&&typeof Ml=="object"?Ml:{};return Zk(Qk({load:(a,u,l=!0)=>{const f=r(a),h=o(),b=f in h?H(h[f]):j();return E(b,oi(()=>On(a,`Expected ${f} to exist in the process context`)),B(p=>oO(p,a,u,n,l)))},enumerateChildren:a=>V(()=>{const u=o(),h=Object.keys(u).map(b=>s(b.toUpperCase())).filter(b=>{for(let p=0;p<a.length;p++){const S=E(a,Ed(p)),y=b[p];if(y===void 0||S!==y)return!1}return!0}).flatMap(b=>b.slice(a.length,a.length+1));return lw(h)}),patch:Pk}))},tO=(e,t,n,r)=>{const s=Qu(n.length,a=>a>=r.length?j():H([e(a),a+1])),o=Qu(r.length,a=>a>=n.length?j():H([t(a),a+1])),i=wo(n,s),c=wo(r,o);return[i,c]},nO=(e,t)=>{let n=t;if(n._tag==="Nested"){const r=e.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return e},ft=(e,t,n,r)=>{const s=n;switch(s._tag){case Lk:return le(yt(s.value));case Uk:return Te(()=>ft(e,t,s.config,r));case Dk:return Ke(On(t,s.message));case jk:return E(Te(()=>ft(e,t,s.first,r)),kc(o=>s.condition(o)?E(ft(e,t,s.second,r),kc(i=>Ke(zp(o,i)))):Ke(o)));case Vk:return Te(()=>ft(e,t,s.config(),r));case Bk:return Te(()=>E(ft(e,t,s.original,r),B(Qt(o=>E(s.mapOrFail(o),oi(ln(nO(t,s.original))))))));case qk:return Te(()=>ft(e,wo(t,yt(s.name)),s.config,r));case Kk:return E(Vi(t,e.patch),B(o=>E(e.load(o,s,r),B(i=>{if(i.length===0){const c=E(Ab(o),xe(()=>"<n/a>"));return Ke(On([],`Expected ${s.description} with name ${c}`))}return le(i)}))));case Jk:return E(Vi(t,e.patch),B(o=>E(e.enumerateChildren(o),B(cO),B(i=>i.length===0?Te(()=>Ye(ft(e,t,s.config,!0),yt)):E(Qt(i,c=>ft(e,Eb(t,`[${c}]`),s.config,!0)),Ye(c=>{const a=vd(c);return a.length===0?yt(Gn()):yt(a)}))))));case Hk:return Te(()=>E(Vi(t,e.patch),B(o=>E(e.enumerateChildren(o),B(i=>E(i,Qt(c=>ft(e,wo(o,yt(c)),s.valueConfig,r)),Ye(c=>c.length===0?yt(Ma()):E(iO(c),Bn(a=>Sw(Xu(be(i),a)))))))))));case Wk:return Te(()=>E(ft(e,t,s.left,r),So,B(o=>E(ft(e,t,s.right,r),So,B(i=>{if($e(o)&&$e(i))return Ke(Wp(o.left,i.left));if($e(o)&&Kt(i))return Ke(o.left);if(Kt(o)&&$e(i))return Ke(i.left);if(Kt(o)&&Kt(i)){const c=E(t,pr(".")),a=rO(t,c),[u,l]=tO(a,a,E(o.right,Bn(Z)),E(i.right,Bn(Z)));return E(u,Xu(l),Qt(([f,h])=>E(Ap(f,h),Ye(([b,p])=>s.zip(b,p)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},rO=(e,t)=>n=>Q(On(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),sO=(e,t)=>e.split(new RegExp(`\\s*${lo(t)}\\s*`)),oO=(e,t,n,r,s)=>s?E(sO(e,r),Qt(o=>n.parse(o.trim())),oi(ln(t))):E(n.parse(e),Op({onFailure:ln(t),onSuccess:yt})),iO=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),cO=e=>E(Qt(e,uO),Op({onFailure:()=>Gn(),onSuccess:Kr(Yn)}),So,Ye(ab)),aO=/^(\[(\d+)\])$/,uO=e=>{const t=e.match(aO);if(t!==null){const n=t[2];return E(n!==void 0&&n.length>0?H(n):j(),Uo(lO))}return j()},lO=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?j():H(t)},Dl=Symbol.for("effect/Console"),Gp=Fn("effect/Console"),fO={[Dl]:Dl,assert(e,...t){return V(()=>{console.assert(e,...t)})},clear:V(()=>{console.clear()}),count(e){return V(()=>{console.count(e)})},countReset(e){return V(()=>{console.countReset(e)})},debug(...e){return V(()=>{console.debug(...e)})},dir(e,t){return V(()=>{console.dir(e,t)})},dirxml(...e){return V(()=>{console.dirxml(...e)})},error(...e){return V(()=>{console.error(...e)})},group(e){return e?.collapsed?V(()=>console.groupCollapsed(e?.label)):V(()=>console.group(e?.label))},groupEnd:V(()=>{console.groupEnd()}),info(...e){return V(()=>{console.info(...e)})},log(...e){return V(()=>{console.log(...e)})},table(e,t){return V(()=>{console.table(e,t)})},time(e){return V(()=>console.time(e))},timeEnd(e){return V(()=>console.timeEnd(e))},timeLog(e,...t){return V(()=>{console.timeLog(e,...t)})},trace(...e){return V(()=>{console.trace(...e)})},warn(...e){return V(()=>{console.warn(...e)})},unsafe:console},dO="effect/Random",jl=Symbol.for(dO),hO=Fn("effect/Random");class pO{seed;[jl]=jl;PRNG;constructor(t){this.seed=t,this.PRNG=new Cy(t)}get next(){return V(()=>this.PRNG.number())}get nextBoolean(){return Ye(this.next,t=>t>.5)}get nextInt(){return V(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return Ye(this.next,r=>(n-t)*r+t)}nextIntBetween(t,n){return V(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return mO(t,n=>this.nextIntBetween(0,n))}}const mO=(e,t)=>Te(()=>E(V(()=>Array.from(e)),B(n=>{const r=[];for(let s=n.length;s>=2;s=s-1)r.push(s);return E(r,si(s=>E(t(s),Ye(o=>gO(n,s-1,o)))),ps(Sh(n)))}))),gO=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},yO=e=>new pO(L(e)),Ul=Symbol.for("effect/Tracer"),bO=e=>({[Ul]:Ul,...e}),Yp=Fn("effect/Tracer"),Xp=Fn("effect/ParentSpan"),Vl=function(){const e="abcdef0123456789",t=e.length;return function(n){let r="";for(let s=0;s<n;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}}();class _O{name;parent;context;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];links;constructor(t,n,r,s,o,i){this.name=t,this.parent=n,this.context=r,this.startTime=o,this.kind=i,this.status={_tag:"Started",startTime:o},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:Vl(32),this.spanId=Vl(16),this.links=Array.from(s)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,r){this.events.push([t,n,r??{}])}addLinks(t){this.links.push(...t)}}const SO=bO({span:(e,t,n,r,s,o)=>new _O(e,t,n,r,s,o),context:e=>e()}),wO=E(ka(),Ar(Xa,Nk()),Ar(Gp,fO),Ar(hO,yO(Math.random())),Ar(Gk,eO()),Ar(Yp,SO)),Eo=ne(Symbol.for("effect/DefaultServices/currentServices"),()=>$p(wO));function EO(e){return new nn(e)}function kO(){return EO(new Map)}const Bl=Symbol.for("effect/FiberRefs");class nn{locals;[Bl]=Bl;constructor(t){this.locals=t}pipe(){return q(this,arguments)}}const OO=(e,t,n,r=!1)=>{const s=e;let o=t,i=n,c=r,a;for(;a===void 0;)if(Fe(o)&&Fe(i)){const u=He(o)[0],l=_n(o),f=He(i)[0],h=He(i)[1],b=_n(i);u.startTimeMillis<f.startTimeMillis?(i=b,c=!0):u.startTimeMillis>f.startTimeMillis?o=l:u.id<f.id?(i=b,c=!0):u.id>f.id?o=l:a=[h,c]}else a=[s.initial,!0];return a},vO=m(3,(e,t,n)=>{const r=new Map(e.locals);return n.locals.forEach((s,o)=>{const i=s[0][1];if(!s[0][0][W](t)){if(!r.has(o)){if(z(i,o.initial))return;r.set(o,[[t,o.join(o.initial,i)]]);return}const c=r.get(o),[a,u]=OO(o,c,s);if(u){const l=o.diff(a,i),f=c[0][1],h=o.join(f,o.patch(l)(f));if(!z(f,h)){let b;const p=c[0][0];p[W](t)?b=[[p,h],...c.slice(1)]:b=[[t,h],...c],r.set(o,b)}}}}),new nn(r)}),TO=m(2,(e,t)=>{const n=new Map;return Qp(e,n,t),new nn(n)}),Qp=(e,t,n)=>{e.locals.forEach((r,s)=>{const o=r[0][1],i=s.patch(s.fork)(o);z(o,i)?t.set(s,r):t.set(s,[[n,i],...r])})},Zp=m(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new nn(n)}),RO=m(2,(e,t)=>e.locals.has(t)?H(He(e.locals.get(t))[1]):j()),Qr=m(2,(e,t)=>E(RO(e,t),xe(()=>t.initial))),Tc=m(2,(e,{fiberId:t,fiberRef:n,value:r})=>{if(e.locals.size===0)return new nn(new Map([[n,[[t,r]]]]));const s=new Map(e.locals);return Rc(s,t,n,r),new nn(s)}),Rc=(e,t,n,r)=>{const s=e.get(n)??[];let o;if(Fe(s)){const[i,c]=He(s);if(i[W](t)){if(z(c,r))return;o=[[t,r],...s.slice(1)]}else o=[[t,r],...s]}else o=[[t,r]];e.set(n,o)},AO=m(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new nn(new Map(t));const r=new Map(e.locals);return n!==void 0&&Qp(e,r,n),t.forEach(([s,o])=>{o.length===1?Rc(r,o[0][0],s,o[0][1]):o.forEach(([i,c])=>{Rc(r,i,s,c)})}),new nn(r)}),FO=Qr,IO=AO,NO=kO,xO=DE,CO=jE,$O=UE,MO=Np,PO=xp,LO=Cp,DO=VE,jO=BE,UO=E(Yn,bd(e=>e.ordinal)),VO=lb(UO),BO=e=>{switch(e){case"All":return xO;case"Debug":return LO;case"Error":return $O;case"Fatal":return CO;case"Info":return PO;case"Trace":return DO;case"None":return jO;case"Warning":return MO}},em=e=>e.replace(/[\s="]/g,"_"),qO=e=>t=>`${em(t.label)}=${e-t.startTime}ms`,KO=os,JO=Xy;class HO extends JO{}const tm="Empty",nm="Add",rm="Remove",sm="Update",om="AndThen",WO={_tag:tm},zO=(e,t)=>{const n=new Map(e.locals);let r=WO;for(const[s,o]of t.locals.entries()){const i=He(o)[1],c=n.get(s);if(c!==void 0){const a=He(c)[1];z(a,i)||(r=Bi({_tag:sm,fiberRef:s,patch:s.diff(a,i)})(r))}else r=Bi({_tag:nm,fiberRef:s,value:i})(r);n.delete(s)}for(const[s]of n.entries())r=Bi({_tag:rm,fiberRef:s})(r);return r},Bi=m(2,(e,t)=>({_tag:om,first:e,second:t})),GO=m(3,(e,t,n)=>{let r=n,s=yt(e);for(;Fe(s);){const o=He(s),i=_n(s);switch(o._tag){case tm:{s=i;break}case nm:{r=Tc(r,{fiberId:t,fiberRef:o.fiberRef,value:o.value}),s=i;break}case rm:{r=Zp(r,o.fiberRef),s=i;break}case sm:{const c=Qr(r,o.fiberRef);r=Tc(r,{fiberId:t,fiberRef:o.fiberRef,value:o.fiberRef.patch(o.patch)(c)}),s=i;break}case om:{s=uo(o.first)(uo(o.second)(i));break}}}return r}),im="effect/MetricLabel",Ac=Symbol.for(im);class YO{key;value;[Ac]=Ac;_hash;constructor(t,n){this.key=t,this.value=n,this._hash=we(im+this.key+this.value)}[X](){return this._hash}[W](t){return QO(t)&&this.key===t.key&&this.value===t.value}pipe(){return q(this,arguments)}}const XO=(e,t)=>new YO(e,t),QO=e=>G(e,Ac),ZO=m(2,(e,t)=>gs(e,{onFailure:n=>le(t.onFailure(n)),onSuccess:n=>le(t.onSuccess(n))})),ev="Sequential",tv="Parallel",nv="ParallelN",cm={_tag:ev},rv={_tag:tv},sv=e=>({_tag:nv,parallelism:e}),Fc=cm,Ic=rv,Nc=sv,ov=zO,iv=GO,fi="effect/FiberStatus",vn=Symbol.for(fi),ko="Done",ql="Running",Kl="Suspended",cv=we(`${fi}-${ko}`);class av{[vn]=vn;_tag=ko;[X](){return cv}[W](t){return Qa(t)&&t._tag===ko}}class uv{runtimeFlags;[vn]=vn;_tag=ql;constructor(t){this.runtimeFlags=t}[X](){return E(L(fi),re(L(this._tag)),re(L(this.runtimeFlags)),pe(this))}[W](t){return Qa(t)&&t._tag===ql&&this.runtimeFlags===t.runtimeFlags}}class lv{runtimeFlags;blockingOn;[vn]=vn;_tag=Kl;constructor(t,n){this.runtimeFlags=t,this.blockingOn=n}[X](){return E(L(fi),re(L(this._tag)),re(L(this.runtimeFlags)),re(L(this.blockingOn)),pe(this))}[W](t){return Qa(t)&&t._tag===Kl&&this.runtimeFlags===t.runtimeFlags&&z(this.blockingOn,t.blockingOn)}}const fv=new av,dv=e=>new uv(e),hv=(e,t)=>new lv(e,t),Qa=e=>G(e,vn),pv=e=>e._tag===ko,mv=fv,am=dv,gv=hv,yv=pv,bv=Symbol.for("effect/Micro"),Oo=Symbol.for("effect/Micro/MicroExit"),Jl=Symbol.for("effect/Micro/MicroCause"),_v={_E:ke};class um extends globalThis.Error{_tag;traces;[Jl];constructor(t,n,r){const s=`MicroCause.${t}`;let o,i,c;if(n instanceof globalThis.Error){o=`(${s}) ${n.name}`,i=n.message;const a=i.split(`
`).length;c=n.stack?`(${s}) ${n.stack.split(`
`).slice(0,a+3).join(`
`)}`:`${o}: ${i}`}else o=s,i=Wn(n,0),c=`${o}: ${i}`;r.length>0&&(c+=`
    ${r.join(`
    `)}`),super(i),this._tag=t,this.traces=r,this[Jl]=_v,this.name=o,this.stack=c}pipe(){return q(this,arguments)}toString(){return this.stack}[he](){return this.stack}}class Sv extends um{defect;constructor(t,n=[]){super("Die",t,n),this.defect=t}}const wv=(e,t=[])=>new Sv(e,t);class Ev extends um{constructor(t=[]){super("Interrupt","interrupted",t)}}const kv=(e=[])=>new Ev(e),Ov=e=>e._tag==="Interrupt",Hl=Symbol.for("effect/Micro/MicroFiber"),vv={_A:ke,_E:ke};class Tv{context;interruptible;[Hl];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(t,n=!0){this.context=t,this.interruptible=n,this[Hl]=vv}getRef(t){return X_(this.context,t)}addObserver(t){return this._exit?(t(this._exit),by):(this._observers.push(t),()=>{const n=this._observers.indexOf(t);n>=0&&this._observers.splice(n,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(ru))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){const s=this._yielded;this._yielded=void 0,s()}const n=this.runLoop(t);if(n===xs)return;const r=Wl.interruptChildren&&Wl.interruptChildren(this);if(r!==void 0)return this.evaluate(To(r,()=>n));this._exit=n;for(let s=0;s<this._observers.length;s++)this._observers[s](n);this._observers.length=0}runLoop(t){let n=!1,r=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(su).shouldYield(this)){n=!0;const s=r;r=To(Nv,()=>s)}if(r=r[xc](this),r===xs){const s=this._yielded;return Oo in s?(this._yielded=void 0,s):xs}}}catch(s){return G(r,xc)?Cc(s):Cc(`MicroFiber.runLoop: Not a valid effect: ${String(r)}`)}}getCont(t){for(;;){const n=this._stack.pop();if(!n)return;const r=n[vo]&&n[vo](this);if(r)return{[t]:r};if(n[t])return n}}_yielded=void 0;yieldWith(t){return this._yielded=t,xs}children(){return this._children??=new Set}}const Wl=ne("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),lm=Symbol.for("effect/Micro/identifier"),Re=Symbol.for("effect/Micro/args"),xc=Symbol.for("effect/Micro/evaluate"),hr=Symbol.for("effect/Micro/successCont"),Hn=Symbol.for("effect/Micro/failureCont"),vo=Symbol.for("effect/Micro/ensureCont"),xs=Symbol.for("effect/Micro/Yield"),Rv={_A:ke,_E:ke,_R:ke},Av={...KO,_op:"Micro",[bv]:Rv,pipe(){return q(this,arguments)},[Symbol.iterator](){return new Yf(new ns(this))},toJSON(){return{_id:"Micro",op:this[lm],...Re in this?{args:this[Re]}:void 0}},toString(){return Ne(this)},[he](){return Ne(this)}};function Fv(e){return Cc("Micro.evaluate: Not implemented")}const di=e=>({...Av,[lm]:e.op,[xc]:e.eval??Fv,[hr]:e.contA,[Hn]:e.contE,[vo]:e.ensure}),Za=e=>{const t=di(e);return function(){const n=Object.create(t);return n[Re]=e.single===!1?arguments:arguments[0],n}},fm=e=>{const t={...di(e),[Oo]:Oo,_tag:e.op,get[e.prop](){return this[Re]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[Re]}},[W](n){return $v(n)&&n._tag===e.op&&z(this[Re],n[Re])},[X](){return pe(this,re(we(e.op))(L(this[Re])))}};return function(n){const r=Object.create(t);return r[Re]=n,r[hr]=void 0,r[Hn]=void 0,r[vo]=void 0,r}},eu=fm({op:"Success",prop:"value",eval(e){const t=e.getCont(hr);return t?t[hr](this[Re],e):e.yieldWith(this)}}),dm=fm({op:"Failure",prop:"cause",eval(e){let t=e.getCont(Hn);for(;Ov(this[Re])&&t&&e.interruptible;)t=e.getCont(Hn);return t?t[Hn](this[Re],e):e.yieldWith(this)}}),Iv=Za({op:"Yield",eval(e){let t=!1;return e.getRef(su).scheduleTask(()=>{t||e.evaluate(Mv)},this[Re]??0),e.yieldWith(()=>{t=!0})}}),Nv=Iv(0),xv=eu(void 0),tu=Za({op:"WithMicroFiber",eval(e){return this[Re](e)}}),To=m(2,(e,t)=>{const n=Object.create(Cv);return n[Re]=e,n[hr]=t,n}),Cv=di({op:"OnSuccess",eval(e){return e._stack.push(this),this[Re]}}),$v=e=>G(e,Oo),hm=eu,nu=dm,ru=nu(kv()),Cc=e=>nu(wv(e)),Mv=hm(void 0),Pv="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class pm{tasks=[];running=!1;scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,Pv(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,r=t.length;n<r;n++)t[n]()}shouldYield(t){return t.currentOpCount>=t.getRef(jv)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const Lv=m(2,(e,t)=>tu(n=>{const r=n.context;return n.context=t(r),Bv(e,()=>(n.context=r,xv))})),Dv=m(2,(e,t)=>Lv(e,mh(t)));class jv extends gh()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class su extends gh()("effect/Micro/currentScheduler",{defaultValue:()=>new pm}){}const Uv=m(2,(e,t)=>{const n=Object.create(Vv);return n[Re]=e,n[hr]=t.onSuccess,n[Hn]=t.onFailure,n}),Vv=di({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[Re]}}),Bv=m(2,(e,t)=>Kv(n=>Uv(n(e),{onFailure:r=>To(t(nu(r)),()=>dm(r)),onSuccess:r=>To(t(hm(r)),()=>eu(r))}))),mm=Za({op:"SetInterruptible",ensure(e){if(e.interruptible=this[Re],e._interrupted&&e.interruptible)return()=>ru}}),qv=e=>tu(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(mm(!1)),t._interrupted?ru:e)),Kv=e=>tu(t=>t.interruptible?(t.interruptible=!1,t._stack.push(mm(!0)),e(qv)):e(ke)),Jv=(e,t)=>{const n=new Tv(su.context(new pm));return n.evaluate(e),n};class gm{buckets=[];scheduleTask(t,n){const r=this.buckets.length;let s,o=0;for(;o<r&&this.buckets[o][0]<=n;o++)s=this.buckets[o];s&&s[0]===n?s[1].push(t):o===r?this.buckets.push([n,[t]]):this.buckets.splice(o,0,[n,[t]])}}class Hv{maxNextTickBeforeTimer;running=!1;tasks=new gm;constructor(t){this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,s]of n)for(let o=0;o<s.length;o++)s[o]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(Mp)?t.getFiberRef(ui):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}const ym=ne(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new Hv(2048));class bm{tasks=new gm;deferred=!1;scheduleTask(t,n){this.deferred?ym.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(Mp)?t.getFiberRef(ui):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let s=0;s<r.length;s++)r[s]()}this.deferred=!0}}const _m=ne(Symbol.for("effect/FiberRef/currentScheduler"),()=>Ze(ym)),Sm=ne(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Ze(new Map)),zl=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return Ha(ek,s=>s==="unbounded"?n():s>1?r(s):t());default:return e>1?r(e):t()}},ou="InterruptSignal",iu="Stateful",cu="Resume",au="YieldNow",qi=e=>({_tag:ou,cause:e}),Hs=e=>({_tag:iu,onFiber:e}),Mn=e=>({_tag:cu,effect:e}),Wv=()=>({_tag:au}),zv="effect/FiberScope",Ro=Symbol.for(zv);class Gv{[Ro]=Ro;fiberId=sr;roots=new Set;add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}class Yv{fiberId;parent;[Ro]=Ro;constructor(t,n){this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(Hs(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}}const Xv=e=>new Yv(e.id(),e),uu=ne(Symbol.for("effect/FiberScope/Global"),()=>new Gv),Qv="effect/Fiber",Zv=Symbol.for(Qv),eT={_E:e=>e,_A:e=>e},tT="effect/Fiber",nT=Symbol.for(tT),wm=e=>Fp(Ep(e.await),e.inheritAll);({...is});const rn="effect/FiberCurrent",rT="effect/Logger",sT=Symbol.for(rT),oT={_Message:e=>e,_Output:e=>e},lu=e=>({[sT]:oT,log:e,pipe(){return q(this,arguments)}}),iT=/^[^\s"=]*$/,cT=(e,t)=>({annotations:n,cause:r,date:s,fiberId:o,logLevel:i,message:c,spans:a})=>{const u=p=>p.match(iT)?p:e(p),l=(p,S)=>`${em(p)}=${u(S)}`,f=(p,S)=>" "+l(p,S);let h=l("timestamp",s.toISOString());h+=f("level",i.label),h+=f("fiber",Vh(o));const b=Sb(c);for(let p=0;p<b.length;p++)h+=f("message",Wn(b[p],t));tE(r)||(h+=f("cause",Sr(r,{renderErrorCause:!0})));for(const p of a)h+=" "+qO(s.getTime())(p);for(const[p,S]of n)h+=f(p,Wn(S,t));return h},aT=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,uT=lu(cT(aT)),lT=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;lT&&process.stdout.isTTY;const Em="effect/MetricBoundaries",$c=Symbol.for(Em);class fT{values;[$c]=$c;constructor(t){this.values=t,this._hash=E(we(Em),re(rs(this.values)))}_hash;[X](){return this._hash}[W](t){return dT(t)&&z(this.values,t.values)}pipe(){return q(this,arguments)}}const dT=e=>G(e,$c),hT=e=>{const t=E(e,Sd(ot(Number.POSITIVE_INFINITY)),Db);return new fT(t)},pT=e=>E(_b(e.count-1,t=>e.start*Math.pow(e.factor,t)),Jo,hT),mT="effect/MetricKeyType",km=Symbol.for(mT),Om="effect/MetricKeyType/Counter",Mc=Symbol.for(Om),gT="effect/MetricKeyType/Frequency",yT=Symbol.for(gT),bT="effect/MetricKeyType/Gauge",_T=Symbol.for(bT),vm="effect/MetricKeyType/Histogram",Pc=Symbol.for(vm),ST="effect/MetricKeyType/Summary",wT=Symbol.for(ST),Tm={_In:e=>e,_Out:e=>e};class ET{incremental;bigint;[km]=Tm;[Mc]=Mc;constructor(t,n){this.incremental=t,this.bigint=n,this._hash=we(Om)}_hash;[X](){return this._hash}[W](t){return Rm(t)}pipe(){return q(this,arguments)}}class kT{boundaries;[km]=Tm;[Pc]=Pc;constructor(t){this.boundaries=t,this._hash=E(we(vm),re(L(this.boundaries)))}_hash;[X](){return this._hash}[W](t){return Am(t)&&z(this.boundaries,t.boundaries)}pipe(){return q(this,arguments)}}const OT=e=>new ET(e?.incremental??!1,e?.bigint??!1),vT=e=>new kT(e),Rm=e=>G(e,Mc),TT=e=>G(e,yT),RT=e=>G(e,_T),Am=e=>G(e,Pc),AT=e=>G(e,wT),FT="effect/MetricKey",Fm=Symbol.for(FT),IT={_Type:e=>e},NT=ga(z);class fu{name;keyType;description;tags;[Fm]=IT;constructor(t,n,r,s=[]){this.name=t,this.keyType=n,this.description=r,this.tags=s,this._hash=E(we(this.name+this.description),re(L(this.keyType)),re(rs(this.tags)))}_hash;[X](){return this._hash}[W](t){return xT(t)&&this.name===t.name&&z(this.keyType,t.keyType)&&z(this.description,t.description)&&NT(this.tags,t.tags)}pipe(){return q(this,arguments)}}const xT=e=>G(e,Fm),CT=(e,t)=>new fu(e,OT(t),jo(t?.description)),$T=(e,t,n)=>new fu(e,vT(t),jo(n)),MT=m(2,(e,t)=>t.length===0?e:new fu(e.name,e.keyType,e.description,Vs(e.tags,t))),PT="effect/MetricState",_s=Symbol.for(PT),Im="effect/MetricState/Counter",Lc=Symbol.for(Im),Nm="effect/MetricState/Frequency",Dc=Symbol.for(Nm),xm="effect/MetricState/Gauge",jc=Symbol.for(xm),Cm="effect/MetricState/Histogram",Uc=Symbol.for(Cm),$m="effect/MetricState/Summary",Vc=Symbol.for($m),Ss={_A:e=>e};class LT{count;[_s]=Ss;[Lc]=Lc;constructor(t){this.count=t}[X](){return E(L(Im),re(L(this.count)),pe(this))}[W](t){return zT(t)&&this.count===t.count}pipe(){return q(this,arguments)}}const DT=ga(z);class jT{occurrences;[_s]=Ss;[Dc]=Dc;constructor(t){this.occurrences=t}_hash;[X](){return E(we(Nm),re(rs(be(this.occurrences.entries()))),pe(this))}[W](t){return GT(t)&&DT(be(this.occurrences.entries()),be(t.occurrences.entries()))}pipe(){return q(this,arguments)}}class UT{value;[_s]=Ss;[jc]=jc;constructor(t){this.value=t}[X](){return E(L(xm),re(L(this.value)),pe(this))}[W](t){return YT(t)&&this.value===t.value}pipe(){return q(this,arguments)}}class VT{buckets;count;min;max;sum;[_s]=Ss;[Uc]=Uc;constructor(t,n,r,s,o){this.buckets=t,this.count=n,this.min=r,this.max=s,this.sum=o}[X](){return E(L(Cm),re(L(this.buckets)),re(L(this.count)),re(L(this.min)),re(L(this.max)),re(L(this.sum)),pe(this))}[W](t){return XT(t)&&z(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return q(this,arguments)}}class BT{error;quantiles;count;min;max;sum;[_s]=Ss;[Vc]=Vc;constructor(t,n,r,s,o,i){this.error=t,this.quantiles=n,this.count=r,this.min=s,this.max=o,this.sum=i}[X](){return E(L($m),re(L(this.error)),re(L(this.quantiles)),re(L(this.count)),re(L(this.min)),re(L(this.max)),re(L(this.sum)),pe(this))}[W](t){return QT(t)&&this.error===t.error&&z(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return q(this,arguments)}}const qT=e=>new LT(e),KT=e=>new jT(e),JT=e=>new UT(e),HT=e=>new VT(e.buckets,e.count,e.min,e.max,e.sum),WT=e=>new BT(e.error,e.quantiles,e.count,e.min,e.max,e.sum),zT=e=>G(e,Lc),GT=e=>G(e,Dc),YT=e=>G(e,jc),XT=e=>G(e,Uc),QT=e=>G(e,Vc),ZT="effect/MetricHook",eR=Symbol.for(ZT),tR={_In:e=>e,_Out:e=>e},ws=e=>({[eR]:tR,pipe(){return q(this,arguments)},...e}),Gl=BigInt(0),nR=e=>{let t=e.keyType.bigint?Gl:0;const n=e.keyType.incremental?e.keyType.bigint?s=>s>=Gl:s=>s>=0:s=>!0,r=s=>{n(s)&&(t=t+s)};return ws({get:()=>qT(t),update:r,modify:r})},rR=e=>{const t=new Map;for(const r of e.keyType.preregisteredWords)t.set(r,0);const n=r=>{const s=t.get(r)??0;t.set(r,s+1)};return ws({get:()=>KT(t),update:n,modify:n})},sR=(e,t)=>{let n=t;return ws({get:()=>JT(n),update:r=>{n=r},modify:r=>{n=n+r}})},oR=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),s=new Float32Array(n);let o=0,i=0,c=Number.MAX_VALUE,a=Number.MIN_VALUE;E(t,Kr(Yn),Bn((f,h)=>{s[h]=f}));const u=f=>{let h=0,b=n;for(;h!==b;){const p=Math.floor(h+(b-h)/2),S=s[p];f<=S?b=p:h=p,b===h+1&&(f<=s[h]?b=h:h=b)}r[h]=r[h]+1,o=o+1,i=i+f,f<c&&(c=f),f>a&&(a=f)},l=()=>{const f=Vo(n);let h=0;for(let b=0;b<n;b++){const p=s[b],S=r[b];h=h+S,f[b]=[p,h]}return f};return ws({get:()=>HT({buckets:l(),count:o,min:c,max:a,sum:i}),update:u,modify:u})},iR=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:s}=e.keyType,o=E(s,Kr(Yn)),i=Vo(r);let c=0,a=0,u=0,l=0,f=0;const h=p=>{const S=[];let y=0;for(;y!==r-1;){const O=i[y];if(O!=null){const[k,T]=O,F=lc(p-k);RS(F,Oh)&&TS(F,n)&&S.push(T)}y=y+1}return cR(t,o,Kr(S,Yn))},b=(p,S)=>{if(r>0){c=c+1;const y=c%r;i[y]=[S,p]}l=a===0?p:Math.min(l,p),f=a===0?p:Math.max(f,p),a=a+1,u=u+p};return ws({get:()=>WT({error:t,quantiles:h(Date.now()),count:a,min:l,max:f,sum:u}),update:([p,S])=>b(p,S),modify:([p,S])=>b(p,S)})},cR=(e,t,n)=>{const r=n.length;if(!Fe(t))return Gn();const s=t[0],o=t.slice(1),i=Yl(e,r,j(),0,s,n),c=yt(i);return o.forEach(a=>{c.push(Yl(e,r,i.value,i.consumed,a,i.rest))}),Bn(c,a=>[a.quantile,a.value])},Yl=(e,t,n,r,s,o)=>{let i=e,c=t,a=n,u=r,l=s,f=o,h=e,b=t,p=n,S=r,y=s,O=o;for(;;){if(!Fe(f))return{quantile:l,value:j(),consumed:u,rest:[]};if(l===1)return{quantile:l,value:H(kd(f)),consumed:u+f.length,rest:[]};const k=He(f),T=Ib(f,$=>$===k),F=l*c,I=i/2*F,x=u+T[0].length,M=Math.abs(x-F);if(x<F-I){h=i,b=c,p=Ur(f),S=x,y=l,O=T[1],i=h,c=b,a=p,u=S,l=y,f=O;continue}if(x>F+I){const $=Ie(a)?H(k):a;return{quantile:l,value:$,consumed:u,rest:f}}switch(a._tag){case"None":{h=i,b=c,p=Ur(f),S=x,y=l,O=T[1],i=h,c=b,a=p,u=S,l=y,f=O;continue}case"Some":{const $=Math.abs(F-a.value);if(M<$){h=i,b=c,p=Ur(f),S=x,y=l,O=T[1],i=h,c=b,a=p,u=S,l=y,f=O;continue}return{quantile:l,value:H(a.value),consumed:u,rest:f}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},aR="effect/MetricPair",uR=Symbol.for(aR),lR={_Type:e=>e},fR=(e,t)=>({[uR]:lR,metricKey:e,metricState:t,pipe(){return q(this,arguments)}}),dR="effect/MetricRegistry",Xl=Symbol.for(dR);class hR{[Xl]=Xl;map=Ok();snapshot(){const t=[];for(const[n,r]of this.map)t.push(fR(n,r.get()));return t}get(t){const n=E(this.map,on(t),It);if(n==null){if(Rm(t.keyType))return this.getCounter(t);if(RT(t.keyType))return this.getGauge(t);if(TT(t.keyType))return this.getFrequency(t);if(Am(t.keyType))return this.getHistogram(t);if(AT(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=E(this.map,on(t),It);if(n==null){const r=nR(t);E(this.map,Fr(t))||E(this.map,Ir(t,r)),n=r}return n}getFrequency(t){let n=E(this.map,on(t),It);if(n==null){const r=rR(t);E(this.map,Fr(t))||E(this.map,Ir(t,r)),n=r}return n}getGauge(t){let n=E(this.map,on(t),It);if(n==null){const r=sR(t,t.keyType.bigint?BigInt(0):0);E(this.map,Fr(t))||E(this.map,Ir(t,r)),n=r}return n}getHistogram(t){let n=E(this.map,on(t),It);if(n==null){const r=oR(t);E(this.map,Fr(t))||E(this.map,Ir(t,r)),n=r}return n}getSummary(t){let n=E(this.map,on(t),It);if(n==null){const r=iR(t);E(this.map,Fr(t))||E(this.map,Ir(t,r)),n=r}return n}}const pR=()=>new hR,mR="effect/Metric",gR=Symbol.for(mR),yR={_Type:e=>e,_In:e=>e,_Out:e=>e},Ql=ne(Symbol.for("effect/Metric/globalMetricRegistry"),()=>pR()),Mm=function(e,t,n,r){const s=Object.assign(o=>Tp(o,i=>wR(s,i)),{[gR]:yR,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:r,register(){return this.unsafeValue([]),this},pipe(){return q(this,arguments)}});return s},hi=(e,t)=>Pm(CT(e,t)),Pm=e=>{let t;const n=new WeakMap,r=s=>{if(s.length===0)return t!==void 0||(t=Ql.get(e)),t;let o=n.get(s);return o!==void 0||(o=Ql.get(MT(e,s)),n.set(s,o)),o};return Mm(e.keyType,(s,o)=>r(o).update(s),s=>r(s).get(),(s,o)=>r(o).modify(s))},bR=(e,t,n)=>Pm($T(e,t,n)),_R=m(3,(e,t,n)=>SR(e,[XO(t,n)])),SR=m(2,(e,t)=>Mm(e.keyType,(n,r)=>e.unsafeUpdate(n,Vs(t,r)),n=>e.unsafeValue(Vs(t,n)),(n,r)=>e.unsafeModify(n,Vs(t,r)))),wR=m(2,(e,t)=>Ha(Oc,n=>V(()=>e.unsafeUpdate(t,n))));({...ha});const ER=m(2,(e,t)=>Ha(Sm,n=>V(()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,Up(r.result,t))}}))),kR="effect/Supervisor",pi=Symbol.for(kR),du={_T:e=>e};class mi{underlying;value0;[pi]=du;constructor(t,n){this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,r,s){this.underlying.onStart(t,n,r,s)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new mi(this,E(this.value,Ye(t)))}zip(t){return new gi(this,t)}}class gi{left;right;_tag="Zip";[pi]=du;constructor(t,n){this.left=t,this.right=n}get value(){return Ap(this.left.value,this.right.value)}onStart(t,n,r,s){this.left.onStart(t,n,r,s),this.right.onStart(t,n,r,s)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new mi(this,E(this.value,Ye(t)))}zip(t){return new gi(this,t)}}const Lm=e=>G(e,pi)&&zf(e,"Zip");class OR{effect;[pi]=du;constructor(t){this.effect=t}get value(){return this.effect}onStart(t,n,r,s){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new mi(this,E(this.value,Ye(t)))}zip(t){return new gi(this,t)}onRun(t,n){return t()}}const vR=e=>new OR(e),yi=ne("effect/Supervisor/none",()=>vR(vt)),TR=gr,Dm="Empty",jm="AddSupervisor",Um="RemoveSupervisor",Vm="AndThen",Br={_tag:Dm},Ws=(e,t)=>({_tag:Vm,first:e,second:t}),RR=(e,t)=>AR(t,ot(e)),AR=(e,t)=>{let n=e,r=t;for(;er(r);){const s=tr(r);switch(s._tag){case Dm:{r=an(r);break}case jm:{n=n.zip(s.supervisor),r=an(r);break}case Um:{n=Bc(n,s.supervisor),r=an(r);break}case Vm:{r=kt(s.first)(kt(s.second)(an(r)));break}}}return n},Bc=(e,t)=>z(e,t)?yi:Lm(e)?Bc(e.left,t).zip(Bc(e.right,t)):e,Ao=e=>z(e,yi)?wn():Lm(e)?E(Ao(e.left),Wr(Ao(e.right))):Ca(e),FR=(e,t)=>{if(z(e,t))return Br;const n=Ao(e),r=Ao(t),s=E(r,fl(n),po(Br,(i,c)=>Ws(i,{_tag:jm,supervisor:c}))),o=E(n,fl(r),po(Br,(i,c)=>Ws(i,{_tag:Um,supervisor:c})));return Ws(s,o)},IR=TR({empty:Br,patch:RR,combine:Ws,diff:FR}),NR=hi("effect_fiber_started",{incremental:!0}),Zl=hi("effect_fiber_active"),xR=hi("effect_fiber_successes",{incremental:!0}),CR=hi("effect_fiber_failures",{incremental:!0}),$R=_R(bR("effect_fiber_lifetimes",pT({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Nr="Continue",MR="Done",ef="Yield",PR={_E:e=>e,_A:e=>e},Cs=e=>{throw new Error(`BUG: FiberRuntime - ${Wn(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Ut=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Vt=ne("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),xr={[io]:(e,t,n)=>Je(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>Ee(Ee(n)),[co]:(e,t,n)=>Je(()=>t.effect_instruction_i2(n)),[fa]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Yt(e.currentRuntimeFlags)&&e.isInterrupted()?de(e.getInterruptedCause()):Ee(n)),[ao]:(e,t,n)=>(Je(()=>t.effect_instruction_i2(n)),Je(()=>t.effect_instruction_i0())?(e.pushStack(t),Je(()=>t.effect_instruction_i1())):vt),[Ds]:(e,t,n)=>{const r=Je(()=>t.effect_instruction_i0.next(n));return r.done?Ee(r.value):(e.pushStack(t),My(r.value))}},LR={[ou]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),Yt(t)?de(r.cause):n),[cu]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[iu]:(e,t,n,r)=>(r.onFiber(e,am(t)),n),[au]:(e,t,n,r)=>B(Ka(),()=>n)},DR=e=>si(D0(e),t=>gn(Q0(t),([n,r])=>{const s=new Map,o=[];for(const c of r){o.push(pn(c));for(const a of c)s.set(a.request,a)}const i=o.flat();return ai(QR(n.runAll(o),i,()=>i.forEach(c=>{c.listeners.interrupted=!0})),Sm,s)},!1,!1)),jR=da();class Bm extends HO{[Zv]=eT;[nT]=PR;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(t,n,r){if(super(),this.currentRuntimeFlags=r,this._fiberId=t,this._fiberRefs=n,gl(r)){const s=this.getFiberRef(Oc);NR.unsafeUpdate(1,s),Zl.unsafeUpdate(1,s)}this.refreshRefCache()}commit(){return wm(this)}id(){return this._fiberId}resume(t){this.tell(Mn(t))}get status(){return this.ask((t,n)=>n)}get runtimeFlags(){return this.ask((t,n)=>yv(n)?t.currentRuntimeFlags:n.runtimeFlags)}scope(){return Xv(this)}get children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(Ns)}fiberRefs(){return this.ask(t=>t.getFiberRefs())}ask(t){return Te(()=>{const n=mk(this._fiberId);return this.tell(Hs((r,s)=>{Up(n,V(()=>t(r,s)))})),jp(n)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return Xr(t=>{const n=r=>t(le(r));return this.tell(Hs((r,s)=>{r._exitValue!==null?n(this._exitValue):r.addObserver(n)})),V(()=>this.tell(Hs((r,s)=>{r.removeObserver(n)})))},this.id())}get inheritAll(){return it((t,n)=>{const r=t.id(),s=t.getFiberRefs(),o=n.runtimeFlags,i=this.getFiberRefs(),c=vO(s,r,i);t.setFiberRefs(c);const a=t.getFiberRef(of),u=E(Ks(o,a),bl(yr),bl(wc));return PE(u)})}get poll(){return V(()=>jo(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return V(()=>this.tell(qi(Xt(t))))}unsafeInterruptAsFork(t){this.tell(qi(Xt(t)))}addObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}removeObserver(t){this._observers=this._observers.filter(n=>n!==t)}getFiberRefs(){return this.setFiberRef(of,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=Zp(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,n){this._fiberRefs=Tc(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:n}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(Eo),this.currentTracer=this.currentDefaultServices.unsafeMap.get(Yp.key),this.currentSupervisor=this.getFiberRef(XR),this.currentScheduler=this.getFiberRef(_m),this.currentContext=this.getFiberRef(ys),this.currentSpan=this.currentContext.unsafeMap.get(Xp.key)}setFiberRefs(t){this._fiberRefs=t,this.refreshRefCache()}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}transferChildren(t){const n=this._children;if(this._children=null,n!==null&&n.size>0)for(const r of n)r._exitValue===null&&t.add(this.currentRuntimeFlags,r)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let n=Nr;const r=globalThis[rn];globalThis[rn]=this;try{for(;n===Nr;)n=this._queue.length===0?MR:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[rn]=r}this._queue.length>0&&!this._running?(this._running=!0,n===ef?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(ui))}drainQueueWhileRunning(t,n){let r=n;for(;this._queue.length>0;){const s=this._queue.splice(0,1)[0];r=LR[s._tag](this,t,r,s)}return r}isInterrupted(){return!rE(this.getFiberRef(Ns))}addInterruptedCause(t){const n=this.getFiberRef(Ns);this.setFiberRef(Ns,ht(n,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(const n of this._children)n.tell(qi(Xt(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const t=this._children.values();this._children=null;let n=!1;return qa({while:()=>!n,body:()=>{const s=t.next();return s.done?V(()=>{n=!0}):ms(s.value.await)},step:()=>{}})}return null}reportExitValue(t){if(gl(this.currentRuntimeFlags)){const n=this.getFiberRef(Oc),r=this.id().startTimeMillis,s=Date.now();switch($R.unsafeUpdate(s-r,n),Zl.unsafeUpdate(-1,n),t._tag){case mt:{xR.unsafeUpdate(1,n);break}case pt:{CR.unsafeUpdate(1,n);break}}}if(t._tag==="Failure"){const n=this.getFiberRef(nk);!ja(t.cause)&&n._tag==="Some"&&this.log("Fiber terminated with an unhandled error",t.cause,n)}}setExitValue(t){this._exitValue=t,this.reportExitValue(t);for(let n=this._observers.length-1;n>=0;n--)this._observers[n](t);this._observers=[]}getLoggers(){return this.getFiberRef(KR)}log(t,n,r){const s=Me(r)?r.value:this.getFiberRef(XE),o=this.getFiberRef(UR);if(VO(o,s))return;const i=this.getFiberRef(QE),c=this.getFiberRef(YE),a=this.getLoggers(),u=this.getFiberRefs();if(Ph(a)>0){const l=hh(this.getFiberRef(Eo),Xa),f=new Date(l.unsafeCurrentTimeMillis());Uy(u,()=>{for(const h of a)h.log({fiberId:this.id(),logLevel:s,message:t,cause:n,context:u,spans:i,annotations:c,date:f})})}}evaluateMessageWhileSuspended(t){switch(t._tag){case au:return ef;case ou:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(de(t.cause)),this._asyncInterruptor=null),Nr;case cu:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Nr;case iu:return t.onFiber(this,this._exitValue!==null?mv:gv(this.currentRuntimeFlags,this._asyncBlockingOn)),Nr;default:return Cs(t)}}evaluateEffect(t){this.currentSupervisor.onResume(this);try{let n=Yt(this.currentRuntimeFlags)&&this.isInterrupted()?de(this.getInterruptedCause()):t;for(;n!==null;){const r=n,s=this.runLoop(r);if(s===Ut){const o=Vt.currentOp;Vt.currentOp=null,o._op===js?C0(this.currentRuntimeFlags)?(this.tell(Wv()),this.tell(Mn(un)),n=null):n=un:o._op===jr&&(n=null)}else{this.currentRuntimeFlags=E(this.currentRuntimeFlags,$0(wc));const o=this.interruptAllChildren();o!==null?n=B(o,()=>s):(this._queue.length===0?this.setExitValue(s):this.tell(Mn(s)),n=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(t){if(this._running)this.tell(Mn(t));else{this._running=!0;const n=globalThis[rn];globalThis[rn]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[rn]=n,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(Mn(t))}patchRuntimeFlags(t,n){const r=Js(t,n);return globalThis[rn]=this,this.currentRuntimeFlags=r,r}initiateAsync(t,n){let r=!1;const s=o=>{r||(r=!0,this.tell(Mn(o)))};Yt(t)&&(this._asyncInterruptor=s);try{n(s)}catch(o){s(Ot($t(o)))}}pushStack(t){this._stack.push(t),t._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const t=this._stack.pop();if(t)return t._op==="OnStep"&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._op!==xi)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._op!==io&&t._op!==ao&&t._op!==Ds)return t;t=this.popStack()}}[By](t){return V(()=>ph(this.currentContext,t))}Left(t){return Ke(t.left)}None(t){return Ke(new Lp)}Right(t){return Ee(t.right)}Some(t){return Ee(t.value)}Micro(t){return _o(n=>{let r=n;const s=Jv(Dv(t,this.currentContext));return s.addObserver(o=>{if(o._tag==="Success")return r(Ee(o.value));switch(o.cause._tag){case"Interrupt":return r(de(Xt(sr)));case"Fail":return r(Ke(o.cause.error));case"Die":return r(kl(o.cause.defect))}}),_o(o=>{r=i=>{o(vt)},s.unsafeInterrupt()})})}[nd](t){const n=Je(()=>t.effect_instruction_i0()),r=this.getNextSuccessCont();return r!==void 0?(r._op in xr||Cs(r),xr[r._op](this,r,n)):(Vt.currentOp=Ee(n),Ut)}[mt](t){const n=t,r=this.getNextSuccessCont();return r!==void 0?(r._op in xr||Cs(r),xr[r._op](this,r,n.effect_instruction_i0)):(Vt.currentOp=n,Ut)}[pt](t){const n=t.effect_instruction_i0,r=this.getNextFailCont();if(r!==void 0)switch(r._op){case xi:case co:return Yt(this.currentRuntimeFlags)&&this.isInterrupted()?de(_l(n)):Je(()=>r.effect_instruction_i1(n));case"OnStep":return Yt(this.currentRuntimeFlags)&&this.isInterrupted()?de(_l(n)):Ee(de(n));case fa:return this.patchRuntimeFlags(this.currentRuntimeFlags,r.patch),Yt(this.currentRuntimeFlags)&&this.isInterrupted()?de(ht(n,this.getInterruptedCause())):de(n);default:Cs(r)}else return Vt.currentOp=de(n),Ut}[rd](t){return Je(()=>t.effect_instruction_i0(this,am(this.currentRuntimeFlags)))}Blocked(t){const n=this.getFiberRefs(),r=this.currentRuntimeFlags;if(this._steps.length>0){const s=[],o=this._steps[this._steps.length-1];let i=this.popStack();for(;i&&i._op!=="OnStep";)s.push(i),i=this.popStack();this.setFiberRefs(o.refs),this.currentRuntimeFlags=o.flags;const c=ov(o.refs,n),a=Ks(o.flags,r);return Ee(mp(t.effect_instruction_i0,it(u=>{for(;s.length>0;)u.pushStack(s.pop());return u.setFiberRefs(iv(u.id(),u.getFiberRefs())(c)),u.currentRuntimeFlags=Js(a)(u.currentRuntimeFlags),t.effect_instruction_i1})))}return ii(s=>B(qm(vE(t.effect_instruction_i0)),()=>s(t.effect_instruction_i1)))}RunBlocked(t){return DR(t.effect_instruction_i0)}[ss](t){const n=t.effect_instruction_i0,r=this.currentRuntimeFlags,s=Js(r,n);if(Yt(s)&&this.isInterrupted())return de(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,n),t.effect_instruction_i1){const o=Ks(s,r);return this.pushStack(new TE(o,t)),Je(()=>t.effect_instruction_i1(r))}else return un}[io](t){return this.pushStack(t),t.effect_instruction_i0}OnStep(t){return this.pushStack(t),t.effect_instruction_i0}[xi](t){return this.pushStack(t),t.effect_instruction_i0}[co](t){return this.pushStack(t),t.effect_instruction_i0}[jr](t){return this._asyncBlockingOn=t.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,t.effect_instruction_i0),Vt.currentOp=t,Ut}[js](t){return this._isYielding=!1,Vt.currentOp=t,Ut}[ao](t){const n=t.effect_instruction_i0,r=t.effect_instruction_i1;return n()?(this.pushStack(t),r()):un}[Ds](t){return xr[Ds](this,t,void 0)}[Do](t){return Je(()=>t.commit())}runLoop(t){let n=t;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&x0)!==0&&this.currentSupervisor.onEffect(this,n),this._queue.length>0&&(n=this.drainQueueWhileRunning(this.currentRuntimeFlags,n)),!this._isYielding){this.currentOpCount+=1;const r=this.currentScheduler.shouldYield(this);if(r!==!1){this._isYielding=!0,this.currentOpCount=0;const s=n;n=B(Ka({priority:r}),()=>s)}}try{if(n=this.currentTracer.context(()=>{if(jR!==n[fr]._V){const r=this.getFiberRef(rk);if(r._tag==="Some"){const s=n[fr]._V;this.log(`Executing an Effect versioned ${s} with a Runtime of version ${da()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,ar,r)}}return this[n._op](n)},this),n===Ut){const r=Vt.currentOp;return r._op===js||r._op===jr?Ut:(Vt.currentOp=null,r._op===mt||r._op===pt?r:de($t(r)))}}catch(r){n!==Ut&&!G(n,"_op")||!(n._op in this)?n=FE(`Not a valid effect: ${Wn(n)}`):ak(r)?n=de(ht($t(r),Xt(sr))):n=kl(r)}}}run=()=>{this.drainQueueOnCurrentThread()}}const UR=ne("effect/FiberRef/currentMinimumLogLevel",()=>Ze(BO("Info"))),VR=e=>lu(t=>{const n=FO(t.context,Eo);hh(n,Gp).unsafe.log(e.log(t))}),BR=ne(Symbol.for("effect/Logger/defaultLogger"),()=>VR(uT)),qR=ne(Symbol.for("effect/Logger/tracerLogger"),()=>lu(({annotations:e,cause:t,context:n,fiberId:r,logLevel:s,message:o})=>{const i=as(Qr(n,ys),Xp);if(i._tag==="None"||i.value._tag==="ExternalSpan")return;const c=ph(Qr(n,Eo),Xa),a={};for(const[u,l]of e)a[u]=l;a["effect.fiberId"]=_w(r),a["effect.logLevel"]=s.label,t!==null&&t._tag!=="Empty"&&(a["effect.cause"]=Sr(t,{renderErrorCause:!0})),i.value.event(Wn(Array.isArray(o)?o[0]:o),c.unsafeCurrentTimeNanos(),a)})),KR=ne(Symbol.for("effect/FiberRef/currentLoggers"),()=>WE(Ca(BR,qR))),JR=m(e=>Gf(e[0]),(e,t,n)=>it(r=>{const s=n?.batching===!0||n?.batching==="inherit"&&r.getFiberRef(tk);return n?.discard?zl(n.concurrency,()=>Pn(Fc,n?.concurrentFinalizers)(o=>s?gn(e,(i,c)=>o(t(i,c)),!0,!1,1):si(e,(i,c)=>o(t(i,c)))),()=>Pn(Ic,n?.concurrentFinalizers)(o=>gn(e,(i,c)=>o(t(i,c)),s,!1)),o=>Pn(Nc(o),n?.concurrentFinalizers)(i=>gn(e,(c,a)=>i(t(c,a)),s,!1,o))):zl(n?.concurrency,()=>Pn(Fc,n?.concurrentFinalizers)(o=>s?tf(e,1,(i,c)=>o(t(i,c)),!0):Qt(e,(i,c)=>o(t(i,c)))),()=>Pn(Ic,n?.concurrentFinalizers)(o=>HR(e,(i,c)=>o(t(i,c)),s)),o=>Pn(Nc(o),n?.concurrentFinalizers)(i=>tf(e,o,(c,a)=>i(t(c,a)),s)))})),HR=(e,t,n)=>Te(()=>{const r=be(e),s=new Array(r.length);return ci(gn(r,(i,c)=>B(t(i,c),a=>V(()=>s[c]=a)),n,!1),le(s))}),gn=(e,t,n,r,s)=>ii(o=>ME(i=>it(c=>{let a=Array.from(e).reverse(),u=a.length;if(u===0)return vt;let l=0,f=!1;const h=s?Math.min(a.length,s):a.length,b=new Set,p=new Array,S=()=>b.forEach($=>{$.currentScheduler.scheduleTask(()=>{$.unsafeInterruptAsFork(c.id())},0)}),y=new Array,O=new Array,k=new Array,T=()=>{const $=p.filter(({exit:U})=>U._tag==="Failure").sort((U,Y)=>U.index<Y.index?-1:U.index===Y.index?0:1).map(({exit:U})=>U);return $.length===0&&$.push(un),$},F=($,U=!1)=>{const Y=Rp(i($)),D=zR(Y,c,c.currentRuntimeFlags,uu);return c.currentScheduler.scheduleTask(()=>{U&&D.unsafeInterruptAsFork(c.id()),D.resume(Y)},0),D},I=()=>{r||(u-=a.length,a=[]),f=!0,S()},x=n?xE:_p,M=F(Xr($=>{const U=(D,C)=>{D._op==="Blocked"?k.push(D):(p.push({index:C,exit:D}),D._op==="Failure"&&!f&&I())},Y=()=>{if(a.length>0){const D=a.pop();let C=l++;const K=()=>{const oe=a.pop();return C=l++,B(Ka(),()=>B(x(o(t(oe,C))),ee))},ee=oe=>a.length>0&&(U(oe,C),a.length>0)?K():le(oe),fe=B(x(o(t(D,C))),ee),se=F(fe);y.push(se),b.add(se),f&&se.currentScheduler.scheduleTask(()=>{se.unsafeInterruptAsFork(c.id())},0),se.addObserver(oe=>{let Ue;if(oe._op==="Failure"?Ue=oe:Ue=oe.effect_instruction_i0,O.push(se),b.delete(se),U(Ue,C),p.length===u)$(le(xe(Al(T(),{parallel:!0}),()=>un)));else if(k.length+p.length===u){const ct=T(),Nn=k.map(zt=>zt.effect_instruction_i0).reduce(op);$(le(mp(Nn,gn([xe(Al(ct,{parallel:!0}),()=>un),...k.map(zt=>zt.effect_instruction_i1)],zt=>zt,n,!0,s))))}else Y()})}};for(let D=0;D<h;D++)Y()}));return ms(Ba(Ep(o(wm(M))),Dp({onFailure:$=>{I();const U=k.length+1,Y=Math.min(typeof s=="number"?s:k.length,k.length),D=Array.from(k);return Xr(C=>{let K=0,ee=0;const fe=(oe,Ue)=>ct=>{K++,K===U&&C(Ee(de($))),D.length>0&&Ue&&se()},se=()=>{F(D.pop(),!0).addObserver(fe(ee,!0)),ee++};M.addObserver(fe(ee,!1)),ee++;for(let oe=0;oe<Y;oe++)se()})},onSuccess:()=>Qt(O,$=>$.inheritAll)})))}))),tf=(e,t,n,r)=>Te(()=>{const s=be(e),o=new Array(s.length);return ci(gn(s,(c,a)=>Ye(n(c,a),u=>o[a]=u),r,!1,t),le(o))}),qm=e=>GR(e,uu),WR=(e,t,n,r=null)=>{const s=Km(e,t,n,r);return s.resume(e),s},zR=(e,t,n,r=null)=>Km(e,t,n,r),Km=(e,t,n,r=null)=>{const s=Bh(),o=t.getFiberRefs(),i=TO(o,s),c=new Bm(s,i,n),a=Qr(i,ys),u=c.currentSupervisor;return u.onStart(a,e,H(t),c),c.addObserver(f=>u.onEnd(f,c)),(r!==null?r:E(t.getFiberRef(vc),xe(()=>t.scope()))).add(n,c),c},GR=(e,t)=>it((n,r)=>le(WR(e,n,r.runtimeFlags,t))),nf=e=>bs(t=>st(as(t,Es),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return B(li(n,Ic),r=>hu(e,r))}}})),rf=e=>t=>bs(n=>st(as(n,Es),{onNone:()=>t,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===e?t:B(li(r,Nc(e)),s=>hu(t,s))})),Pn=(e,t)=>n=>bs(r=>st(as(r,Es),{onNone:()=>n(ke),onSome:s=>{if(t===!0){const o=e._tag==="Parallel"?nf:e._tag==="Sequential"?sf:rf(e.parallelism);switch(s.strategy._tag){case"Parallel":return o(n(nf));case"Sequential":return o(n(sf));case"ParallelN":return o(n(rf(s.strategy.parallelism)))}}else return n(ke)}})),sf=e=>bs(t=>st(as(t,Es),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return B(li(n,Fc),r=>hu(e,r))}}})),Es=Fn("effect/Scope"),hu=m(2,(e,t)=>Sk(e,mh(tS(Es,t)))),YR=e=>wr(e,{differ:IR,fork:Br}),of=GE(M0),XR=YR(yi),QR=(e,t,n)=>wp(r=>B(B(qm(kp(e)),s=>Xr(o=>{const i=t.map(u=>u.listeners.count),c=()=>{i.every(u=>u===0)&&t.every(u=>u.result.state.current._tag==="Pending"?!0:!!(u.result.state.current._tag==="Done"&&za(u.result.state.current.effect)&&u.result.state.current.effect._tag==="Failure"&&sE(u.result.state.current.effect.cause)))&&(a.forEach(u=>u()),n?.(),o(LE(s)))};s.addObserver(u=>{a.forEach(l=>l()),o(u)});const a=t.map((u,l)=>{const f=h=>{i[l]=h,c()};return u.listeners.addObserver(f),()=>u.listeners.removeObserver(f)});return c(),V(()=>{a.forEach(u=>u())})})),()=>Te(()=>{const s=t.flatMap(o=>o.state.completed?[]:[o]);return si(s,o=>ER(o.request,dk(r)))}))),ZR=nE,eA=Sr,tA=ok,nA=li,ks=e=>function(){if(arguments.length===1){const t=arguments[0];return(n,...r)=>e(t,n,...r)}return e.apply(this,arguments)},pu=ks((e,t,n)=>{const r=Bh(),s=[[ys,[[r,e.context]]]];n?.scheduler&&s.push([_m,[[r,n.scheduler]]]);let o=IO(e.fiberRefs,{entries:s,forkAs:r});n?.updateRefs&&(o=n.updateRefs(o,r));const i=new Bm(r,o,e.runtimeFlags);let c=t;n?.scope&&(c=B(nA(n.scope,cm),u=>ci(sk(u,wp(l=>z(l,i.id())?vt:Ip(i,l))),Ba(t,l=>tA(u,l)))));const a=i.currentSupervisor;return a!==yi&&(a.onStart(e.context,c,j(),i),i.addObserver(u=>a.onEnd(u,i))),uu.add(e.runtimeFlags,i),n?.immediate===!1?i.resume(c):i.start(c),i}),rA=ks((e,t)=>{const n=cA(e)(t);if(n._tag==="Failure")throw Jm(n.effect_instruction_i0);return n.effect_instruction_i0});class sA extends Error{fiber;_tag="AsyncFiberException";constructor(t){super(`Fiber #${t.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=t,this.name=this._tag,this.stack=this.message}}const oA=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new sA(e);return Error.stackTraceLimit=t,n},Ki=Symbol.for("effect/Runtime/FiberFailure"),$s=Symbol.for("effect/Runtime/FiberFailure/Cause");class iA extends Error{[Ki];[$s];constructor(t){const n=hp(t)[0];super(n?.message||"An error has occurred"),this[Ki]=Ki,this[$s]=t,this.name=n?`(FiberFailure) ${n.name}`:"FiberFailure",n?.stack&&(this.stack=n.stack)}toJSON(){return{_id:"FiberFailure",cause:this[$s].toJSON()}}toString(){return"(FiberFailure) "+Sr(this[$s],{renderErrorCause:!0})}[he](){return this.toString()}}const Jm=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new iA(e);return Error.stackTraceLimit=t,n},Hm=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return Fl(t.left);case"Right":return Ee(t.right);case"Some":return Ee(t.value);case"None":return Fl(Lp())}},cA=ks((e,t)=>{const n=Hm(t);if(n)return n;const r=new bm,s=pu(e)(t,{scheduler:r});r.flush();const o=s.unsafePoll();return o||fk(Va(oA(s),Ga(s)))}),aA=ks((e,t,n)=>uA(e,t,n).then(r=>{switch(r._tag){case mt:return r.effect_instruction_i0;case pt:throw Jm(r.effect_instruction_i0)}})),uA=ks((e,t,n)=>new Promise(r=>{const s=Hm(t);s&&r(s);const o=pu(e)(t);o.addObserver(i=>{r(i)}),n?.signal!==void 0&&(n.signal.aborted?o.unsafeInterruptAsFork(o.id()):n.signal.addEventListener("abort",()=>{o.unsafeInterruptAsFork(o.id())},{once:!0}))}));class lA{context;runtimeFlags;fiberRefs;constructor(t,n,r){this.context=t,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return q(this,arguments)}}const fA=e=>new lA(e.context,e.runtimeFlags,e.fiberRefs),dA=rp(yr,tp,ep),mu=fA({context:ka(),runtimeFlags:dA,fiberRefs:NO()}),hA=pu(mu),pA=aA(mu),mA=rA(mu),gA=function(){const e=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends Wa{constructor(n){super(n?.message,n?.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}.BaseEffectError}(),yA=e=>{const t={BaseEffectError:class extends gA{_tag=e}};return t.BaseEffectError.prototype.name=e,t.BaseEffectError},bA=ri,qr=JR,Ms=Te,_A=V,ut=vt,Wm=kc,SA=CE,qc=Ye,zm=oi,Ln=So,Ft=B,wA=Tp,EA=ZO,kA=hA,OA=pA,Gm=mA;class Ce{path;actual;issue;_tag="Pointer";constructor(t,n,r){this.path=t,this.actual=n,this.issue=r}}class cf{actual;message;_tag="Unexpected";constructor(t,n){this.actual=t,this.message=n}}class Cr{ast;message;_tag="Missing";actual=void 0;constructor(t,n){this.ast=t,this.message=n}}class me{ast;actual;issues;output;_tag="Composite";constructor(t,n,r,s){this.ast=t,this.actual=n,this.issues=r,this.output=s}}class Ji{ast;actual;kind;issue;_tag="Refinement";constructor(t,n,r,s){this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class Hi{ast;actual;kind;issue;_tag="Transformation";constructor(t,n,r,s){this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class qt{ast;actual;message;_tag="Type";constructor(t,n,r){this.ast=t,this.actual=n,this.message=r}}class af{ast;actual;message;_tag="Forbidden";constructor(t,n,r){this.ast=t,this.actual=n,this.message=r}}const uf=Symbol.for("effect/Schema/ParseErrorTypeId");class vA extends yA("ParseError"){[uf]=uf;get message(){return this.toString()}toString(){return Gs.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[he](){return this.toJSON()}}const TA=e=>new vA({issue:e}),qe=ob,Mt=m(2,(e,t)=>qe(e)?ma(e,{onLeft:Q,onRight:t}):Ft(e,t)),rt=m(2,(e,t)=>qe(e)?cb(e,t):qc(e,t)),Wi=m(2,(e,t)=>qe(e)?ib(e,t):zm(e,t)),Ym=m(2,(e,t)=>qe(e)?ma(e,{onLeft:t,onRight:Z}):Wm(e,t)),gu=(e,t)=>t===void 0||bn(t)?e:e===void 0?t:{...e,...t},RA=(e,t,n)=>{const r=tt(e,t);return(s,o)=>r(s,gu(n,o))},AA=(e,t,n)=>{const r=RA(e,t,n);return(s,o)=>pd(r(s,o),TA)},FA=(e,t,n)=>{const r=tt(e,t);return(s,o)=>r(s,{...gu(n,o),isEffectAllowed:!0})},IA=(e,t)=>FA(e.ast,!0,t),Xm=(e,t)=>AA(Ge(e.ast),!0,t),NA=ne(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),xA=ne(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),tt=(e,t)=>{const n=t?NA:xA,r=n.get(e);if(r)return r;const s=CA(e,t),o=o_(e),i=Me(o)?(u,l)=>s(u,gu(l,o.value)):s,c=i_(e),a=t&&Me(c)?(u,l)=>zs(Ym(i(u,l),c.value),e,u,l):i;return n.set(e,a),a},zi=e=>It(n_(e)),Gi=e=>It(r_(e)),CA=(e,t)=>{switch(e._tag){case"Refinement":{const n=tt(e.from,!0);return(r,s)=>{s=s??$i;const o=s?.errors==="all",i=Mt(Ym(n(r,s),c=>{const a=new Ji(e,r,"From",c);return o&&a_(e)&&eg(c)?st(e.filter(r,s,e),{onNone:()=>Q(a),onSome:u=>Q(new me(e,r,[a,new Ji(e,r,"Predicate",u)]))}):Q(a)}),c=>st(e.filter(c,s,e),{onNone:()=>Z(c),onSome:a=>Q(new Ji(e,r,"Predicate",a))}));return zs(i,e,r,s)}}case"Transformation":{const n=PA(e.transformation),r=tt(e.from,!0),s=tt(e.to,!0);return(o,i)=>zs(Mt(Wi(r(o,i),c=>new Hi(e,o,"Encoded",c)),c=>Mt(Wi(n(c,i??$i,e,o),a=>new Hi(e,o,"Transformation",a)),a=>Wi(s(a,i),u=>new Hi(e,o,"Type",u)))),e,o,i)}case"Declaration":{const n=e.decodeUnknown(...e.typeParameters);return(r,s)=>zs(n(r,s??$i,e),e,r,s)}case"Literal":return et(e,n=>n===e.literal);case"UniqueSymbol":return et(e,n=>n===e.symbol);case"UndefinedKeyword":return et(e,wy);case"NeverKeyword":return et(e,Ey);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return Z;case"StringKeyword":return et(e,Pt);case"NumberKeyword":return et(e,bn);case"BooleanKeyword":return et(e,$o);case"BigIntKeyword":return et(e,Mo);case"SymbolKeyword":return et(e,nc);case"ObjectKeyword":return et(e,Rn);case"Enums":return et(e,n=>e.enums.some(([r,s])=>s===n));case"TemplateLiteral":{const n=M_(e);return et(e,r=>Pt(r)&&n.test(r))}case"TupleType":{const n=e.elements.map(u=>tt(u.type,t)),r=e.rest.map(u=>tt(u.type,t));let s=e.elements.filter(u=>!u.isOptional);e.rest.length>0&&(s=s.concat(e.rest.slice(1)));const o=s.length,i=e.elements.length>0?e.elements.map((u,l)=>l).join(" | "):"never",c=zi(e),a=Gi(e);return(u,l)=>{if(!kb(u))return Q(new qt(e,u));const f=l?.errors==="all",h=[];let b=0;const p=[],S=u.length;for(let T=S;T<=o-1;T++){const F=new Ce(T,u,new Cr(s[T-S]));if(f){h.push([b++,F]);continue}else return Q(new me(e,u,F,p))}if(e.rest.length===0)for(let T=e.elements.length;T<=S-1;T++){const F=new Ce(T,u,new cf(u[T],`is unexpected, expected: ${i}`));if(f){h.push([b++,F]);continue}else return Q(new me(e,u,F,p))}let y=0,O;for(;y<n.length;y++)if(S<y+1){if(e.elements[y].isOptional)continue}else{const T=n[y],F=T(u[y],l);if(qe(F)){if($e(F)){const I=new Ce(y,u,F.left);if(f){h.push([b++,I]);continue}else return Q(new me(e,u,I,gt(p)))}p.push([b++,F.right])}else{const I=b++,x=y;O||(O=[]),O.push(({es:M,output:$})=>Ft(Ln(F),U=>{if($e(U)){const Y=new Ce(x,u,U.left);return f?(M.push([I,Y]),ut):Q(new me(e,u,Y,gt($)))}return $.push([I,U.right]),ut}))}}if(Fe(r)){const[T,...F]=r;for(;y<S-F.length;y++){const I=T(u[y],l);if(qe(I))if($e(I)){const x=new Ce(y,u,I.left);if(f){h.push([b++,x]);continue}else return Q(new me(e,u,x,gt(p)))}else p.push([b++,I.right]);else{const x=b++,M=y;O||(O=[]),O.push(({es:$,output:U})=>Ft(Ln(I),Y=>{if($e(Y)){const D=new Ce(M,u,Y.left);return f?($.push([x,D]),ut):Q(new me(e,u,D,gt(U)))}else return U.push([x,Y.right]),ut}))}}for(let I=0;I<F.length;I++)if(y+=I,!(S<y+1)){const x=F[I](u[y],l);if(qe(x)){if($e(x)){const M=new Ce(y,u,x.left);if(f){h.push([b++,M]);continue}else return Q(new me(e,u,M,gt(p)))}p.push([b++,x.right])}else{const M=b++,$=y;O||(O=[]),O.push(({es:U,output:Y})=>Ft(Ln(x),D=>{if($e(D)){const C=new Ce($,u,D.left);return f?(U.push([M,C]),ut):Q(new me(e,u,C,gt(Y)))}return Y.push([M,D.right]),ut}))}}}const k=({es:T,output:F})=>Us(T)?Q(new me(e,u,gt(T),gt(F))):Z(gt(F));if(O&&O.length>0){const T=O;return Ms(()=>{const F={es:Mr(h),output:Mr(p)};return Ft(qr(T,I=>I(F),{concurrency:c,batching:a,discard:!0}),()=>k(F))})}return k({output:p,es:h})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return et(e,ky);const n=[],r={},s=[];for(const l of e.propertySignatures)n.push([tt(l.type,t),l]),r[l.name]=null,s.push(l.name);const o=e.indexSignatures.map(l=>[tt(l.parameter,t),tt(l.type,t),l.parameter]),i=bt.make(e.indexSignatures.map(l=>l.parameter).concat(s.map(l=>nc(l)?new d_(l):new f_(l)))),c=tt(i,t),a=zi(e),u=Gi(e);return(l,f)=>{if(!vy(l))return Q(new qt(e,l));const h=f?.errors==="all",b=[];let p=0;const S=f?.onExcessProperty==="error",y=f?.onExcessProperty==="preserve",O={};let k;if(S||y){k=qn(l);for(const x of k){const M=c(x,f);if(qe(M)&&$e(M))if(S){const $=new Ce(x,l,new cf(l[x],`is unexpected, expected: ${String(i)}`));if(h){b.push([p++,$]);continue}else return Q(new me(e,l,$,O))}else O[x]=l[x]}}let T;const F=f?.exact===!0;for(let x=0;x<n.length;x++){const M=n[x][1],$=M.name,U=Object.prototype.hasOwnProperty.call(l,$);if(!U){if(M.isOptional)continue;if(F){const C=new Ce($,l,new Cr(M));if(h){b.push([p++,C]);continue}else return Q(new me(e,l,C,O))}}const Y=n[x][0],D=Y(l[$],f);if(qe(D)){if($e(D)){const C=new Ce($,l,U?D.left:new Cr(M));if(h){b.push([p++,C]);continue}else return Q(new me(e,l,C,O))}O[$]=D.right}else{const C=p++,K=$;T||(T=[]),T.push(({es:ee,output:fe})=>Ft(Ln(D),se=>{if($e(se)){const oe=new Ce(K,l,U?se.left:new Cr(M));return h?(ee.push([C,oe]),ut):Q(new me(e,l,oe,fe))}return fe[K]=se.right,ut}))}}for(let x=0;x<o.length;x++){const M=o[x],$=M[0],U=M[1],Y=Ad(l,M[2]);for(const D of Y){const C=$(D,f);if(qe(C)&&Kt(C)){const K=U(l[D],f);if(qe(K))if($e(K)){const ee=new Ce(D,l,K.left);if(h){b.push([p++,ee]);continue}else return Q(new me(e,l,ee,O))}else Object.prototype.hasOwnProperty.call(r,D)||(O[D]=K.right);else{const ee=p++,fe=D;T||(T=[]),T.push(({es:se,output:oe})=>Ft(Ln(K),Ue=>{if($e(Ue)){const ct=new Ce(fe,l,Ue.left);return h?(se.push([ee,ct]),ut):Q(new me(e,l,ct,oe))}else return Object.prototype.hasOwnProperty.call(r,D)||(oe[D]=Ue.right),ut}))}}}}const I=({es:x,output:M})=>{if(Us(x))return Q(new me(e,l,gt(x),M));if(f?.propertyOrder==="original"){const $=k||qn(l);for(const Y of s)$.indexOf(Y)===-1&&$.push(Y);const U={};for(const Y of $)Object.prototype.hasOwnProperty.call(M,Y)&&(U[Y]=M[Y]);return Z(U)}return Z(M)};if(T&&T.length>0){const x=T;return Ms(()=>{const M={es:Mr(b),output:Object.assign({},O)};return Ft(qr(x,$=>$(M),{concurrency:a,batching:u,discard:!0}),()=>I(M))})}return I({es:b,output:O})}}case"Union":{const n=$A(e.types),r=qn(n.keys),s=r.length,o=e.types.length,i=new Map;for(let u=0;u<o;u++)i.set(e.types[u],tt(e.types[u],t));const c=zi(e)??1,a=Gi(e);return(u,l)=>{const f=[];let h=0,b=[];if(s>0)if(ia(u))for(let y=0;y<s;y++){const O=r[y],k=n.keys[O].buckets;if(Object.prototype.hasOwnProperty.call(u,O)){const T=String(u[O]);if(Object.prototype.hasOwnProperty.call(k,T))b=b.concat(k[T]);else{const{candidates:F,literals:I}=n.keys[O],x=bt.make(I),M=F.length===o?new hn([new Le(O,x,!1,!0)],[]):bt.make(F);f.push([h++,new me(M,u,new Ce(O,u,new qt(x,u[O])))])}}else{const{candidates:T,literals:F}=n.keys[O],I=new Le(O,bt.make(F),!1,!0),x=T.length===o?new hn([I],[]):bt.make(T);f.push([h++,new me(x,u,new Ce(O,u,new Cr(I)))])}}else{const y=n.candidates.length===o?e:bt.make(n.candidates);f.push([h++,new qt(y,u)])}n.otherwise.length>0&&(b=b.concat(n.otherwise));let p;for(let y=0;y<b.length;y++){const O=b[y],k=i.get(O)(u,l);if(qe(k)&&(!p||p.length===0)){if(Kt(k))return k;f.push([h++,k.left])}else{const T=h++;p||(p=[]),p.push(F=>Ms(()=>"finalResult"in F?ut:Ft(Ln(k),I=>(Kt(I)?F.finalResult=I:F.es.push([T,I.left]),ut))))}}const S=y=>Us(y)?y.length===1&&y[0][1]._tag==="Type"?Q(y[0][1]):Q(new me(e,u,gt(y))):Q(new qt(e,u));if(p&&p.length>0){const y=p;return Ms(()=>{const O={es:Mr(f)};return Ft(qr(y,k=>k(O),{concurrency:c,batching:a,discard:!0}),()=>"finalResult"in O?O.finalResult:S(O.es))})}return S(f)}}case"Suspend":{const n=Fd(()=>tt(Xn(e.f(),e.annotations),t));return(r,s)=>n()(r,s)}}},et=(e,t)=>n=>t(n)?Z(n):Q(new qt(e,n)),Pr=(e,t)=>{switch(e._tag){case"Declaration":{const n=Wd(e);if(Me(n))return Pr(n.value);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const s=e.propertySignatures[r],o=ol(s.type);nl(o)&&!s.isOptional&&n.push([s.name,o])}return n}case"TupleType":{const n=[];for(let r=0;r<e.elements.length;r++){const s=e.elements[r],o=ol(s.type);nl(o)&&!s.isOptional&&n.push([r,o])}return n}case"Refinement":return Pr(e.from);case"Suspend":return Pr(e.f());case"Transformation":return Pr(e.from)}return[]},$A=(e,t)=>{const n={},r=[],s=[];for(let o=0;o<e.length;o++){const i=e[o],c=Pr(i);if(c.length>0){s.push(i);for(let a=0;a<c.length;a++){const[u,l]=c[a],f=String(l.literal);n[u]=n[u]||{buckets:{},literals:[],candidates:[]};const h=n[u].buckets;if(Object.prototype.hasOwnProperty.call(h,f)){if(a<c.length-1)continue;h[f].push(i),n[u].literals.push(l),n[u].candidates.push(i)}else{h[f]=[i],n[u].literals.push(l),n[u].candidates.push(i);break}}}else r.push(i)}return{keys:n,otherwise:r,candidates:s}},zs=(e,t,n,r)=>{if(r?.isEffectAllowed===!0||qe(e))return e;const s=new bm,o=kA(e,{scheduler:s});s.flush();const i=o.unsafePoll();if(i){if(wk(i))return Z(i.value);const c=i.cause;return ZR(c)?Q(c.error):Q(new af(t,n,eA(c)))}return Q(new af(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},MA=([e],[t])=>e>t?1:e<t?-1:0;function gt(e){return e.sort(MA).map(t=>t[1])}const PA=(e,t)=>{switch(e._tag){case"FinalTransformation":return e.decode;case"ComposeTransformation":return Z;case"TypeLiteralTransformation":return n=>{let r=Z(n);for(const s of e.propertySignatureTransformations){const[o,i]=[s.from,s.to],c=s.decode;r=rt(r,u=>{const l=c(Object.prototype.hasOwnProperty.call(u,o)?H(u[o]):j());return delete u[o],Me(l)&&(u[i]=l.value),u})}return r}}},Ve=(e,t=[])=>({value:e,forest:t}),Gs={formatIssue:e=>rt(Dn(e),LA),formatIssueSync:e=>{const t=Gs.formatIssue(e);return qe(t)?md(t):Gm(t)},formatError:e=>Gs.formatIssue(e.issue),formatErrorSync:e=>Gs.formatIssueSync(e.issue)},LA=e=>e.value+Qm(`
`,e.forest),Qm=(e,t)=>{let n="";const r=t.length;let s;for(let o=0;o<r;o++){s=t[o];const i=o===r-1;n+=e+(i?"└":"├")+"─ "+s.value,n+=Qm(e+(r>1&&!i?"│  ":"   "),s.forest)}return n},DA=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},jA=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},Zm=e=>"ast"in e?H(e.ast):j(),Kc=Z(void 0),UA=e=>Zm(e).pipe(Uo(e_),st({onNone:()=>Kc,onSome:t=>{const n=t(e);return Pt(n)?Z({message:n,override:!1}):bA(n)?qc(n,r=>({message:r,override:!1})):Pt(n.message)?Z({message:n.message,override:n.override}):qc(n.message,r=>({message:r,override:n.override}))}})),yu=e=>t=>t._tag===e,eg=yu("Composite"),lf=yu("Refinement"),ff=yu("Transformation"),en=e=>Mt(UA(e),t=>t!==void 0?!t.override&&(eg(e)||lf(e)&&e.kind==="From"||ff(e)&&e.kind!=="Transformation")?ff(e)||lf(e)?en(e.issue):Kc:Z(t.message):Kc),tg=e=>Zm(e).pipe(Uo(s_),hb(t=>t(e)),It);function VA(e){return Hd(e).pipe(Zt(()=>Kd(e)),Zt(()=>Jd(e)),Zt(()=>Bo(e)),xe(()=>`{ ${e.from} | filter }`))}function BA(e){return e.message!==void 0?e.message:`Expected ${rh(e.ast)?VA(e.ast):String(e.ast)}, actual ${Ct(e.actual)}`}const ng=e=>rt(en(e),t=>t??tg(e)??BA(e)),Ps=e=>tg(e)??String(e.ast),rg=e=>e.message??"is forbidden",sg=e=>e.message??"is unexpected",og=e=>{const t=t_(e.ast);if(Me(t)){const n=t.value();return Pt(n)?Z(n):n}return Z(e.message??"is missing")},Dn=e=>{switch(e._tag){case"Type":return rt(ng(e),Ve);case"Forbidden":return Z(Ve(Ps(e),[Ve(rg(e))]));case"Unexpected":return Z(Ve(sg(e)));case"Missing":return rt(og(e),Ve);case"Transformation":return Mt(en(e),t=>t!==void 0?Z(Ve(t)):rt(Dn(e.issue),n=>Ve(Ps(e),[Ve(DA(e.kind),[n])])));case"Refinement":return Mt(en(e),t=>t!==void 0?Z(Ve(t)):rt(Dn(e.issue),n=>Ve(Ps(e),[Ve(jA(e.kind),[n])])));case"Pointer":return rt(Dn(e.issue),t=>Ve(Bb(e.path),[t]));case"Composite":return Mt(en(e),t=>{if(t!==void 0)return Z(Ve(t));const n=Ps(e);return ya(e.issues)?rt(qr(e.issues,Dn),r=>Ve(n,r)):rt(Dn(e.issues),r=>Ve(n,[r]))})}},sn=(e,t,n)=>({_tag:e,path:t,message:n}),Ys={formatIssue:e=>jn(e,void 0,[]),formatIssueSync:e=>{const t=Ys.formatIssue(e);return qe(t)?md(t):Gm(t)},formatError:e=>Ys.formatIssue(e.issue),formatErrorSync:e=>Ys.formatIssueSync(e.issue)},jn=(e,t,n)=>{const r=e._tag;switch(r){case"Type":return rt(ng(e),s=>[sn(t??r,n,s)]);case"Forbidden":return Z([sn(r,n,rg(e))]);case"Unexpected":return Z([sn(r,n,sg(e))]);case"Missing":return rt(og(e),s=>[sn(r,n,s)]);case"Pointer":return jn(e.issue,void 0,n.concat(e.path));case"Composite":return Mt(en(e),s=>s!==void 0?Z([sn(r,n,s)]):ya(e.issues)?rt(qr(e.issues,o=>jn(o,void 0,n)),vd):jn(e.issues,void 0,n));case"Refinement":return Mt(en(e),s=>s!==void 0?Z([sn(r,n,s)]):jn(e.issue,e.kind==="Predicate"?r:void 0,n));case"Transformation":return Mt(en(e),s=>s!==void 0?Z([sn(r,n,s)]):jn(e.issue,e.kind==="Transformation"?r:void 0,n))}},qA=m(e=>Rn(e[0]),(e,...t)=>{const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}),KA=m(e=>Rn(e[0]),(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n}),df=Symbol.for("effect/Schema");function bi(e){return class{[df]=hf;static ast=e;static annotations(n){return bi(bu(this.ast,n))}static pipe(){return q(this,arguments)}static toString(){return String(e)}static Type;static Encoded;static Context;static[df]=hf}}const hf={_A:e=>e,_I:e=>e,_R:e=>e},pf={schemaId:Yb,message:Id,missingMessage:ba,identifier:Nd,title:mr,description:_a,examples:xd,default:Cd,documentation:Xb,jsonSchema:$d,arbitrary:Md,pretty:Pd,equivalence:Ld,concurrency:Dd,batching:jd,parseIssueTitle:Ud,parseOptions:Vd,decodingFallback:Bd},ig=e=>{if(!e)return{};const t={...e};for(const n in pf)if(n in e){const r=pf[n];t[r]=e[n],delete t[n]}return t},bu=(e,t)=>Xn(e,ig(t));class Jc extends bi(S_){}const JA=Symbol.for("effect/PropertySignature"),cg=e=>G(e,JA),HA=ih([ba]),WA=(e,t)=>{const n=qn(e),r=[];if(n.length>0){const o=[],i=[],c=[];for(let a=0;a<n.length;a++){const u=n[a],l=e[u];if(cg(l)){const f=l.ast;switch(f._tag){case"PropertySignatureDeclaration":{const h=f.type,b=f.isOptional,p=f.annotations;o.push(new Le(u,h,b,!0,HA(f))),i.push(new Le(u,Ge(h),b,!0,p)),r.push(new Le(u,h,b,!0,p));break}case"PropertySignatureTransformation":{const h=f.from.fromKey??u;o.push(new Le(h,f.from.type,f.from.isOptional,!0,f.from.annotations)),i.push(new Le(u,f.to.type,f.to.isOptional,!0,f.to.annotations)),c.push(new I_(h,u,f.decode,f.encode));break}}}else o.push(new Le(u,l.ast,!1,!0)),i.push(new Le(u,Ge(l.ast),!1,!0)),r.push(new Le(u,l.ast,!1,!0))}if(Fe(c)){const a=[],u=[];for(const l of t){const{indexSignatures:f,propertySignatures:h}=sl(l.key.ast,l.value.ast);h.forEach(b=>{o.push(b),i.push(new Le(b.name,Ge(b.type),b.isOptional,b.isReadonly,b.annotations))}),f.forEach(b=>{a.push(b),u.push(new qo(b.parameter,Ge(b.type),b.isReadonly))})}return new F_(new hn(o,a,{[oc]:"Struct (Encoded side)"}),new hn(i,u,{[oc]:"Struct (Type side)"}),new N_(c))}}const s=[];for(const o of t){const{indexSignatures:i,propertySignatures:c}=sl(o.key.ast,o.value.ast);c.forEach(a=>r.push(a)),i.forEach(a=>s.push(a))}return new hn(r,s)},zA=(e,t)=>{const n=qn(e);for(const r of n){const s=e[r];if(t[r]===void 0&&cg(s)){const o=s.ast,i=o._tag==="PropertySignatureDeclaration"?o.defaultValue:o.to.defaultValue;i!==void 0&&(t[r]=i())}}return t};function ag(e,t,n=WA(e,t)){return class extends bi(n){static annotations(s){return ag(this.fields,this.records,bu(this.ast,s))}static fields={...e};static records=[...t];static make=(s,o)=>{const i=zA(e,{...s});return fg(o)?i:Xm(this)(i)};static pick(...s){return Fo(qA(e,...s))}static omit(...s){return Fo(KA(e,...s))}}}function Fo(e,...t){return ag(e,t)}const GA=Symbol.for("effect/SchemaId/Refine");function ug(e,t,n){return class extends bi(n){static annotations(s){return ug(this.from,this.filter,bu(this.ast,s))}static[GA]=e;static from=e;static filter=t;static make=(s,o)=>fg(o)?s:Xm(this)(s)}}const mf=(e,t,n)=>{if($o(e))return e?j():H(new qt(t,n));if(Pt(e))return H(new qt(t,n,e));if(e!==void 0){if("_tag"in e)return H(e);const r=new qt(t,n,e.message);return H(Fe(e.path)?new Ce(e.path,n,r):r)}return j()},YA=(e,t,n)=>{if(Vb(e))return mf(e,t,n);if(Fe(e)){const r=Lb(e,s=>mf(s,t,n));if(Fe(r))return H(r.length===1?r[0]:new me(t,n,r))}return j()};function lg(e,t){return n=>{function r(o,i,c){return YA(e(o,i,c),c,o)}const s=new nh(n.ast,r,ig(t));return ug(n,r,s)}}const XA=zb,QA=(e,t)=>n=>n.pipe(lg(r=>r.length>=e,{schemaId:XA,title:`minLength(${e})`,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),gf=Symbol.for("effect/SchemaId/Pattern"),ZA=(e,t)=>n=>{const r=e.source;return n.pipe(lg(s=>(e.lastIndex=0,e.test(s)),{schemaId:gf,[gf]:{regex:e},description:`a string matching the pattern ${r}`,jsonSchema:{pattern:r},...t}))},yf=e=>QA(1,{title:"nonEmptyString",description:"a non empty string",...e});function fg(e){return $o(e)?e:e?.disableValidation??!1}function eF(e,t){return t===void 0&&(t={errors:"all",onExcessProperty:"ignore"}),function(n,r,s){return IA(e,t)(n).pipe(Wm(function(o){return SA(Ys.formatIssue(o))}),zm(function(o){var i=!s.shouldUseNativeValidation&&s.criteriaMode==="all",c=o.reduce(function(a,u){var l=u.path.join(".");if(a[l]||(a[l]={message:u.message,type:u._tag}),i){var f=a[l].types,h=f&&f[String(u._tag)];a[l]=jf(l,i,a,u._tag,h?[].concat(h,u.message):u.message)}return a},{});return my(c,s)}),wA(function(){return _A(function(){return s.shouldUseNativeValidation&&Hf({},s)})}),EA({onFailure:function(o){return{errors:o,values:{}}},onSuccess:function(o){return{errors:{},values:o}}}),OA)}}const tF=Fo({name:Jc.pipe(yf({message:()=>"Name is required."})),website:Jc.pipe(yf({message:()=>"Website URL is required."}),ZA(/^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/,{message:()=>"Please enter a valid website URL"}))});Fo({message:Jc});var nF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rF=nF.reduce((e,t)=>{const n=zg(`Primitive.${t}`),r=Un.forwardRef((s,o)=>{const{asChild:i,...c}=s,a=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(a,{...c,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),sF="Label",dg=Un.forwardRef((e,t)=>ae.jsx(rF.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));dg.displayName=sF;var oF=dg;function bf({className:e,...t}){return ae.jsx(oF,{"data-slot":"label",className:Zi("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function iF({message:e,type:t}){return e?ae.jsx("div",{className:Zi("rounded-md p-4 my-4",t==="error"&&"bg-red-50",t==="success"&&"bg-green-50"),children:ae.jsx("p",{className:Zi("text-sm",t==="error"&&"text-red-800",t==="success"&&"text-green-800"),children:e})}):null}function _f({error:e,errorId:t}){return e?ae.jsx("div",{className:"min-h-7",children:ae.jsx("p",{id:t,role:"alert",className:"text-sm text-red-600 mt-1 ease-out animate-in fade-in-0",children:e})}):ae.jsx("div",{className:"min-h-7"})}function hg(e,t){return function(){return e.apply(t,arguments)}}const{toString:cF}=Object.prototype,{getPrototypeOf:_u}=Object,{iterator:_i,toStringTag:pg}=Symbol,Si=(e=>t=>{const n=cF.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tt=e=>(e=e.toLowerCase(),t=>Si(t)===e),wi=e=>t=>typeof t===e,{isArray:kr}=Array,Zr=wi("undefined");function Os(e){return e!==null&&!Zr(e)&&e.constructor!==null&&!Zr(e.constructor)&&Xe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const mg=Tt("ArrayBuffer");function aF(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&mg(e.buffer),t}const uF=wi("string"),Xe=wi("function"),gg=wi("number"),vs=e=>e!==null&&typeof e=="object",lF=e=>e===!0||e===!1,Xs=e=>{if(Si(e)!=="object")return!1;const t=_u(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(pg in e)&&!(_i in e)},fF=e=>{if(!vs(e)||Os(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},dF=Tt("Date"),hF=Tt("File"),pF=Tt("Blob"),mF=Tt("FileList"),gF=e=>vs(e)&&Xe(e.pipe),yF=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Xe(e.append)&&((t=Si(e))==="formdata"||t==="object"&&Xe(e.toString)&&e.toString()==="[object FormData]"))},bF=Tt("URLSearchParams"),[_F,SF,wF,EF]=["ReadableStream","Request","Response","Headers"].map(Tt),kF=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ts(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),kr(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Os(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let c;for(r=0;r<i;r++)c=o[r],t.call(null,e[c],c,e)}}function yg(e,t){if(Os(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const fn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bg=e=>!Zr(e)&&e!==fn;function Hc(){const{caseless:e}=bg(this)&&this||{},t={},n=(r,s)=>{const o=e&&yg(t,s)||s;Xs(t[o])&&Xs(r)?t[o]=Hc(t[o],r):Xs(r)?t[o]=Hc({},r):kr(r)?t[o]=r.slice():t[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ts(arguments[r],n);return t}const OF=(e,t,n,{allOwnKeys:r}={})=>(Ts(t,(s,o)=>{n&&Xe(s)?e[o]=hg(s,n):e[o]=s},{allOwnKeys:r}),e),vF=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),TF=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},RF=(e,t,n,r)=>{let s,o,i;const c={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)i=s[o],(!r||r(i,e,t))&&!c[i]&&(t[i]=e[i],c[i]=!0);e=n!==!1&&_u(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},AF=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},FF=e=>{if(!e)return null;if(kr(e))return e;let t=e.length;if(!gg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},IF=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&_u(Uint8Array)),NF=(e,t)=>{const r=(e&&e[_i]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},xF=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},CF=Tt("HTMLFormElement"),$F=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Sf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),MF=Tt("RegExp"),_g=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ts(n,(s,o)=>{let i;(i=t(s,o,e))!==!1&&(r[o]=i||s)}),Object.defineProperties(e,r)},PF=e=>{_g(e,(t,n)=>{if(Xe(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Xe(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},LF=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return kr(e)?r(e):r(String(e).split(t)),n},DF=()=>{},jF=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function UF(e){return!!(e&&Xe(e.append)&&e[pg]==="FormData"&&e[_i])}const VF=e=>{const t=new Array(10),n=(r,s)=>{if(vs(r)){if(t.indexOf(r)>=0)return;if(Os(r))return r;if(!("toJSON"in r)){t[s]=r;const o=kr(r)?[]:{};return Ts(r,(i,c)=>{const a=n(i,s+1);!Zr(a)&&(o[c]=a)}),t[s]=void 0,o}}return r};return n(e,0)},BF=Tt("AsyncFunction"),qF=e=>e&&(vs(e)||Xe(e))&&Xe(e.then)&&Xe(e.catch),Sg=((e,t)=>e?setImmediate:t?((n,r)=>(fn.addEventListener("message",({source:s,data:o})=>{s===fn&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),fn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Xe(fn.postMessage)),KF=typeof queueMicrotask<"u"?queueMicrotask.bind(fn):typeof process<"u"&&process.nextTick||Sg,JF=e=>e!=null&&Xe(e[_i]),_={isArray:kr,isArrayBuffer:mg,isBuffer:Os,isFormData:yF,isArrayBufferView:aF,isString:uF,isNumber:gg,isBoolean:lF,isObject:vs,isPlainObject:Xs,isEmptyObject:fF,isReadableStream:_F,isRequest:SF,isResponse:wF,isHeaders:EF,isUndefined:Zr,isDate:dF,isFile:hF,isBlob:pF,isRegExp:MF,isFunction:Xe,isStream:gF,isURLSearchParams:bF,isTypedArray:IF,isFileList:mF,forEach:Ts,merge:Hc,extend:OF,trim:kF,stripBOM:vF,inherits:TF,toFlatObject:RF,kindOf:Si,kindOfTest:Tt,endsWith:AF,toArray:FF,forEachEntry:NF,matchAll:xF,isHTMLForm:CF,hasOwnProperty:Sf,hasOwnProp:Sf,reduceDescriptors:_g,freezeMethods:PF,toObjectSet:LF,toCamelCase:$F,noop:DF,toFiniteNumber:jF,findKey:yg,global:fn,isContextDefined:bg,isSpecCompliantForm:UF,toJSONObject:VF,isAsyncFn:BF,isThenable:qF,setImmediate:Sg,asap:KF,isIterable:JF};function J(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}_.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const wg=J.prototype,Eg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Eg[e]={value:e}});Object.defineProperties(J,Eg);Object.defineProperty(wg,"isAxiosError",{value:!0});J.from=(e,t,n,r,s,o)=>{const i=Object.create(wg);return _.toFlatObject(e,i,function(a){return a!==Error.prototype},c=>c!=="isAxiosError"),J.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const HF=null;function Wc(e){return _.isPlainObject(e)||_.isArray(e)}function kg(e){return _.endsWith(e,"[]")?e.slice(0,-2):e}function wf(e,t,n){return e?e.concat(t).map(function(s,o){return s=kg(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function WF(e){return _.isArray(e)&&!e.some(Wc)}const zF=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function Ei(e,t,n){if(!_.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=_.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,y){return!_.isUndefined(y[S])});const r=n.metaTokens,s=n.visitor||l,o=n.dots,i=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(_.isDate(p))return p.toISOString();if(_.isBoolean(p))return p.toString();if(!a&&_.isBlob(p))throw new J("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(p)||_.isTypedArray(p)?a&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,S,y){let O=p;if(p&&!y&&typeof p=="object"){if(_.endsWith(S,"{}"))S=r?S:S.slice(0,-2),p=JSON.stringify(p);else if(_.isArray(p)&&WF(p)||(_.isFileList(p)||_.endsWith(S,"[]"))&&(O=_.toArray(p)))return S=kg(S),O.forEach(function(T,F){!(_.isUndefined(T)||T===null)&&t.append(i===!0?wf([S],F,o):i===null?S:S+"[]",u(T))}),!1}return Wc(p)?!0:(t.append(wf(y,S,o),u(p)),!1)}const f=[],h=Object.assign(zF,{defaultVisitor:l,convertValue:u,isVisitable:Wc});function b(p,S){if(!_.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+S.join("."));f.push(p),_.forEach(p,function(O,k){(!(_.isUndefined(O)||O===null)&&s.call(t,O,_.isString(k)?k.trim():k,S,h))===!0&&b(O,S?S.concat(k):[k])}),f.pop()}}if(!_.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Ef(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Su(e,t){this._pairs=[],e&&Ei(e,this,t)}const Og=Su.prototype;Og.append=function(t,n){this._pairs.push([t,n])};Og.toString=function(t){const n=t?function(r){return t.call(this,r,Ef)}:Ef;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function GF(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vg(e,t,n){if(!t)return e;const r=n&&n.encode||GF;_.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(t,n):o=_.isURLSearchParams(t)?t.toString():new Su(t,n).toString(r),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class kf{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Tg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},YF=typeof URLSearchParams<"u"?URLSearchParams:Su,XF=typeof FormData<"u"?FormData:null,QF=typeof Blob<"u"?Blob:null,ZF={isBrowser:!0,classes:{URLSearchParams:YF,FormData:XF,Blob:QF},protocols:["http","https","file","blob","url","data"]},wu=typeof window<"u"&&typeof document<"u",zc=typeof navigator=="object"&&navigator||void 0,eI=wu&&(!zc||["ReactNative","NativeScript","NS"].indexOf(zc.product)<0),tI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",nI=wu&&window.location.href||"http://localhost",rI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wu,hasStandardBrowserEnv:eI,hasStandardBrowserWebWorkerEnv:tI,navigator:zc,origin:nI},Symbol.toStringTag,{value:"Module"})),De={...rI,...ZF};function sI(e,t){return Ei(e,new De.classes.URLSearchParams,{visitor:function(n,r,s,o){return De.isNode&&_.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function oI(e){return _.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function iI(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function Rg(e){function t(n,r,s,o){let i=n[o++];if(i==="__proto__")return!0;const c=Number.isFinite(+i),a=o>=n.length;return i=!i&&_.isArray(s)?s.length:i,a?(_.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!c):((!s[i]||!_.isObject(s[i]))&&(s[i]=[]),t(n,r,s[i],o)&&_.isArray(s[i])&&(s[i]=iI(s[i])),!c)}if(_.isFormData(e)&&_.isFunction(e.entries)){const n={};return _.forEachEntry(e,(r,s)=>{t(oI(r),s,n,0)}),n}return null}function cI(e,t,n){if(_.isString(e))try{return(t||JSON.parse)(e),_.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Rs={transitional:Tg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=_.isObject(t);if(o&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return s?JSON.stringify(Rg(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t)||_.isReadableStream(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return sI(t,this.formSerializer).toString();if((c=_.isFileList(t))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Ei(c?{"files[]":t}:t,a&&new a,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),cI(t)):t}],transformResponse:[function(t){const n=this.transitional||Rs.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(_.isResponse(t)||_.isReadableStream(t))return t;if(t&&_.isString(t)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(c){if(i)throw c.name==="SyntaxError"?J.from(c,J.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:De.classes.FormData,Blob:De.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],e=>{Rs.headers[e]={}});const aI=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uI=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||t[n]&&aI[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Of=Symbol("internals");function $r(e){return e&&String(e).trim().toLowerCase()}function Qs(e){return e===!1||e==null?e:_.isArray(e)?e.map(Qs):String(e)}function lI(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const fI=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Yi(e,t,n,r,s){if(_.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!_.isString(t)){if(_.isString(r))return t.indexOf(r)!==-1;if(_.isRegExp(r))return r.test(t)}}function dI(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function hI(e,t){const n=_.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,i){return this[r].call(this,t,s,o,i)},configurable:!0})})}let Qe=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(c,a,u){const l=$r(a);if(!l)throw new Error("header name must be a non-empty string");const f=_.findKey(s,l);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||a]=Qs(c))}const i=(c,a)=>_.forEach(c,(u,l)=>o(u,l,a));if(_.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(_.isString(t)&&(t=t.trim())&&!fI(t))i(uI(t),n);else if(_.isObject(t)&&_.isIterable(t)){let c={},a,u;for(const l of t){if(!_.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[u=l[0]]=(a=c[u])?_.isArray(a)?[...a,l[1]]:[a,l[1]]:l[1]}i(c,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=$r(t),t){const r=_.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return lI(s);if(_.isFunction(n))return n.call(this,s,r);if(_.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=$r(t),t){const r=_.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Yi(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(i){if(i=$r(i),i){const c=_.findKey(r,i);c&&(!n||Yi(r,r[c],c,n))&&(delete r[c],s=!0)}}return _.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||Yi(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return _.forEach(this,(s,o)=>{const i=_.findKey(r,o);if(i){n[i]=Qs(s),delete n[o];return}const c=t?dI(o):String(o).trim();c!==o&&delete n[o],n[c]=Qs(s),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return _.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&_.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Of]=this[Of]={accessors:{}}).accessors,s=this.prototype;function o(i){const c=$r(i);r[c]||(hI(s,i),r[c]=!0)}return _.isArray(t)?t.forEach(o):o(t),this}};Qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(Qe.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});_.freezeMethods(Qe);function Xi(e,t){const n=this||Rs,r=t||n,s=Qe.from(r.headers);let o=r.data;return _.forEach(e,function(c){o=c.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Ag(e){return!!(e&&e.__CANCEL__)}function Or(e,t,n){J.call(this,e??"canceled",J.ERR_CANCELED,t,n),this.name="CanceledError"}_.inherits(Or,J,{__CANCEL__:!0});function Fg(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new J("Request failed with status code "+n.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function pI(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function mI(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,i;return t=t!==void 0?t:1e3,function(a){const u=Date.now(),l=r[o];i||(i=u),n[s]=a,r[s]=u;let f=o,h=0;for(;f!==s;)h+=n[f++],f=f%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),u-i<t)return;const b=l&&u-l;return b?Math.round(h*1e3/b):void 0}}function gI(e,t){let n=0,r=1e3/t,s,o;const i=(u,l=Date.now())=>{n=l,s=null,o&&(clearTimeout(o),o=null),e(...u)};return[(...u)=>{const l=Date.now(),f=l-n;f>=r?i(u,l):(s=u,o||(o=setTimeout(()=>{o=null,i(s)},r-f)))},()=>s&&i(s)]}const Io=(e,t,n=3)=>{let r=0;const s=mI(50,250);return gI(o=>{const i=o.loaded,c=o.lengthComputable?o.total:void 0,a=i-r,u=s(a),l=i<=c;r=i;const f={loaded:i,total:c,progress:c?i/c:void 0,bytes:a,rate:u||void 0,estimated:u&&c&&l?(c-i)/u:void 0,event:o,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(f)},n)},vf=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Tf=e=>(...t)=>_.asap(()=>e(...t)),yI=De.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,De.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(De.origin),De.navigator&&/(msie|trident)/i.test(De.navigator.userAgent)):()=>!0,bI=De.hasStandardBrowserEnv?{write(e,t,n,r,s,o){const i=[e+"="+encodeURIComponent(t)];_.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),_.isString(r)&&i.push("path="+r),_.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _I(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function SI(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ig(e,t,n){let r=!_I(t);return e&&(r||n==!1)?SI(e,t):t}const Rf=e=>e instanceof Qe?{...e}:e;function Tn(e,t){t=t||{};const n={};function r(u,l,f,h){return _.isPlainObject(u)&&_.isPlainObject(l)?_.merge.call({caseless:h},u,l):_.isPlainObject(l)?_.merge({},l):_.isArray(l)?l.slice():l}function s(u,l,f,h){if(_.isUndefined(l)){if(!_.isUndefined(u))return r(void 0,u,f,h)}else return r(u,l,f,h)}function o(u,l){if(!_.isUndefined(l))return r(void 0,l)}function i(u,l){if(_.isUndefined(l)){if(!_.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function c(u,l,f){if(f in t)return r(u,l);if(f in e)return r(void 0,u)}const a={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(u,l,f)=>s(Rf(u),Rf(l),f,!0)};return _.forEach(Object.keys({...e,...t}),function(l){const f=a[l]||s,h=f(e[l],t[l],l);_.isUndefined(h)&&f!==c||(n[l]=h)}),n}const Ng=e=>{const t=Tn({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:c}=t;t.headers=i=Qe.from(i),t.url=vg(Ig(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let a;if(_.isFormData(n)){if(De.hasStandardBrowserEnv||De.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((a=i.getContentType())!==!1){const[u,...l]=a?a.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...l].join("; "))}}if(De.hasStandardBrowserEnv&&(r&&_.isFunction(r)&&(r=r(t)),r||r!==!1&&yI(t.url))){const u=s&&o&&bI.read(o);u&&i.set(s,u)}return t},wI=typeof XMLHttpRequest<"u",EI=wI&&function(e){return new Promise(function(n,r){const s=Ng(e);let o=s.data;const i=Qe.from(s.headers).normalize();let{responseType:c,onUploadProgress:a,onDownloadProgress:u}=s,l,f,h,b,p;function S(){b&&b(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function O(){if(!y)return;const T=Qe.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),I={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:T,config:e,request:y};Fg(function(M){n(M),S()},function(M){r(M),S()},I),y=null}"onloadend"in y?y.onloadend=O:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(O)},y.onabort=function(){y&&(r(new J("Request aborted",J.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new J("Network Error",J.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let F=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const I=s.transitional||Tg;s.timeoutErrorMessage&&(F=s.timeoutErrorMessage),r(new J(F,I.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,y)),y=null},o===void 0&&i.setContentType(null),"setRequestHeader"in y&&_.forEach(i.toJSON(),function(F,I){y.setRequestHeader(I,F)}),_.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),c&&c!=="json"&&(y.responseType=s.responseType),u&&([h,p]=Io(u,!0),y.addEventListener("progress",h)),a&&y.upload&&([f,b]=Io(a),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(l=T=>{y&&(r(!T||T.type?new Or(null,e,y):T),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const k=pI(s.url);if(k&&De.protocols.indexOf(k)===-1){r(new J("Unsupported protocol "+k+":",J.ERR_BAD_REQUEST,e));return}y.send(o||null)})},kI=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const o=function(u){if(!s){s=!0,c();const l=u instanceof Error?u:this.reason;r.abort(l instanceof J?l:new Or(l instanceof Error?l.message:l))}};let i=t&&setTimeout(()=>{i=null,o(new J(`timeout ${t} of ms exceeded`,J.ETIMEDOUT))},t);const c=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:a}=r;return a.unsubscribe=()=>_.asap(c),a}},OI=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},vI=async function*(e,t){for await(const n of TI(e))yield*OI(n,t)},TI=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Af=(e,t,n,r)=>{const s=vI(e,t);let o=0,i,c=a=>{i||(i=!0,r&&r(a))};return new ReadableStream({async pull(a){try{const{done:u,value:l}=await s.next();if(u){c(),a.close();return}let f=l.byteLength;if(n){let h=o+=f;n(h)}a.enqueue(new Uint8Array(l))}catch(u){throw c(u),u}},cancel(a){return c(a),s.return()}},{highWaterMark:2})},ki=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",xg=ki&&typeof ReadableStream=="function",RI=ki&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Cg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},AI=xg&&Cg(()=>{let e=!1;const t=new Request(De.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ff=64*1024,Gc=xg&&Cg(()=>_.isReadableStream(new Response("").body)),No={stream:Gc&&(e=>e.body)};ki&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!No[t]&&(No[t]=_.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new J(`Response type '${t}' is not supported`,J.ERR_NOT_SUPPORT,r)})})})(new Response);const FI=async e=>{if(e==null)return 0;if(_.isBlob(e))return e.size;if(_.isSpecCompliantForm(e))return(await new Request(De.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(_.isArrayBufferView(e)||_.isArrayBuffer(e))return e.byteLength;if(_.isURLSearchParams(e)&&(e=e+""),_.isString(e))return(await RI(e)).byteLength},II=async(e,t)=>{const n=_.toFiniteNumber(e.getContentLength());return n??FI(t)},NI=ki&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:o,timeout:i,onDownloadProgress:c,onUploadProgress:a,responseType:u,headers:l,withCredentials:f="same-origin",fetchOptions:h}=Ng(e);u=u?(u+"").toLowerCase():"text";let b=kI([s,o&&o.toAbortSignal()],i),p;const S=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let y;try{if(a&&AI&&n!=="get"&&n!=="head"&&(y=await II(l,r))!==0){let I=new Request(t,{method:"POST",body:r,duplex:"half"}),x;if(_.isFormData(r)&&(x=I.headers.get("content-type"))&&l.setContentType(x),I.body){const[M,$]=vf(y,Io(Tf(a)));r=Af(I.body,Ff,M,$)}}_.isString(f)||(f=f?"include":"omit");const O="credentials"in Request.prototype;p=new Request(t,{...h,signal:b,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:O?f:void 0});let k=await fetch(p,h);const T=Gc&&(u==="stream"||u==="response");if(Gc&&(c||T&&S)){const I={};["status","statusText","headers"].forEach(U=>{I[U]=k[U]});const x=_.toFiniteNumber(k.headers.get("content-length")),[M,$]=c&&vf(x,Io(Tf(c),!0))||[];k=new Response(Af(k.body,Ff,M,()=>{$&&$(),S&&S()}),I)}u=u||"text";let F=await No[_.findKey(No,u)||"text"](k,e);return!T&&S&&S(),await new Promise((I,x)=>{Fg(I,x,{data:F,headers:Qe.from(k.headers),status:k.status,statusText:k.statusText,config:e,request:p})})}catch(O){throw S&&S(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new J("Network Error",J.ERR_NETWORK,e,p),{cause:O.cause||O}):J.from(O,O&&O.code,e,p)}}),Yc={http:HF,xhr:EI,fetch:NI};_.forEach(Yc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const If=e=>`- ${e}`,xI=e=>_.isFunction(e)||e===null||e===!1,$g={getAdapter:e=>{e=_.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let o=0;o<t;o++){n=e[o];let i;if(r=n,!xI(n)&&(r=Yc[(i=String(n)).toLowerCase()],r===void 0))throw new J(`Unknown adapter '${i}'`);if(r)break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([c,a])=>`adapter ${c} `+(a===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(If).join(`
`):" "+If(o[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Yc};function Qi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Or(null,e)}function Nf(e){return Qi(e),e.headers=Qe.from(e.headers),e.data=Xi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),$g.getAdapter(e.adapter||Rs.adapter)(e).then(function(r){return Qi(e),r.data=Xi.call(e,e.transformResponse,r),r.headers=Qe.from(r.headers),r},function(r){return Ag(r)||(Qi(e),r&&r.response&&(r.response.data=Xi.call(e,e.transformResponse,r.response),r.response.headers=Qe.from(r.response.headers))),Promise.reject(r)})}const Mg="1.11.0",Oi={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Oi[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const xf={};Oi.transitional=function(t,n,r){function s(o,i){return"[Axios v"+Mg+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,c)=>{if(t===!1)throw new J(s(i," has been removed"+(n?" in "+n:"")),J.ERR_DEPRECATED);return n&&!xf[i]&&(xf[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,c):!0}};Oi.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function CI(e,t,n){if(typeof e!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],i=t[o];if(i){const c=e[o],a=c===void 0||i(c,o,e);if(a!==!0)throw new J("option "+o+" must be "+a,J.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new J("Unknown option "+o,J.ERR_BAD_OPTION)}}const Zs={assertOptions:CI,validators:Oi},Rt=Zs.validators;let yn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kf,response:new kf}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Tn(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Zs.assertOptions(r,{silentJSONParsing:Rt.transitional(Rt.boolean),forcedJSONParsing:Rt.transitional(Rt.boolean),clarifyTimeoutError:Rt.transitional(Rt.boolean)},!1),s!=null&&(_.isFunction(s)?n.paramsSerializer={serialize:s}:Zs.assertOptions(s,{encode:Rt.function,serialize:Rt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Zs.assertOptions(n,{baseUrl:Rt.spelling("baseURL"),withXsrfToken:Rt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&_.merge(o.common,o[n.method]);o&&_.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=Qe.concat(i,o);const c=[];let a=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(a=a&&S.synchronous,c.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let l,f=0,h;if(!a){const p=[Nf.bind(this),void 0];for(p.unshift(...c),p.push(...u),h=p.length,l=Promise.resolve(n);f<h;)l=l.then(p[f++],p[f++]);return l}h=c.length;let b=n;for(f=0;f<h;){const p=c[f++],S=c[f++];try{b=p(b)}catch(y){S.call(this,y);break}}try{l=Nf.call(this,b)}catch(p){return Promise.reject(p)}for(f=0,h=u.length;f<h;)l=l.then(u[f++],u[f++]);return l}getUri(t){t=Tn(this.defaults,t);const n=Ig(t.baseURL,t.url,t.allowAbsoluteUrls);return vg(n,t.params,t.paramsSerializer)}};_.forEach(["delete","get","head","options"],function(t){yn.prototype[t]=function(n,r){return this.request(Tn(r||{},{method:t,url:n,data:(r||{}).data}))}});_.forEach(["post","put","patch"],function(t){function n(r){return function(o,i,c){return this.request(Tn(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}yn.prototype[t]=n(),yn.prototype[t+"Form"]=n(!0)});let $I=class Pg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(c=>{r.subscribe(c),o=c}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},t(function(o,i,c){r.reason||(r.reason=new Or(o,i,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Pg(function(s){t=s}),cancel:t}}};function MI(e){return function(n){return e.apply(null,n)}}function PI(e){return _.isObject(e)&&e.isAxiosError===!0}const Xc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xc).forEach(([e,t])=>{Xc[t]=e});function Lg(e){const t=new yn(e),n=hg(yn.prototype.request,t);return _.extend(n,yn.prototype,t,{allOwnKeys:!0}),_.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Lg(Tn(e,s))},n}const _e=Lg(Rs);_e.Axios=yn;_e.CanceledError=Or;_e.CancelToken=$I;_e.isCancel=Ag;_e.VERSION=Mg;_e.toFormData=Ei;_e.AxiosError=J;_e.Cancel=_e.CanceledError;_e.all=function(t){return Promise.all(t)};_e.spread=MI;_e.isAxiosError=PI;_e.mergeConfig=Tn;_e.AxiosHeaders=Qe;_e.formToJSON=e=>Rg(_.isHTMLForm(e)?new FormData(e):e);_e.getAdapter=$g.getAdapter;_e.HttpStatusCode=Xc;_e.default=_e;const{Axios:GI,AxiosError:YI,CanceledError:XI,isCancel:QI,CancelToken:ZI,VERSION:eN,all:tN,Cancel:nN,isAxiosError:rN,spread:sN,toFormData:oN,AxiosHeaders:iN,HttpStatusCode:cN,formToJSON:aN,getAdapter:uN,mergeConfig:lN}=_e;function LI(){const e=Un.useId(),[t,n]=Un.useState(!1),[r,s]=Un.useState(null),[o,i]=Un.useState(null),{control:c,handleSubmit:a,formState:{errors:u},reset:l}=py({resolver:eF(tF),mode:"onTouched",reValidateMode:"onChange",defaultValues:{name:"",website:""}}),f=async function(p){n(!0),i(null),s(null);try{const S=await _e.post("/api/tools/submit",p);console.log("/tools/submit API response: ",S.data.message)}catch{}finally{n(!1)}},h=r||o,b=r?"success":"error";return ae.jsxs("form",{onSubmit:a(f),className:"grid gap-2",children:[h&&ae.jsx(iF,{message:h,type:b}),ae.jsxs("div",{children:[ae.jsx(bf,{htmlFor:"name",children:"Name"}),ae.jsx(Cu,{name:"name",control:c,render:function({field:p}){const S=Nu(p.name,e),y=u[p.name];return ae.jsxs(ae.Fragment,{children:[ae.jsx(xu,{...p,id:"name",className:"mt-2 border-neutral-300",placeholder:"Enter tool name","aria-invalid":y?"true":"false","aria-describedby":y?S:void 0,disabled:t}),ae.jsx(_f,{error:y?.message,errorId:S})]})}})]}),ae.jsxs("div",{children:[ae.jsx(bf,{htmlFor:"website",children:"Website"}),ae.jsx(Cu,{name:"website",control:c,render:function({field:p}){const S=Nu(p.name,e),y=u[p.name];return ae.jsxs(ae.Fragment,{children:[ae.jsx(xu,{...p,id:"website",className:"mt-2 border-neutral-300",placeholder:"https://example.com","aria-invalid":y?"true":"false","aria-describedby":y?S:void 0,disabled:t}),ae.jsx(_f,{error:y?.message,errorId:S})]})}})]}),ae.jsx(Gg,{type:"submit",disabled:t,children:t?"Submitting...":"Submit Tool"})]})}const fN=function(){return ae.jsxs("div",{className:"max-w-md mx-auto p-6",children:[ae.jsx("h1",{className:"text-2xl tracking-tight mb-6 font-semibold",children:"Submit a Tool"}),ae.jsx(LI,{})]})};export{fN as component};
